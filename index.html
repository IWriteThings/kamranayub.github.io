
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Kamranicus</title>
  <meta name="author" content="Kamran">

  
  <meta name="description" content="Kamranicus
Personal and development blog of Kamran Ayub about me Hi, my name is Kamran. I am a web developer and designer, residing in Minnesota. I &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://kamranicus.com">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="http://feeds.feedburner.com/Kamranicus" rel="alternate" title="Kamranicus" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-1203259-13']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

  <body>
    <a href="/" class="home-icon">
      <img src="/images/home.png"/>
    </a>

    <div class="home-page">
  <div class="hero">
    <h1>Kamranicus</h1>
<p>Personal and development blog of Kamran Ayub</p>

  </div>

  <div class="home-field">
    <div class="home-landing her-row">
      <div class="container">
        <div class="row">
          <div id="about-me" class="col-md-offset-3 col-md-6">
  <h4>about me</h4>
  <p>Hi, my name is Kamran. I am a web developer and designer,  residing in Minnesota. I&#8217;ve been programming since 2001 and  I am familiar with many different languages, both web-based  and server-based. I love to tinker around and think of new  ways to solve problems.
</p>
  <div class="social-icon-list">
  	
    <a title="Twitter" href="https://twitter.com/kamranayub"><img src="/images/glyphicons_social_31_twitter.png"/></a>
    
    
    <a title="GitHub" href="https://github.com/kamranayub"><img src="/images/glyphicons_social_21_github.png"/></a>
    
    
    
  </div>
</div>

        </div>
      </div>
    </div>

    <div class="article-list">
      <div class="container">
        
          
          <div class="row">
            <div class="col-md-offset-2 col-md-8">
              <article>
  <h2><a href="/blog/2016/04/11/tccc20-typescript-in-action/">TypeScript in Action at Twin Cities Code Camp 20 (TCCC20)</a></h2>
  
  <p>
    <p>I&rsquo;ll be speaking at 8:30am this weekend at <a href="http://twincitiescodecamp.com">Twin Cities Code Camp</a>. My talk will about using TypeScript
in the context of an Angular 2 ASP.NET MVC web application but will focus on how TypeScript enhances my productivity and showcases some features of the language. I&rsquo;ve done the talk previously internally at General Mills and had a great response so I thought I&rsquo;d piggyback on the success of my previous <a href="http://kamranicus.com/presentations/demystifying-typescript/#/">Demystifying TypeScript</a> talk (which is also on <a href="https://www.youtube.com/watch?v=kb7tvaBJeMs">YouTube</a>).</p>




<p>If you&rsquo;re at all interested in seeing how TypeScript development looks in action, you should attend and I&rsquo;d recommend going through my
previous talk if you&rsquo;re still not convinced TypeScript is awesome. This talk assumes you are at least open to the idea of developing
in TypeScript and are curious to see how it can be used.</p>




<p>It&rsquo;ll be a fun time and a busy weekend&mdash;I&rsquo;ll have to leave the conference right after my talk to participate in Ludum Dare, where I&rsquo;ll
be helping to build a game in 72 hours. I&rsquo;m sad I&rsquo;ll miss the speaker happy hour and the prizes but it&rsquo;s for a good reason!
Hope to see you Saturday!</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2016-04-11T18:38:00+00:00" pubdate data-updated="true">Apr 11<span>th</span>, 2016</time>
    

in
<span class="categories">
  
    <a class='category' href='/blog/categories/conferences/'>Conferences</a>, <a class='category' href='/blog/categories/javascript/'>JavaScript</a>, <a class='category' href='/blog/categories/talks/'>Talks</a>, <a class='category' href='/blog/categories/typescript/'>TypeScript</a>
  
</span>


  </span>

  
</article>

            </div>
          </div>
        
          
          <div class="row">
            <div class="col-md-offset-2 col-md-8">
              <article>
  <h2><a href="/blog/2016/04/05/wmf5-powershell-dsc-generating-encryption-certificate/">Generating an Encryption Certificate for PowerShell DSC in WMF5</a></h2>
  
  <p>
    <p>I&rsquo;m currently building out a PowerShell DSC pull server cluster at work. If you aren&rsquo;t familiar with DSC, I&rsquo;ll talk more about it in an upcoming post that ties it all together. The long and short of it is that DSC is a way to store configuration as code and automate the configuration of many servers at once.</p>




<p>In the recent Windows Management Framework 5 release, Microsoft has improved its support and feature set for DSC but with a new release comes new surprises. The first surprise you may run into, as we did, was that your old WMF4 way of encrypting MOF files doesn&rsquo;t work. In WMF5, the requirements for the certificate used to secure MOF files is stricter. <a href="https://msdn.microsoft.com/en-us/powershell/dsc/securemof">Taken from MSDN</a>:</p>




<ol>
<li>Key Usage:</li>
<li>Must contain: &lsquo;KeyEncipherment&rsquo; and &lsquo;DataEncipherment&rsquo;.</li>
<li>Should <em>not</em> contain: &lsquo;Digital Signature&rsquo;.</li>
<li>Enhanced Key Usage:</li>
<li>Must contain: Document Encryption (1.3.6.1.4.1.311.80.1).</li>
<li>Should <em>not</em> contain: Client Authentication (1.3.6.1.5.5.7.3.2) and Server Authentication (1.3.6.1.5.5.7.3.1).</li>
</ol>




<p>If you read my <a href="http://kamranicus.com/blog/2016/02/24/azure-key-vault-config-encryption-azure/">previous foray into certificates with Azure Key Vault</a>, you know I&rsquo;m pretty green when it comes to certificate management and terminology. I really didn&rsquo;t know what this stuff meant&mdash;I mean, I understand a certificate has key usages and enhanced key usages, but <strong>how does it get them?</strong> It has to do with the certificate request and the template used to provision your certificate.</p>




<p>It turns out Microsoft recommends obtaining a certificate from Active Directory Certificate Services. That&rsquo;s cool, but I&rsquo;m just a developer who wants to work on DSC, I don&rsquo;t have an ADCS server to give me certificates during testing&mdash;that&rsquo;s a different team altogether and when they&rsquo;re primary guy is out of the office, I&rsquo;m a bit stuck. Frustratingly, TechNet doesn&rsquo;t provide any helpful information on generating the required certificate!</p>




<p>I thought I could maybe use a self-signed certificate while I wait for a &ldquo;for real&rdquo; one later. After searching around for a method to create a certificate with the required KU and EKU specs, I found a lot of answers suggesting using OpenSSL. I&rsquo;ve never used OpenSSL before so I thought I&rsquo;d give it a try and I found it a bit confusing&mdash;I think I could have gotten it to work but instead I came across a random PowerShell article (unrelated to anything) using a utility called <code>certreq</code> that could handle providing custom key usages, problem solved!</p>




<p>You just need to create a file to define your certificate settings, <strong>MyCert.inf</strong>:</p>


<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[Version]
</span><span class='line'>Signature = &ldquo;$Windows NT$&rdquo;
</span><span class='line'>
</span><span class='line'>[Strings]
</span><span class='line'>szOID_ENHANCED_KEY_USAGE = &ldquo;2.5.29.37&rdquo;
</span><span class='line'>szOID_DOCUMENT_ENCRYPTION = &ldquo;1.3.6.1.4.1.311.80.1&rdquo;
</span><span class='line'>
</span><span class='line'>[NewRequest]
</span><span class='line'>Subject = &ldquo;cn=<a href="&#x6d;&#97;&#x69;&#x6c;&#x74;&#111;&#x3a;&#x6d;&#101;&#x40;&#101;&#x78;&#x61;&#109;&#112;&#108;&#x65;&#x2e;&#x63;&#x6f;&#109;">&#109;&#x65;&#x40;&#x65;&#x78;&#97;&#109;&#112;&#108;&#x65;&#x2e;&#99;&#111;&#109;</a>&rdquo;
</span><span class='line'>MachineKeySet = false
</span><span class='line'>KeyLength = 2048
</span><span class='line'>KeySpec = AT_KEYEXCHANGE
</span><span class='line'>HashAlgorithm = Sha1
</span><span class='line'>Exportable = true
</span><span class='line'>RequestType = Cert
</span><span class='line'>
</span><span class='line'>KeyUsage = &ldquo;CERT_KEY_ENCIPHERMENT_KEY_USAGE | CERT_DATA_ENCIPHERMENT_KEY_USAGE&rdquo;
</span><span class='line'>ValidityPeriod = &ldquo;Years&rdquo;
</span><span class='line'>ValidityPeriodUnits = &ldquo;1000&rdquo;
</span><span class='line'>
</span><span class='line'>[Extensions]
</span><span class='line'>%szOID_ENHANCED_KEY_USAGE% = &ldquo;{text}%szOID_DOCUMENT_ENCRYPTION%&rdquo;</span></code></pre></td></tr></table></div></figure></p>

<p>Just change the <code>Subject</code> line to whatever you need in your case.</p>




<p>Then execute <code>certreq</code> using the input file:</p>




<pre><code>certreq -new MyCert.inf MyCert.cer
</code></pre>




<p>Certreq should be available if you have Makecert&mdash;if you aren&rsquo;t finding it in the default command prompt, try using the Visual Studio Command Prompt. Once you execute the command it will generate a public key file and install the private/public key pair into your <code>CurrentUser</code> personal certificate store:</p>




<pre><code>PS&gt; dir Cert:\CurrentUser\My
</code></pre>




<p>From there, you can export the private/public keys and install it on your DSC nodes.</p>




<p><img src="https://cloud.githubusercontent.com/assets/563819/14269791/dac55acc-fa9c-11e5-8352-55881c3150ed.png" alt="Example screenshot" /></p>




<p>Until you get a signed certificate from your CA, this should work. Hope that helps!</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2016-04-05T03:43:00+00:00" pubdate data-updated="true">Apr 5<span>th</span>, 2016</time>
    

in
<span class="categories">
  
    <a class='category' href='/blog/categories/dsc/'>DSC</a>, <a class='category' href='/blog/categories/powershell/'>PowerShell</a>, <a class='category' href='/blog/categories/security/'>Security</a>
  
</span>


  </span>

  
</article>

            </div>
          </div>
        
          
          <div class="row">
            <div class="col-md-offset-2 col-md-8">
              <article>
  <h2><a href="/blog/2016/03/11/attending-build-2016/">See You at Build 2016</a></h2>
  
  <p>
    <p>I love attending conferences. At the end of the month I&rsquo;ll be attending <a href="http://buildwindows.com">Build 2016</a>. Build is the annual Microsoft conference. At the end of January me and some friends <a href="https://www.instagram.com/p/BBJQ-PTuIzZ">attended PAX South</a> in San Antonio and it was a blast (not for work). A gaming convention has a different air than a developer conference. There&rsquo;s a certain energy and it&rsquo;s very motivating being around fellow developers, learning new tech, and seeing what&rsquo;s new. I&rsquo;ve attended Build several times in the past and it&rsquo;s always been fun&mdash;especially <a href="http://kamranicus.com/blog/posts/7/mix-11-day-2-kinects-celebrities-kings-and-clubbin/">when you meet coding &ldquo;celebs&rdquo;</a>. Usually I take my wife even though she doesn&rsquo;t attend the conference, we will typically stay longer. This year, not only will she be joining but our friend will be coming as well&mdash;both of them will be traipsing around San Francisco while I and a few coworkers will attend the conference. My partners in crime, <a href="http://twitter.com/erikonarheim">Erik</a> &amp; <a href="http://twitter.com/alangrgic">Alan</a>, will be joining me so it&rsquo;ll be a <em>ton</em> of fun (yes, we all work together and yes we <em>just</em> went to PAX together). Going to a conference is fun, going to a conference <em>with your friends</em> is even more fun.</p>




<p>After Build we&rsquo;ll be leaving my coworkers behind and we&rsquo;ll be flying up to Portland to explore the area. I&rsquo;ve been to downtown Seattle for PAX Prime before but I&rsquo;ve only been in the surrounding area once when I was a teenager and I always thought it was beautiful. My wife never has been to the Pacific northwest so we thought it&rsquo;d be fun to spend a few days extra and drive around. We&rsquo;re all looking forward to it.</p>




<p>If you&rsquo;re at Build and you follow me, be sure to <a href="http://twitter.com/kamranayub">send me a tweet</a> and we&rsquo;ll meet up!</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2016-03-11T00:31:00+00:00" pubdate data-updated="true">Mar 11<span>th</span>, 2016</time>
    

in
<span class="categories">
  
    <a class='category' href='/blog/categories/azure/'>Azure</a>, <a class='category' href='/blog/categories/conferences/'>Conferences</a>, <a class='category' href='/blog/categories/microsoft/'>Microsoft</a>
  
</span>


  </span>

  
</article>

            </div>
          </div>
        
          
          <div class="row">
            <div class="col-md-offset-2 col-md-8">
              <article>
  <h2><a href="/blog/2016/03/06/cors-multiple-origins-iis/">Handling Multiple Origins in CORS Using URL Rewrite</a></h2>
  
  <p>
    <p>Here&rsquo;s a quick tip if you&rsquo;re trying to figure out how to handle <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS">cross-origin requests (CORS)</a> when you have multiple origins (namely, HTTP and HTTPS). This works in IIS 8.0 and above, including Azure, as long as you have the <a href="http://www.iis.net/downloads/microsoft/url-rewrite">URL Rewrite module</a> installed.</p>




<p>The CORS header looks like this:</p>


<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Access-Control-Allow-Origin: <a href="http://mydomain.com">http://mydomain.com</a></span></code></pre></td></tr></table></div></figure></p>

<p>The spec is very strict. The header can only return a single value and it must be absolutely qualified, which means if you have a site that is served over HTTP and HTTPS (or multiple domains), you need to <em>dynamically</em> build this header in your response. Many tutorials and blog posts say to specify <code>*</code> as the value&mdash;<strong>DO NOT DO THIS!</strong> This means any origin (domain) can embed/request assets from your website. Unless you have hundreds of sites doing this (aka CDN), you should only whitelist the domains that can include resources from your site.</p>




<p>If you are sharing resources with a known number of hosts, the following method will help. If it&rsquo;s a <em>dynamic</em> list, you will need to programmatically add the <code>Access-Control-Allow-Origin</code> header depending on the incoming <code>Origin</code> header&mdash;something I won&rsquo;t cover here.</p>




<p>Rather than messing with C# and modifying outgoing responses what I ended up using was a simple URL rewrite rule, proposed by <a href="http://stackoverflow.com/a/31084390/109458">this Stack Overflow answer</a>. All it does is add a header to the outbound response when the regular expression matches&mdash;in this case, whitelisting only the HTTP and HTTPS version of my domain (or subdomain).</p>


<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;system.webServer&gt;
</span><span class='line'>   &lt;httpProtocol&gt;
</span><span class='line'>     &lt;customHeaders&gt;
</span><span class='line'>         &lt;add name=&ldquo;Access-Control-Allow-Headers&rdquo; value=&ldquo;Origin, X-Requested-With, Content-Type, Accept&rdquo; /&gt;
</span><span class='line'>         &lt;add name=&ldquo;Access-Control-Allow-Methods&rdquo; value=&ldquo;POST,GET,OPTIONS,PUT,DELETE&rdquo; /&gt;
</span><span class='line'>     &lt;/customHeaders&gt;
</span><span class='line'>   &lt;/httpProtocol&gt;
</span><span class='line'>   &lt;rewrite&gt;          <br/>
</span><span class='line'>      &lt;outboundRules&gt;
</span><span class='line'>          &lt;clear /&gt;              <br/>
</span><span class='line'>          &lt;rule name=&ldquo;AddCrossDomainHeader&rdquo;&gt;
</span><span class='line'>              &lt;match serverVariable=&ldquo;RESPONSE_Access_Control_Allow_Origin&rdquo; pattern=&ldquo;.*&rdquo; /&gt;
</span><span class='line'>              &lt;conditions logicalGrouping=&ldquo;MatchAll&rdquo; trackAllCaptures=&ldquo;true&rdquo;&gt;
</span><span class='line'>                  &lt;add input=&ldquo;{HTTP_ORIGIN}&rdquo; pattern=&ldquo;(http(s)?:\/\/((.+.)?mydomain.com))&rdquo; /&gt;
</span><span class='line'>              &lt;/conditions&gt;
</span><span class='line'>              &lt;action type=&ldquo;Rewrite&rdquo; value=&ldquo;{C:0}&rdquo; /&gt;
</span><span class='line'>          &lt;/rule&gt;         <br/>
</span><span class='line'>      &lt;/outboundRules&gt;
</span><span class='line'>   &lt;/rewrite&gt;
</span><span class='line'>&lt;/system.webServer&gt;</span></code></pre></td></tr></table></div></figure></p>

<p>This is using special syntax of the URL Rewrite module (<code>RESPONSE_</code>) to add a outgoing response header (dashes replaced with underscores). Then it matches the <em>incoming</em> <code>Origin</code> header, compares the value, and if it matches includes the CORS header with the value of my domain.</p>




<p>That was all I had to do!</p>




<p><strong>Note:</strong> Since I just converted over to always SSL, I no longer need this workaround but multiple origins is pretty common when dealing with CORS so this solution will come in handy.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2016-03-06T15:50:00+00:00" pubdate data-updated="true">Mar 6<span>th</span>, 2016</time>
    

in
<span class="categories">
  
    <a class='category' href='/blog/categories/azure/'>Azure</a>, <a class='category' href='/blog/categories/c-number/'>C#</a>, <a class='category' href='/blog/categories/security/'>Security</a>
  
</span>


  </span>

  
</article>

            </div>
          </div>
        
          
          <div class="row">
            <div class="col-md-offset-2 col-md-8">
              <article>
  <h2><a href="/blog/2016/02/24/azure-key-vault-config-encryption-azure/">Securing Secrets Using Azure Key Vault and Config Encryption</a></h2>
  
  <p>
    <p>Secrets. We all have them. I&rsquo;m talking about secrets like your database connection strings, API keys and encryption keys. Where are you storing yours? Are you storing them&hellip;</p>




<ol>
<li>In your application&rsquo;s source code?</li>
<li>In a config file (<code>appSettings</code> or otherwise) checked into source control?</li>
<li>In a database?</li>
<li>In a managed portal, like Azure?</li>
</ol>




<p>I hope you aren&rsquo;t storing them hardcoded. You&rsquo;re probably doing option 2 or a hybrid of options 2-4. Even if you use an external data source, it&rsquo;s hard to escape the need for secrets in local development unless you force your app to rely on having connectivity which makes it hard to work offline.</p>




<p>In this post I&rsquo;m going to provide some suggestions on how to store your secrets better using Azure Key Vault and config file encryption, specifically in the context of Azure but the concepts apply to any hosting environment.</p>




  </p>
  <span class="meta">
    written 








  



<time datetime="2016-02-24T02:30:00+00:00" pubdate data-updated="true">Feb 24<span>th</span>, 2016</time>
    

in
<span class="categories">
  
    <a class='category' href='/blog/categories/azure/'>Azure</a>, <a class='category' href='/blog/categories/c-number/'>C#</a>, <a class='category' href='/blog/categories/cloud/'>Cloud</a>, <a class='category' href='/blog/categories/encryption/'>Encryption</a>, <a class='category' href='/blog/categories/secrets/'>Secrets</a>, <a class='category' href='/blog/categories/security/'>Security</a>
  
</span>


  </span>

  
    <a class="full-article-link pull-right" rel="full-article" href="/blog/2016/02/24/azure-key-vault-config-encryption-azure/">Read on &rarr;</a>
  
</article>

            </div>
          </div>
        
          
          <div class="row">
            <div class="col-md-offset-2 col-md-8">
              <article>
  <h2><a href="/blog/2016/02/09/tools-of-the-trade/">Tools of the Trade 2016</a></h2>
  
  <p>
    <p>Sometimes you get so caught up in the work you do on a daily basis that you forget what it was like to start your job on day one&mdash;not knowing anything about what tools, extensions, and general utilities you take for granted now, 6 years into your career. It seems like on a monthly basis I find a new extension or utility that is useful to me. I wanted to share my toolbelt, in case it contains something you&rsquo;ve never heard of and causes you to exclaim in excitement about something awesome that you&rsquo;ll start using today.</p>




  </p>
  <span class="meta">
    written 








  



<time datetime="2016-02-09T03:09:00+00:00" pubdate data-updated="true">Feb 9<span>th</span>, 2016</time>
    

in
<span class="categories">
  
    <a class='category' href='/blog/categories/c-number/'>C#</a>, <a class='category' href='/blog/categories/development/'>Development</a>, <a class='category' href='/blog/categories/tools/'>Tools</a>, <a class='category' href='/blog/categories/visual-studio/'>Visual Studio</a>
  
</span>


  </span>

  
    <a class="full-article-link pull-right" rel="full-article" href="/blog/2016/02/09/tools-of-the-trade/">Read on &rarr;</a>
  
</article>

            </div>
          </div>
        
          
          <div class="row">
            <div class="col-md-offset-2 col-md-8">
              <article>
  <h2><a href="/blog/2016/02/04/typewriter/">Using Typewriter to Strongly-Type Your Client-Side Models and Services</a></h2>
  
  <p>
    <p>I&rsquo;ve recently discovered <a href="http://frhagn.github.io/Typewriter/index.html">Typewriter for Visual Studio</a>, a T4-style code-generator specifically meant for generating Typescript files. I&rsquo;ve been using it since in all my projects, at work and at home. It&rsquo;s just <strong>so</strong> good. Let me explain what Typewriter does and why it&rsquo;s so awesome.</p>




  </p>
  <span class="meta">
    written 








  



<time datetime="2016-02-04T02:08:00+00:00" pubdate data-updated="true">Feb 4<span>th</span>, 2016</time>
    

in
<span class="categories">
  
    <a class='category' href='/blog/categories/c-number/'>C#</a>, <a class='category' href='/blog/categories/javascript/'>Javascript</a>, <a class='category' href='/blog/categories/knockout-dot-js/'>Knockout.js</a>, <a class='category' href='/blog/categories/typescript/'>Typescript</a>, <a class='category' href='/blog/categories/typewriter/'>Typewriter</a>, <a class='category' href='/blog/categories/visual-studio/'>Visual Studio</a>
  
</span>


  </span>

  
    <a class="full-article-link pull-right" rel="full-article" href="/blog/2016/02/04/typewriter/">Read on &rarr;</a>
  
</article>

            </div>
          </div>
        
          
          <div class="row">
            <div class="col-md-offset-2 col-md-8">
              <article>
  <h2><a href="/blog/2016/01/25/planet-wars-ai-competition-excaliburjs-csharp/">Planet Wars AI Competition With C# and Excalibur.js</a></h2>
  
  <p>
    <p><img src="https://zippy.gfycat.com/BraveBlushingImpala.gif" alt="Planet Wars" /></p>




<p>This past weekend <a href="http://twitter.com/erikonarheim">Erik</a> and I built out a <a href="https://github.com/eonarheim/planet-wars-competition">Planet Wars</a> server (written in C#) and an <a href="http://excaliburjs.com">Excalibur.js</a>-powered visualization (written in TypeScript). Planet Wars is an AI competition where you build an AI that competes against another player to control a solar system. A map consists of several planets that have different growth rates and an initial number of ships. You have to send out a &ldquo;fleet&rdquo; of ships to colonize other planets and the player who controls the most planets and has destroyed their opponent&rsquo;s ships wins the game.</p>




<p>At work we are hosting our 6th Code Camp and recently we started hosting an AI competition internally. You can find past competition agents for <a href="https://github.com/eonarheim/AntAICompetition">Ants</a> and <a href="https://github.com/eonarheim/BellTowerEscape">Elevators</a>, for example.</p>




<p>The <a href="https://github.com/eonarheim/planet-wars-competition/tree/master/PlanetWars/Scripts/game">visualization for Planet Wars</a> is fairly simple, made even simpler using the power of <a href="http://excaliburjs.com">Excalibur.js</a>, the engine we work on during our spare time. We basically just use an Excalibur timer to query the status of the game state and update the state of all the actors in the game. For moving the fleets, we just use the <a href="http://excaliburjs.com/docs/api/edge/classes/ex.actioncontext.html">Actor Action API</a>.</p>




<p>For the <a href="https://github.com/eonarheim/planet-wars-competition/tree/master/PlanetWars/Server">game server</a>, we are using a <a href="https://github.com/eonarheim/planet-wars-competition/blob/master/PlanetWars/Server/HighFrequencyTimer.cs">HighFrequencyTimer</a> to run a 30fps server and then clients just send commands via HTTP, so any kind of agent will work like Python, Perl, PowerShell, or whatever! Anything that speaks HTTP can be a client. The server runs in the context of a website so we can easily query the state using a singleton <code>GameManager</code>. This wouldn&rsquo;t work in a load-balanced environment but it doesn&rsquo;t matter since people develop agents locally and we run the simulations on one server at high-speed to produce the results. If you backed the server with a data store, you could replay games but right now there&rsquo;s only an in-memory implementation.</p>




<p>To keep the server and client models in-sync, we use <a href="http://frhagn.github.io/Typewriter/index.html">Typewriter for Visual Studio</a> which is <strong>amazing</strong> and super useful not just for syncing client/server but also generating web clients, interfaces, etc. from C# code. I plan to write a separate post on some Typewriter tips for Knockout.js and Web API.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2016-01-25T18:30:00+00:00" pubdate data-updated="true">Jan 25<span>th</span>, 2016</time>
    

in
<span class="categories">
  
    <a class='category' href='/blog/categories/ai/'>AI</a>, <a class='category' href='/blog/categories/c-number/'>C#</a>, <a class='category' href='/blog/categories/excalibur-dot-js/'>Excalibur.js</a>, <a class='category' href='/blog/categories/games/'>Games</a>, <a class='category' href='/blog/categories/javascript/'>Javascript</a>, <a class='category' href='/blog/categories/typescript/'>Typescript</a>, <a class='category' href='/blog/categories/typewriter/'>Typewriter</a>
  
</span>


  </span>

  
</article>

            </div>
          </div>
        
          
          <div class="row">
            <div class="col-md-offset-2 col-md-8">
              <article>
  <h2><a href="/blog/2016/01/05/year-in-review/">2015: A Year in Review</a></h2>
  
  <p>
    <p>2015 was a very eventful (and fulfilling) year for me and my wife. Let&rsquo;s break it down, shall we?</p>




<h2>Living abroad for 6 months</h2>




<p><img src="https://d262ilb51hltx0.cloudfront.net/max/2000/1*-h8wTj1iOSrHHtnGMxR60w.jpeg" alt="Bordeaux, France" /></p>




<p>By far the most impressive thing I did last year was to <a href="http://kamranicus.com/blog/2015/05/21/5-things-for-6-months-abroad/">take a 6 month sabbatical</a> and live abroad in France with my wife. Though I&rsquo;ve written about it previously, I left out the entire part where we chronicled our adventure in a series of publications on <a href="http://medium.com">Medium</a>. We kept it anonymous during the trip to avoid any potential issues but now that it&rsquo;s over, I will list the different publications so you can read back through what we did for 6 months (spoiler: we did <em>a lot</em>).</p>




<p>Just to be clear when you&rsquo;re reading, I am <strong>Vincent</strong> and my wife is <strong>Celeste.</strong></p>




<ul>
<li><a href="https://medium.com/visa-vis-a-guide">Visa-Vis: A Guide</a> &ndash; Prologue series of posts on steps to being able to live in France for 6 months</li>
<li><a href="https://medium.com/aix-squared">Aix Squared</a> &ndash; Dec 23, 2015-June 14, 2015 &ndash; General posts on food, cities, and living in France</li>
<li><a href="https://medium.com/aix-squared/rennes-france-d4957bf17d4e">Rennes</a>, <a href="https://medium.com/aix-squared/nantes-france-5c0aa9cf5ff">Nantes</a>, <a href="https://medium.com/aix-squared/bordeaux-france-c66f859826c9">Bordeaux</a> &ndash; April 24-30, 2015 &ndash; A tour of north/western France</li>
<li><a href="https://medium.com/aix-in-amsterdam">Aix in Amsterdam</a> &ndash; February 11-19, 2015</li>
<li><a href="https://medium.com/aix-in-marrakesh">Aix in Marrakesh</a> &ndash; March 10-16, 2015</li>
<li><a href="https://medium.com/aix-in-dublin">Aix in Dublin</a> &ndash; April 5-9, 2015</li>
<li><a href="https://medium.com/aix-in-oslo">Aix in Oslo</a> &ndash; April 9-13, 2015</li>
<li><a href="https://medium.com/aix-in-london">Aix in London</a> &ndash; May 12-16, 2015</li>
<li><a href="https://medium.com/aix-in-florence">Aix in Florence</a> &ndash; June 9-14, 2015</li>
</ul>




<p>It was an experience I&rsquo;ll never forget and one that probably won&rsquo;t be repeated anytime soon. My wife and I both felt it was the right time and that we&rsquo;d probably get little to no chance at doing something so crazy once we had kids and &ldquo;settled down.&rdquo; We still hope to continue traveling once a year or couple years, especially after an experience like that. One of my plans for 2016 is to compile all these posts into a book that we print and keep for us and our future children.</p>




<h2>New House</h2>




<p><img src="https://cloud.githubusercontent.com/assets/563819/12107000/cd7f12cc-b32a-11e5-852e-78b839331383.png" alt="Bay window" /></p>




<p>We weren&rsquo;t in a position to buy a house so soon after a 6 month sabbatical but we still thought it was best to move from apartment living to a real house, especially after living in a 400 sq ft space in France. We found a great place to rent in Minneapolis that&rsquo;s pretty close to both workplaces, friends, and family. We&rsquo;ve done a few things to it to make it more like home and we&rsquo;ve been really enjoying it so far and our landlord is superb. The photo above is our enhancement to the bay window. My brother-in-law built the spanning bench between the bookcases and I built the cushion. I removed the tall blinds that covered the window so we could open up the room and add extra seating. It turned out so good!</p>




<h2>New Dog</h2>




<p><img src="https://cloud.githubusercontent.com/assets/563819/12107029/1b61acac-b32b-11e5-9bee-3325f44374db.png" alt="Dogger" /></p>




<p>My wife has always wanted a dog ever since we moved into an apartment together&mdash;except our apartment complex never let us have dogs. We cat-sat (is that a word?) for 2 years for some friends and then they took her back down to Texas where they bought a house and she happily frolicks outside. In August (Dogust?) we went to the humane society and on pretty-much-a-whim took in a cute dog we named Rennes (after <a href="https://medium.com/aix-squared/rennes-france-d4957bf17d4e">one of our favorite French cities</a> we visited). She&rsquo;s a black lab and border collie mix. She&rsquo;s awesome even though she jumps the fence to chase squirrels (we&rsquo;re working on that). We love her a ton.</p>




<h2>Keep Track of My Games</h2>




<p><img src="http://41.media.tumblr.com/fe33ac3443fbfeab5b2e4da2c6fe170e/tumblr_inline_nyz1izCCVg1qlpzxk_500.png" alt="KTOMG" /></p>




<p>2015 marked the <a href="http://blog.keeptrackofmygames.com/post/124929587854/happy-4th-birthday-to-keep-track-of-my-games">4th year</a> that <a href="http://keeptrackofmygames.com">KTOMG</a> has been around since its humble beginnings and while I was abroad it gave me time to focus and finish a <a href="http://kamranicus.com/blog/2015/05/30/ktomg-update/">major rewrite of the codebase in May</a>. Since then I&rsquo;ve released <a href="http://blog.keeptrackofmygames.com/post/134750555276/updates-for-november-2015">public lists</a> and capping the year off with <a href="http://blog.keeptrackofmygames.com/post/135781123861/updates-for-december-2015">Steam syncing</a>, just to name a few features.</p>




<h2>Speaking</h2>




<iframe width="420" height="315" src="https://www.youtube.com/embed/kb7tvaBJeMs" frameborder="0" allowfullscreen></iframe>




<p>Even though I was abroad for 6 months, I still managed to give a talk this year at Twin Cities Code Camp 19: an update to my popular <a href="http://kamranicus.com/presentations/demystifying-typescript">Demystifying TypeScript</a> presentation. You can also find 2014&rsquo;s version <a href="https://www.youtube.com/watch?v=kb7tvaBJeMs">on YouTube</a>.</p>




<h2>Making Games</h2>




<p><img src="https://cloud.githubusercontent.com/assets/563819/12107063/7b1593c0-b32b-11e5-9148-0470e84acfb4.png" alt="Minotaur" /></p>




<p>In August, I participated in the <a href="http://ludumdare.com/compo/ludum-dare-33/">Ludum Dare 33</a> game jam where some friends and I created a minotaur hack-n-slash game, <a href="http://excaliburjs.com/ludum-33/">Crypt of the Minotaur</a> (<a href="https://github.com/excaliburjs/ludum-33">source</a>). I love participating in game jams and by extension, helping to contribute to the <a href="http://excaliburjs.com">Excalibur.js</a> game engine.</p>




<h2>Playing Games</h2>




<p>Somehow after all that I still managed to log hundreds of hours into my gaming habit. Since I added public lists to KTOMG, why don&rsquo;t you go take a look at my <a href="http://keeptrackofmygames.com/users/kamranicus/lists/11">Top 10 Played Games of 2015</a>? Yes, some of those came out in 2014 but I didn&rsquo;t play or finish them until this year. Being abroad, I managed to bring my laptop, 3DS, and PS4 so I played a lot of <a href="http://keeptrackofmygames.com/games/1931">Destiny</a>, finished the remastered <a href="http://keeptrackofmygames.com/games/394">Grim Fandango</a> and other PS4/3DS games. My laptop wasn&rsquo;t that great but I was able to still enjoy <a href="http://keeptrackofmygames.com/games/1267">Pillars of Eternity</a>, a throwback Baldur&rsquo;s Gate-style RPG. In November, I started playing <a href="http://keeptrackofmygames.com/games/145171">Fallout 4</a> and have since logged over 75 hours in it. It&rsquo;s definitely tough to juggle both hobbies: playing games and developing a site that helps manage those games. During time off, I usually try to mix my time between them to satisfy both needs and sticking to a monthly release cadence helps a lot to prioritize work.</p>




<h2>Work &amp; Friends</h2>




<p>My work has been going swimmingly, after my sabbatical I returned to work on a team with one of my best friends. Speaking of friends, I made more this year, fulfilling a goal I made at the start of 2015&mdash;not only abroad but also at home. Board game nights, Dungeon World sessions, and a Star Wars marathon are just some of the highlights of the fun stuff we&rsquo;ve done with our [awesome] circle of friends.</p>




<h2>Looking towards a new year</h2>




<p>Cheers to 2016, let&rsquo;s hope it&rsquo;s even bigger and better than 2015 and brings more happiness and joy to my life.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2016-01-05T01:30:00+00:00" pubdate data-updated="true">Jan 5<span>th</span>, 2016</time>
    

in
<span class="categories">
  
    <a class='category' href='/blog/categories/accomplishments/'>Accomplishments</a>, <a class='category' href='/blog/categories/life/'>Life</a>, <a class='category' href='/blog/categories/year-in-review/'>Year in Review</a>
  
</span>


  </span>

  
</article>

            </div>
          </div>
        
          
          <div class="row">
            <div class="col-md-offset-2 col-md-8">
              <article>
  <h2><a href="/blog/2015/12/11/kudu-deployment-flags-in-commit-messages/">Influencing Your Kudu Deployment Through Git Commit Messages</a></h2>
  
  <p>
    <p>If you&rsquo;re on Windows Azure and using continuous deployment through Git, you may not know you are using an open source platform called
<a href="https://github.com/projectkudu/kudu">Kudu</a> behind-the-scenes that performs your deployment. If this is the first time you&rsquo;ve heard of Kudu and you&rsquo;ve been
using Azure for awhile, it&rsquo;s time to <a href="https://github.com/projectkudu/kudu">get acquainted</a>. Kudu is amazing. It has a whole REST API that lets you manage
deployments, trigger builds, trigger webjobs, view processes, a command prompt, and a ton more.</p>




<p>You can get to your Kudu console by visiting</p>




<pre><code>https://&lt;yoursite&gt;.scm.azurewebsites.net
</code></pre>




<p>The <strong>.scm.</strong> part is the key, as that is where the Kudu site is hosted.</p>




<h2>Customizing Kudu deployments</h2>




<p>One of the other things it offers is a <a href="https://github.com/projectkudu/kudu/wiki/Custom-Deployment-Script">customized deployment script</a>. I&rsquo;ve customized mine because I have a test
project where I run automated tests during the build. This is useful since it&rsquo;ll fail the build if I make any changes
that break my tests and forces me to keep things up-to-date resulting in a higher quality codebase.</p>




<p>If you want to generate your own script, it&rsquo;s pretty easy. Just follow the steps <a href="https://github.com/projectkudu/kudu/wiki/Custom-Deployment-Script">outlined here</a>. For example, after
customizing my script here&rsquo;s what my section looks like to run my tests:</p>


<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>:: 3. Build unit tests
</span><span class='line'>call :ExecuteCmd &ldquo;%MSBUILD_PATH%&rdquo; &ldquo;%DEPLOYMENT_SOURCE%\src\Tests\Tests.csproj&rdquo; /nologo /verbosity:m /t:Build /p:AutoParameterizationWebConfigConnectionStrings=false;Configuration=Release /p:SolutionDir=&ldquo;%DEPLOYMENT_SOURCE%.\&rdquo; %SCM_BUILD_ARGS%
</span><span class='line'>
</span><span class='line'>IF !ERRORLEVEL! NEQ 0 goto error</span></code></pre></td></tr></table></div></figure></p>

<p>All I really did was copy step 2 in the script that builds my web project and just change the path to my tests project.</p>




<p>Finally, I run the tests using the packaged Nunit test runner (checked into source control):</p>


<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>call :ExecuteCmd &ldquo;%DEPLOYMENT_SOURCE%\tools\nunit\nunit-console.exe&rdquo; &ldquo;%DEPLOYMENT_SOURCE%\src\Tests\bin\Release\Tests.dll&rdquo; /framework:v4.5.1
</span><span class='line'>IF !ERRORLEVEL! NEQ 0 goto error</span></code></pre></td></tr></table></div></figure></p>

<p>Simple!</p>




<h2>Now the fun part</h2>




<p>One thing you&rsquo;ll notice if you start running tests on your builds is that this starts to slow down your continuous deployment workflow.
For 90% of the time this is acceptable, after all, you can wait a few minutes to see your changes show up on the site. But sometimes,
especially for production hotfixes or trial-and-error config changes, that 3-5 minutes becomes unbearable.</p>




<p>In cases like this, I&rsquo;ve set up a little addition to my script that will read the git commit message and take action depending on what phrases it sees.</p>




<p>For example, let&rsquo;s say I commit a change that is just a config change and I know I don&rsquo;t need to run any tests or I really want the quick build.
This is what my commit message looks like:</p>




<pre><code>[notest] just changing App.config
</code></pre>




<p>That phrase <code>[notest]</code> is something my script looks for at build time and if it&rsquo;s present it will skip running tests!
You can use this same logic to do pretty much anything you want. Here&rsquo;s what it looks like after step 3 in my script:</p>


<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>:: Above at top of file
</span><span class='line'>
</span><span class='line'>IF NOT DEFINED RUN_TESTS (
</span><span class='line'>   SET RUN_TESTS=1
</span><span class='line'>)
</span><span class='line'>
</span><span class='line'>:: 4. Run unit tests
</span><span class='line'>echo Latest commit ID is &ldquo;%SCM_COMMIT_ID%&rdquo;
</span><span class='line'>
</span><span class='line'>call git show -s &ldquo;%SCM_COMMIT_ID%&rdquo; &mdash;pretty=%%%%s &gt; commitmessage.txt
</span><span class='line'>SET /p COMMIT_MESSAGE=&lt;commitmessage.txt
</span><span class='line'>
</span><span class='line'>echo Latest commit message is &ldquo;%COMMIT_MESSAGE%&rdquo;
</span><span class='line'>
</span><span class='line'>IF NOT &ldquo;x%COMMIT_MESSAGE:[notest]=%&rdquo;==&ldquo;x%COMMIT_MESSAGE%&rdquo; (
</span><span class='line'>   SET RUN_TESTS=0
</span><span class='line'>)
</span><span class='line'>
</span><span class='line'>IF /I &ldquo;%RUN_TESTS%&rdquo; NEQ &ldquo;0&rdquo; (
</span><span class='line'>  echo Running unit tests
</span><span class='line'>  call :ExecuteCmd &ldquo;%DEPLOYMENT_SOURCE%\tools\nunit\nunit-console.exe&rdquo; &ldquo;%DEPLOYMENT_SOURCE%\src\Tests\bin\Release\Tests.dll&rdquo; /framework:v4.5.1
</span><span class='line'>  IF !ERRORLEVEL! NEQ 0 goto error
</span><span class='line'>) ELSE (
</span><span class='line'>  echo Not running unit tests because [notest] was present in commit message
</span><span class='line'>)</span></code></pre></td></tr></table></div></figure></p>

<p>Alright, there&rsquo;s definitely some batch file black magic incantations going on here! So let&rsquo;s break it down.</p>




<pre><code>echo Latest commit ID is "%SCM_COMMIT_ID%"
</code></pre>




<p>Kudu defines several useful <a href="https://github.com/projectkudu/kudu/wiki/Deployment-Environment">environment variables</a> that you have access to, including the current commit ID.
I&rsquo;m just echoing it out so I can debug when viewing the log output.</p>




<pre><code>call git show -s "%SCM_COMMIT_ID%" --pretty=%%%%s &gt; commitmessage.txt
SET /p COMMIT_MESSAGE=&lt;commitmessage.txt
</code></pre>




<p>Alright. This took me some real trial and error. Git lets you <a href="https://git-scm.com/docs/git-show"><code>show</code> any commit message</a> and can format it using a printf format string (<code>--pretty=%s</code>).
However, due to the weird escaping rules of batch files and variables, this requires not one but <strong>four</strong> <code>%</code> signs. Go figure.</p>




<p>Next I pipe it to a file, this is only so I can read the file back and store the message in a batch variable (<code>COMMIT_MESSAGE</code>), on the next line.
<strong>Kudu team:</strong> It would be sweet to add a <code>SCM_COMMIT_MESSAGE</code> environment variable!</p>




<pre><code>IF NOT "x%COMMIT_MESSAGE:[notest]=%"=="x%COMMIT_MESSAGE%" (
   SET RUN_TESTS=0
)
</code></pre>




<p>Okay, what&rsquo;s going on here? I&rsquo;ll <a href="http://stackoverflow.com/questions/7005951/batch-file-find-if-substring-is-in-string-not-in-a-file">let StackOverflow explain</a>. The <code>:[notest]=</code> portion REPLACES the term &ldquo;[notest]&rdquo; in
the preceding variable (<code>COMMIT_MESSAGE</code>) with an empty string. The <code>x</code> prefix character guards against batch file weirdness.
So if <code>[notest]</code> is NOT present, this will return true (the strings match). If it is present, the condition will be false and so we do <code>IF NOT</code>
since we want to execute when that is the case.</p>




<p>If <code>[notest]</code> is present in the message, we set another variable, <code>RUN_TESTS</code> to 0.</p>




<pre><code>IF /I "%RUN_TESTS%" NEQ "0" (
    echo Running unit tests
    call :ExecuteCmd "%DEPLOYMENT_SOURCE%\tools\nunit\nunit-console.exe" "%DEPLOYMENT_SOURCE%\src\Tests\bin\Release\Tests.dll" /framework:v4.5.1
    IF !ERRORLEVEL! NEQ 0 goto error
) ELSE (
    echo Not running unit tests because [notest] was present in commit message
)
</code></pre>




<p>If <code>RUN_TESTS</code> does not evaluate to 0, then we run the tests! Otherwise we echo out an informative message as to why it was skipped.</p>




<p>Phew. So how much time do we save on <code>[notest]</code> builds now?</p>




<p><img src="https://cloud.githubusercontent.com/assets/563819/11734864/9a5e5e10-9f80-11e5-92ff-b93a1d9c994a.png" alt="No test build" /></p>




<p>Compared to a build with tests:</p>




<p><img src="https://cloud.githubusercontent.com/assets/563819/11734880/b874bed0-9f80-11e5-9af2-8e0425a02563.png" alt="Build with tests" /></p>




<p>So that flag cuts the build in half! Nice! There are probably some other ways to improve the time. By the way, if you&rsquo;re wondering what&rsquo;s taking so long
in your build, you can use the Kudu <a href="https://github.com/projectkudu/kudu/wiki/REST-API">REST endpoint</a> to see your deployment logs (<strong>/api/deployments</strong> endoint) which contain full timestamp information!</p>




<p>Happy continuous deployment!</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2015-12-11T01:30:00+00:00" pubdate data-updated="true">Dec 11<span>th</span>, 2015</time>
    

in
<span class="categories">
  
    <a class='category' href='/blog/categories/continuous-deployment/'>Continuous Deployment</a>, <a class='category' href='/blog/categories/continuous-integration/'>Continuous Integration</a>, <a class='category' href='/blog/categories/git/'>Git</a>, <a class='category' href='/blog/categories/kudu/'>Kudu</a>, <a class='category' href='/blog/categories/testing/'>Testing</a>, <a class='category' href='/blog/categories/windows-azure/'>Windows Azure</a>
  
</span>


  </span>

  
</article>

            </div>
          </div>
        
      </div>
    </div>

    <hr class="divider-short"/>

    <div class="archive-link">
      <h3><a href="/blog/archives/">All Posts</a></h3>
    </div>
  </div>
</div>

    <footer id="footer" class="her-row">
  <div class="container">
    <div class="row">
      <div class="col-md-1">
  <a href="/"><h4>Home</h4></a>
</div>

<div class="col-md-2">
  <div class="social-icon-list">
    
    <a href="https://twitter.com/kamranayub"><img src="/images/glyphicons_social_31_twitter.png"/></a>
    

    
    <a href="https://github.com/kamranayub"><img src="/images/glyphicons_social_21_github.png"/></a>
    

    

    
  </div>
</div>

<div class="pull-right">
  <h4>Powered by <a href="http://octopress.org/">Octopress</a>. Designed by <a href="http://AdrianArtiles.com">Adrian Artiles</a>.</h4>
</div>


    </div>
  </div>
</footer>

    
  </body>
</html>


<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Kamranicus</title>
  <meta name="author" content="Kamran">

  
  <meta name="description" content="Kamranicus
Personal and development blog of Kamran Ayub about me Hi, my name is Kamran. I am a web developer and designer, residing in Minnesota. I &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://kamranicus.com/blog/page/10">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="http://feeds.feedburner.com/Kamranicus" rel="alternate" title="Kamranicus" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-1203259-13']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

  <body>
    <a href="/" class="home-icon">
      <img src="/images/home.png"/>
    </a>

    <div class="home-page">
  <div class="hero">
    <h1>Kamranicus</h1>
<p>Personal and development blog of Kamran Ayub</p>

  </div>

  <div class="home-field">
    <div class="home-landing her-row">
      <div class="container">
        <div class="row">
          <div id="about-me" class="col-md-offset-3 col-md-6">
  <h4>about me</h4>
  <p>Hi, my name is Kamran. I am a web developer and designer,  residing in Minnesota. I&#8217;ve been programming since 2001 and  I am familiar with many different languages, both web-based  and server-based. I love to tinker around and think of new  ways to solve problems.
</p>
  <div class="social-icon-list">
  	
    <a title="Twitter" href="https://twitter.com/kamranayub"><img src="/images/glyphicons_social_31_twitter.png"/></a>
    
    
    <a title="GitHub" href="https://github.com/kamranayub"><img src="/images/glyphicons_social_21_github.png"/></a>
    
    
    
  </div>
</div>

        </div>
      </div>
    </div>

    <div class="article-list">
      <div class="container">
        
          
          <div class="row">
            <div class="col-md-offset-2 col-md-8">
              <article>
  <h2><a href="/blog/posts/12/pass-in-your-variables-to-consolelog-as-parameters">Pass in Your Variables to console.log as Parameters to Make Them Navigable</a></h2>
  
  <p>
    <p>I was helping a co-worker debug a JSON issue when I saw he was trying to use <code>console.log</code>. I asked how he was passing it in and he was doing exactly what you&rsquo;d think should work:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="c1">// result = some JSON object</span>
</span><span class='line'><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Returned data: &quot;</span> <span class="o">+</span> <span class="nx">result</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>He was seeing:</p>




<pre><code>Returned data: [Object object]
</code></pre>




<p>He was wondering how he could stringify the result. You could do that, I said, but I have a useful tip!</p>




<p>Try doing this instead:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Returned data: &quot;</span><span class="p">,</span> <span class="nx">result</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>And voila, the console will not try to <code>.toString()</code> your object and it will be navigable:</p>




<p><img src="/blog/images/9.png" alt="Firebug Console Example" /></p>




<p>Clicking the object link will let you view its properties.</p>




<p>I always thought this was a useful and not very well known feature of <code>console.log</code> so hopefully that might assist you in debugging!</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2011-06-27T19:24:54+00:00" pubdate data-updated="true">Jun 27<span>th</span>, 2011</time>
    


  </span>

  
</article>

            </div>
          </div>
        
          
          <div class="row">
            <div class="col-md-offset-2 col-md-8">
              <article>
  <h2><a href="/blog/posts/11/using-squishit-without-writing-to-the-file-system">Using SquishIt Without Writing to the File System</a></h2>
  
  <p>
    <p>I&rsquo;m a big fan of <a href="https://github.com/jetheredge/SquishIt/">SquishIt</a>, which is a library that compresses and minifies CSS and JS. It automatically keeps thing uncompressed locally and then on your web server, versions and compresses your files. The versioning is based on a checksum of your files so it automatically handles any changes you make, it&rsquo;s gold.</p>




<p>The thing that I don&rsquo;t like is that by default, it writes to your file system which is usually a no-no on shared hosts or even enterprise applications.</p>




<p>I asked if you could use SquishIt programmatically and you can! I <a href="https://github.com/jetheredge/SquishIt/wiki/Using-SquishIt-programmatically-without-the-file-system">wrote up a wiki article</a> on their project page to show how it&rsquo;s done.</p>




<p>If you haven&rsquo;t used SquishIt, I&rsquo;d highly recommend it!</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2011-06-22T19:16:11+00:00" pubdate data-updated="true">Jun 22<span>nd</span>, 2011</time>
    


  </span>

  
</article>

            </div>
          </div>
        
          
          <div class="row">
            <div class="col-md-offset-2 col-md-8">
              <article>
  <h2><a href="/blog/posts/10/released-nuget-package-of-json">Released NuGet Package of .JSON</a></h2>
  
  <p>
    <p>Yesterday I released my <a href="http://github.com/kamranayub/.JSON">.JSON</a> library as a NuGet package (about time). It is named <strong>DotJson.Source</strong> to follow current conventions. If you need me to, I can also release it as a compiled DLL.</p>




<p>You can get it via Visual Studio or the <a href="http://nuget.org/List/Packages/DotJson.Source">Nuget.org</a> page.</p>




<h2>To Use It</h2>




<p>Add it as a library reference via Nuget. In your code file, you can add a <code>using DotJson;</code> and then start using the library. That&rsquo;s all you have to do.</p>




<p>See the <a href="http://github.com/kamranayub/.JSON/wiki">documentation wiki</a> for more information.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2011-06-17T00:49:32+00:00" pubdate data-updated="true">Jun 17<span>th</span>, 2011</time>
    


  </span>

  
</article>

            </div>
          </div>
        
          
          <div class="row">
            <div class="col-md-offset-2 col-md-8">
              <article>
  <h2><a href="/blog/posts/9/fixing-the-post-value-of-the-button-element-in-ie">Fixing the POST Value of the Button Element in IE 7 and Below</a></h2>
  
  <p>
    <p>Please <a href="http://www.peterbe.com/plog/button-tag-in-IE">see this write up</a> for the exact issue. Basically, IE 7 and below do not properly submit the &ldquo;value&rdquo; of the <code>&lt;button&gt;</code> tag, opting instead to submit the <code>innerText</code>. We just hit this issue while testing with our users who used IE7 on a project I&rsquo;m on.</p>




<p>Here is the fix I&rsquo;m using which I prefer to all the other alternatives I saw in the comments of that post. It meets two of my objectives:</p>




<ul>
<li>It&rsquo;s totally transparent</li>
<li>It&rsquo;s only for IE 7 and 6</li>
</ul>




<script src="https://gist.github.com/981360.js?file=iebuttonfix.js"></script>




  </p>
  <span class="meta">
    written 








  



<time datetime="2011-05-19T23:07:48+00:00" pubdate data-updated="true">May 19<span>th</span>, 2011</time>
    


  </span>

  
</article>

            </div>
          </div>
        
          
          <div class="row">
            <div class="col-md-offset-2 col-md-8">
              <article>
  <h2><a href="/blog/posts/8/entity-framework-polymorphism-and-automapper-cant">Entity Framework, Polymorphism, and AutoMapper: Can&#8217;t We All Be Friends?</a></h2>
  
  <p>
    <p>At work we were running into an interesting issue. We are using EF Code First, AutoMapper, and the dynamic proxies generated by EF. We map our domain entities onto our view models.</p>




<h2>The Problem</h2>




<p>AutoMapper fails to map a derived type to a view model base class for use in a general-use scenario:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="k">public</span> <span class="n">IEnumerable</span><span class="p">&lt;</span><span class="n">AbstractViewModel</span><span class="p">&gt;</span> <span class="n">GetPolymorphicClasses</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="kt">var</span> <span class="n">list</span> <span class="p">=</span> <span class="n">db</span><span class="p">.</span><span class="n">AbstractClasses</span><span class="p">.</span><span class="n">ToList</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// list is a list of dynamically proxied derived types</span>
</span><span class='line'>    <span class="c1">// DerivedTypeA, DerivedTypeB, and so on</span>
</span><span class='line'>    <span class="c1">// aka DynamicProxy_xxxxxxx</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">Mapper</span><span class="p">.</span><span class="n">Map</span><span class="p">&lt;</span><span class="n">IEnumerable</span><span class="p">&lt;</span><span class="n">AbstractClass</span><span class="p">&gt;,</span> <span class="n">IEnumerable</span><span class="p">&lt;</span><span class="n">AbstractViewModel</span><span class="p">&gt;&gt;(</span><span class="n">list</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></p>

<h2>The &ldquo;Solution&rdquo;</h2>




<p>This is not a solution, but it&rsquo;s the best I could do with <em>limited</em> knowledge of AutoMapper and a need to just get it working quickly. Thanks to <a href="http://stackoverflow.com/q/3441916/109458">this post on the same problem</a>, I was able to retrofit the answerer&rsquo;s answer to a solution that worked for me (his generated a stack overflow because it seemed to get stuck converting in an infinite loop).</p>




<p>If <a href="http://stackoverflow.com/users/58508/jimmy-bogard">Jimmy Bogard</a> reads this, please tell me what I&rsquo;m doing wrong and how to <em>actually</em> fix it:</p>




<script src="https://gist.github.com/935461.js?file=gistfile1.cs"></script>




  </p>
  <span class="meta">
    written 








  



<time datetime="2011-04-22T09:41:05+00:00" pubdate data-updated="true">Apr 22<span>nd</span>, 2011</time>
    


  </span>

  
</article>

            </div>
          </div>
        
          
          <div class="row">
            <div class="col-md-offset-2 col-md-8">
              <article>
  <h2><a href="/blog/posts/7/mix-11-day-2-kinects-celebrities-kings-and-clubbin">MIX 11, Day 2 - Kinects, Celebrities, Kings, and Clubbing</a></h2>
  
  <p>
    <p>Have you ever had a day where everything that happens just comes together to create the greatest day ever? Well, let me tell you about mine.</p>




<h2>Kinects for Everyone</h2>




<p><img src="/blog/images/6.png" alt="MIX Keynote" /></p>




<p>I posted about my thoughts on the keynote on <a href="/Blog/Posts/6/mix-11-day-15">Day 1</a>. It was mediocre. It seems that Microsoft saved the best for last because the day 2 keynote was, in a word, amazing.</p>




<p>First, MS covered everything about the new Mango update for Windows Phone 7. I don&rsquo;t even own a WP7 and I wanted to toss my Droid into the trash by the end. Now that there are really awesome and useful APIs being introduced, I may start developing some WP7 applications.</p>




<p>Second, MS covered Silverlight 5 which actually does introduce some useful features like GPU acceleration, XNA integration, and 3D support. That is pretty cool. I haven&rsquo;t checked but I also hope they offer better clipboard integration.</p>




<p>Third, and of course, the best part of the keynote, was the announcement of Kinect for Windows SDK. We saw demos for helping navigation for blind folks, a robotic lounge chair, a game, and a galaxy simulator. As if that weren&rsquo;t good enough, <strong>every attendee got a Kinect</strong>.</p>




<p>The free Kinect was definitely a surprise and an awesome perk of going to MIX. Unfortunately, I already own one and company policy dictates I can&rsquo;t accept gifts over $100&hellip; so I had to forgo that.</p>




<h2>My inner fanboy is satiated</h2>




<p><a href="http://yfrog.com/h3sl2zrhj"><img src="http://desmond.yfrog.com/Himg615/scaled.php?tn=0&amp;server=615&amp;filename=sl2zrh.jpg&amp;xsize=640&amp;ysize=640" alt="Me, Hanselman, and Haack" /></a></p>




<p><a href="http://twitter.com/shanselman">Scott Hanselman</a> and <a href="http://haacked.com">Phil Haack</a>. I was also within 10 feet of <a href="http://wekeroad.com">Rob Conery</a> so that counts, too. &lsquo;nuff said.</p>




<p>Watching presentations by Hanselman is like watching a comedy show, I can only aspire to make people laugh like that during my presentations.</p>




<h2>Circle of Life</h2>




<p><img src="/blog/images/8.png" alt="Lion King" /></p>




<p>Me and Cassie went to <a href="http://www.mandalaybay.com/entertainment/disneys-the-lion-king.aspx">The Lion King at Mandalay Bay</a> later that night. It was fantastic, everything about it was amazing. The costumes were incredibly clever and creative, the actors were awesome, the stage sets were great, and the music was top notch. We sat in the 5th row or so and it was perfect.</p>




<h2>VIP Life in Vegas</h2>




<p><img src="/blog/images/7.png" alt="The Marquee" /></p>




<p>All MIX attendees were invited to <a href="http://www.marqueelasvegas.com/">The Marquee nightclub</a>, which is a new club in Vegas. I got a guest pass for Cassie and we went and it was a lot more fun than I had expected. Usually, I am not one for dancing or clubbing, but I figured this was a unique experience I shouldn&rsquo;t pass up. I am glad I didn&rsquo;t! It was a ton of fun and the nerd level was off the charts. Half the people just sat or stood in place, silently sipping their drinks while everyone else was having fun. We sat and drank a bit but decided we needed to have some fun, so for the rest of the time we danced and partied in the &ldquo;mosh pit.&rdquo; When you&rsquo;re dancing with a bunch of geeks and nerds, you really don&rsquo;t need to worry about how you dance.</p>




<h2>So, in summary&hellip;</h2>




<p>Best. Day. Ever.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2011-04-15T02:45:12+00:00" pubdate data-updated="true">Apr 15<span>th</span>, 2011</time>
    


  </span>

  
</article>

            </div>
          </div>
        
          
          <div class="row">
            <div class="col-md-offset-2 col-md-8">
              <article>
  <h2><a href="/blog/posts/6/mix-11-day-15">MIX 11, Day 1.5</a></h2>
  
  <p>
    <p>This is the first time I&rsquo;ve ever been to Vegas. I think that one guy on Twitter had it right, &ldquo;everything in Vegas is fake.&rdquo; That said, it&rsquo;s still pretty neat. We walked to the Bellagio last night and saw Celine Dion&rsquo;s water display. My heart <em>did</em> go on.</p>




<h2>Open Source Fest</h2>




<p>The open source fest went swimmingly. I had been afraid I wouldn&rsquo;t meet anyone or no one would like <a href="http://github.com/kamranayub/.JSON">my library</a> but that wasn&rsquo;t the case.</p>




<p>I met John Sheehan from <a href="http://restsharp.org/">RestSharp</a>, Sam Saffron and other developers from Stackoverflow, Jonathan Marbutt from the <a href="http://opus.codeplex.com/">Opus Silverlight framework</a>, and Jeff Weber from the <a href="http://farseerphysics.codeplex.com/">Farseer Physics Engine</a>. I also met lots of lovely people who were kind enough to throw some chips my way.</p>




<p>From the SO team I also acquired a black StackOverflow tee, which I am geeked out about.</p>




<p>I got a lot of awesome feedback on my little library, including plenty of questions about whether it works in Silverlight. Looks like I may have some investigating to do.</p>




<h2>Thoughts on the Keynote</h2>




<p><img src="http://desmond.yfrog.com/Himg620/scaled.php?tn=0&amp;server=620&amp;filename=zjpwp.jpg&amp;xsize=640&amp;ysize=640" alt="Keynote stage" /></p>




<p>I <a href="http://yfrog.com/h8zjpwpj">posted a picture</a> of what the MIX stage looked like at the keynote. It looked like a stage for a rock concert, it was pretty awesome.</p>




<p>The content of the keynote seemed to generate mixed feelings. Several times the speaker had expected an eruption of applause but the audience wasn&rsquo;t forthcoming. Maybe they had all lost their money the night before?</p>




<p>The first half was all about IE and how it&rsquo;s so great and excellent and other browsers (<strong>Chrome</strong>) can&rsquo;t keep up. Personally, I like all the new improvements IE provided and hope to see other browsers play catch-up in terms of hardware acceleration. But the fact that only IE can perform hardware accelerated tasks sort of diminishes the value of the feature, since users not using IE9 (a <em>significant</em> portion of people) lose out. It&rsquo;s a value judgement you have to make (and in an ideal world, <em>shouldn&rsquo;t</em> have to make&hellip;). I don&rsquo;t know if that&rsquo;s any different than the decisions we&rsquo;ve had to make previously as designers about how to tackle issues that other browsers sans IE support, though.</p>




<p>Notably missing was talk about Silverlight. Microsoft seems to be undecided in what to sell&hellip; on one hand they are focusing hard on HTML5 and rich web experiences but on the other they are selling Windows Phone 7 which builds on Silverlight. The rest of the non-MS world has shown it is entirely behind HTML5, so at least on the web, I feel like Silverlight is a losing battle&hellip; not that SL is bad by any means, just that more tooling may come out surrounding HTML5 than SL.</p>




<p>I thought the keynote was &ldquo;interesting&rdquo; and that&rsquo;s probably where I&rsquo;ll stick. I didn&rsquo;t expect half the time to be spent on IE but then I really didn&rsquo;t know what I should be expecting.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2011-04-13T02:57:55+00:00" pubdate data-updated="true">Apr 13<span>th</span>, 2011</time>
    


  </span>

  
</article>

            </div>
          </div>
        
          
          <div class="row">
            <div class="col-md-offset-2 col-md-8">
              <article>
  <h2><a href="/blog/posts/5/all-the-code-you-write-is-wrong">&#8220;All the Code You Write Is Wrong.&#8221;</a></h2>
  
  <p>
    <p>Every time I read about a &ldquo;best practice&rdquo; or the opinions of highly regarded (to many) developers, I always am amazed at the different opinions in response. This isn&rsquo;t bad. In fact, I think it&rsquo;s pretty cool we all share differing opinions and what works for one person may not work for someone else. I find it refreshing to see all sorts of opinions that propose different ways of doing the same thing.</p>




<p>Thus, my mantra from now on is:</p>




<blockquote><p>&ldquo;All the code you write is wrong.&rdquo;</p></blockquote>




<p>That works for me considering I never met a developer who always thought what they wrote was perfect.</p>




<p>I strive to write &ldquo;good&rdquo; code but I&rsquo;m always ready to hear it is terrible and could be done a better way. That&rsquo;s why there are smarter people than me alive.</p>




<iframe title="YouTube video player" width="640" height="390" src="http://www.youtube.com/embed/05av9iJvgiQ" frameborder="0" allowfullscreen></iframe>




  </p>
  <span class="meta">
    written 








  



<time datetime="2011-04-08T20:47:57+00:00" pubdate data-updated="true">Apr 8<span>th</span>, 2011</time>
    


  </span>

  
</article>

            </div>
          </div>
        
          
          <div class="row">
            <div class="col-md-offset-2 col-md-8">
              <article>
  <h2><a href="/blog/posts/4/come-visit-me-at-mix-11">Come Visit Me at MIX 11</a></h2>
  
  <p>
    <p>I am extremely excited (and thankful) to be visiting <a href="http://live.visitmix.com/">MIX 11</a> next week. Hopefully I can garner some &ldquo;cred&rdquo; with the .NET community and I hope I can meet some of my .NET community idols as well.</p>




<h2>Come see me at Open Source Fest</h2>




<p>I&rsquo;ll be standing at a cocktail table at the <a href="http://live.visitmix.com/OpenSourceFest">Open Source Fest</a> (I am #37) presenting my tiny little &ldquo;library&rdquo; (what do you call one file?), <a href="http://github.com/kamranayub/.JSON">.JSON</a>.</p>




<h2>About .JSON</h2>




<p>I know that there exists several open source libraries for dealing with JSON, including <a href="http://james.newtonking.com/projects/json-net.aspx">Json.NET</a> and <a href="https://github.com/jsonfx/jsonfx">JsonFx</a>.</p>




<p>However, I wanted something a bit different. First, I didn&rsquo;t want a library&hellip; all I needed to do was consume JSON-based web services. Second, all I wanted to do was interact with the results as a dynamically typed object.</p>




<p>The output of that endeavor was .JSON, a single-file library containing about <a href="https://github.com/kamranayub/.JSON/blob/master/DotJson.cs">~500 SLOC</a>.</p>




<p>It supports:</p>




<ul>
<li>POST to JSON services</li>
<li>GET from JSON services</li>
<li>Converting strings to dynamic JSON objects</li>
<li>Convert JSON objects to strings</li>
<li>Convert dictionaries to JSON objects</li>
<li>Supports LINQ to Objects if using <code>dynamic[]</code></li>
<li>Includes my <a href="/Home/PrettyJson"><code>PrettyJson</code></a> formatter</li>
</ul>




<p>I only realized recently that JsonFx also supports dynamic typing, but as far as I know no other library offers a utility to access JSON services. I sent a message to JsonFx&rsquo;s owner about integrating my <code>JsonService</code> into JsonFx, as that seems like a good fit.</p>




<p>Part of my motivation to create the library was to learn about dynamics. Part of it was to prove you <em>could</em> do it in a single, reasonably small class. I thought it was pretty neat! I <a href="http://www.hanselman.com/blog/NuGetPackageOfTheWeek4DeserializingJSONWithJsonNET.aspx">was not disappointed to hear</a> that JsonFx did the same thing, since I learned a lot in the process and I still think I added some value for people that didn&rsquo;t need a whole library to work with JSON.</p>




<p>At any rate, I am talking about it at the OSF. Maybe some kind souls will part with a poker chip or two for my &ldquo;tip jar&rdquo;. For me, it&rsquo;s just to meet <a href="http://twitter.com/eisenbergeffect">all</a> <a href="http://twttier.com/bradmi">the</a> <a href="http://twitter.com/gblock">other</a> <a href="http://twitter.com/samsaffron">awesome</a> <a href="http://twitter.com/johnsheehan">developers</a>.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2011-04-07T20:14:55+00:00" pubdate data-updated="true">Apr 7<span>th</span>, 2011</time>
    


  </span>

  
</article>

            </div>
          </div>
        
          
          <div class="row">
            <div class="col-md-offset-2 col-md-8">
              <article>
  <h2><a href="/blog/posts/3/a-better-mvc-label-helper">A Better MVC Label Helper</a></h2>
  
  <p>
    <p>I have high standards for web-based forms, after having spent the last 7 months ankle deep in them at work.</p>




<p>I have decided on a standard way for defining my forms:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;form&gt;</span>
</span><span class='line'>    <span class="nt">&lt;fieldset&gt;</span>
</span><span class='line'>        <span class="nt">&lt;legend&gt;</span>A form area<span class="nt">&lt;/legend&gt;</span>
</span><span class='line'>
</span><span class='line'>        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;field text&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>            <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;firstName&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>                First Name
</span><span class='line'>                <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;note&quot;</span><span class="nt">&gt;</span>Enter your first name<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>            <span class="nt">&lt;/label&gt;</span>
</span><span class='line'>
</span><span class='line'>            <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;firstName&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/fieldset&gt;</span>
</span><span class='line'><span class="nt">&lt;/form&gt;</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>In a future post, I will more formally present a form solution and my stylesheet that goes with it. For now, let&rsquo;s talk about generating that <code>&lt;label&gt;</code> above from metadata alone.</p>




<h3>First, the end result</h3>




<p>Here is what my Razor view looks like for that form field above:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;field text&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    @Html.FieldLabelFor(m =&gt; m.FirstName)
</span><span class='line'>    @Html.EditorFor(m =&gt; m.FirstName)
</span><span class='line'>    @Html.ValidationMessageFor(m =&gt; m.FirstName)
</span><span class='line'><span class="nt">&lt;/div&gt;</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>Based off of:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="k">public</span> <span class="k">class</span> <span class="nc">Person</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'><span class="na">    [DisplayName(&quot;First Name&quot;)]</span>
</span><span class='line'><span class="na">    [Description(&quot;Please enter a first name&quot;)]</span>
</span><span class='line'><span class="na">    [Required]</span> <span class="c1">// leave off to add &#39;(optional)&#39; to label</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">FirstName</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>That&rsquo;s it.</p>




<h3>Building a better LabelFor</h3>




<p>My helper is called <code>FieldLabelFor</code> but you can call it whatever you want. Here&rsquo;s what it does:</p>




<ul>
<li>Is entirely based off metadata attributes</li>
<li>Label text is based off of <code>[DisplayName]</code> attribute (via ModelMetadata)</li>
<li>Adds an <em>(optional)</em> if a field isn&rsquo;t required</li>
<li>Adds a <code>&lt;span class="note"&gt;</code> to the label if a <code>[Description()]</code> attribute is found</li>
<li>Supports both attributes decorating the model and via <code>[MetadataType]</code> attribute</li>
</ul>




<p>It outputs the <code>&lt;label&gt;</code> markup found above.</p>




<p>I&rsquo;ve made it a Gist, so you can hack and slash it to your needs:</p>




<script src="https://gist.github.com/907780.js?file=FieldLabelFor.cs"></script>




<p>Remember to add <code>@using YourProject.Library.Extensions;</code> to the top of your razor file (or add the namespace to your <code>Views\web.config</code>).</p>




<p>I&rsquo;ve styled my forms so that a full field will look something like:</p>




<p><img src="/blog/images/5.png" alt="Field label style" /></p>




<p>As you can probably tell, I subscribe to the notion that all fields are required unless otherwise marked. I think for a user filling out a form, this is what they assume to be the case and more often that not, more fields are required than optional.</p>




<h3>Off you go!</h3>




<p>Start building better forms with MVC. Look for a post at a later date that will delve deeper into my opinions on web forms (hint: they suck!).</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2011-04-07T18:54:05+00:00" pubdate data-updated="true">Apr 7<span>th</span>, 2011</time>
    


  </span>

  
</article>

            </div>
          </div>
        
      </div>
    </div>

    <hr class="divider-short"/>

    <div class="archive-link">
      <h3><a href="/blog/archives/">All Posts</a></h3>
    </div>
  </div>
</div>

    <footer id="footer" class="her-row">
  <div class="container">
    <div class="row">
      <div class="col-md-1">
  <a href="/"><h4>Home</h4></a>
</div>

<div class="col-md-2">
  <div class="social-icon-list">
    
    <a href="https://twitter.com/kamranayub"><img src="/images/glyphicons_social_31_twitter.png"/></a>
    

    
    <a href="https://github.com/kamranayub"><img src="/images/glyphicons_social_21_github.png"/></a>
    

    

    
  </div>
</div>

<div class="pull-right">
  <h4>Powered by <a href="http://octopress.org/">Octopress</a>. Designed by <a href="http://AdrianArtiles.com">Adrian Artiles</a>.</h4>
</div>


    </div>
  </div>
</footer>

    
  </body>
</html>

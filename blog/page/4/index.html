
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Kamranicus</title>
  <meta name="author" content="Kamran">

  
  <meta name="description" content="My staging application is on AppHarbor so I gave it the shared Yocto SQL database which has a limit of 20MB. That&rsquo;s not much, so I wanted a way &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://kamranicus.com/blog/page/4">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="http://feeds.feedburner.com/Kamranicus" rel="alternate" title="Kamranicus" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=Droid+Sans' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Kreon' rel='stylesheet' type='text/css'>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-1203259-13']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Kamranicus</a></h1>
  
    <h2>Kamran Ayub is a developer and designer in Minneapolis, Minnesota. He specializes in .NET development with a dash of client-side and is passionate about UX.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss email">
  <li><a href="http://feeds.feedburner.com/Kamranicus" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
    <li><a href="http://feedburner.google.com/fb/a/mailverify?uri=Kamranicus" rel="subscribe-email" title="subscribe via email">Email</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:kamranicus.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/posts/51/protip-show-db-usage-in-your-ef-application">Protip: Show DB Usage in Your EF Application</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-06-15T06:19:29-05:00" pubdate data-updated="true">Jun 15<span>th</span>, 2012</time>
        
           | <a href="/blog/posts/51/protip-show-db-usage-in-your-ef-application#disqus_thread"
             data-disqus-identifier="http://kamranicus.com/blog/posts/51/protip-show-db-usage-in-your-ef-application">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>My staging application is on <a href="http://appharbor.com">AppHarbor</a> so I gave it the shared Yocto SQL database which has a limit of 20MB. That&rsquo;s not much, so I wanted a way to display my current usage level in staging when I test the site in case I want to flush it out. It was fairly easy (with a gotcha)!</p>

<p><strong>MVC Layout</strong></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>@if (AppSettings.RuntimeEnvironment != RuntimeEnvironment.P)
</span><span class='line'>{
</span><span class='line'>    <span class="nt">&lt;p&gt;</span>DB Usage: @{ Html.RenderAction(&quot;DbUsage&quot;, &quot;Stats&quot;); }<span class="nt">&lt;/p&gt;</span>
</span><span class='line'>}
</span></code></pre></td></tr></table></div></figure>


<p>I am rendering an action since I need to call out to my service layer.</p>

<p><strong>StatsController</strong></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="na">[ChildActionOnly]</span>
</span><span class='line'><span class="na">[GET(&quot;stats/dbusage&quot;)]</span>
</span><span class='line'><span class="k">public</span> <span class="n">ActionResult</span> <span class="nf">DbUsage</span><span class="p">()</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="n">AppSettings</span><span class="p">.</span><span class="n">RuntimeEnvironment</span> <span class="p">!=</span> <span class="n">RuntimeEnvironment</span><span class="p">.</span><span class="n">P</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="nf">Content</span><span class="p">(</span><span class="n">SomeAbstraction</span><span class="p">.</span><span class="n">GetDatabaseUsageStat</span><span class="p">());</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="k">new</span> <span class="nf">EmptyResult</span><span class="p">();</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>I am using <a href="https://github.com/mccalltd/AttributeRouting">AttributeRouting</a>, and if you use <code>RenderAction</code> you should know it requires a route to be made. I use <code>ChildActionOnly</code> to prevent browsing to the action. I also return an empty result if it&rsquo;s production (I only have 3 states).</p>

<p><strong>IRepository</strong></p>

<p>In my project, I have a application service layer that uses an injectable repository. I&rsquo;ve found this makes integration testing pretty easy as my controllers are dumb as heck and leave all the logic up to the service layer where there&rsquo;s no need to mock any HTTP stuff.</p>

<p>I&rsquo;ll skip to the repository since that&rsquo;s where the actual code is.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="k">public</span> <span class="kt">string</span> <span class="nf">GetDbUsage</span><span class="p">()</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="k">try</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="n">IEnumerable</span> <span class="n">dt</span> <span class="p">=</span> <span class="n">_dbContext</span><span class="p">.</span><span class="n">Database</span><span class="p">.</span><span class="n">SqlQuery</span><span class="p">(</span><span class="k">typeof</span> <span class="p">(</span><span class="n">DbUsage</span><span class="p">),</span> <span class="s">&quot;sp_spaceused&quot;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">if</span> <span class="p">(</span><span class="n">dt</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
</span><span class='line'>            <span class="k">return</span> <span class="s">&quot;Unknown&quot;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>        <span class="kt">var</span> <span class="n">usage</span> <span class="p">=</span> <span class="n">dt</span><span class="p">.</span><span class="n">OfType</span><span class="p">&lt;</span><span class="n">DbUsage</span><span class="p">&gt;().</span><span class="n">FirstOrDefault</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">return</span> <span class="n">usage</span><span class="p">.</span><span class="n">database_size</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span> <span class="k">catch</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="s">&quot;Unknown&quot;</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">private</span> <span class="k">class</span> <span class="nc">DbUsage</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">database_name</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">database_size</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>This just executes the stored proc <code>sp_spaceused</code> and coerces it into the <code>DbUsage</code> type. The gotcha is that there&rsquo;s another column, &ldquo;unallocated space&rdquo; which <strong>for some ungodly, inconsistent reason</strong> has a space in it. I cannot figure out how to get it without resorting to an ADO.NET data reader. I&rsquo;d appreciate any advice on how to grab that additional column as well.</p>

<p>If you want to log an error, you should, but I don&rsquo;t really care if I can&rsquo;t access the size&hellip; so I just ignore it. It&rsquo;s only for debugging.</p>

<p>And as for the result? Handy!</p>

<p><img src="/blog/images/53.png" alt="DB Usage" /></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/posts/50/frustration-with-the-vs2012-team-explorer-tool-win">Frustration With the VS2012 Team Explorer Tool Window</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-06-12T18:32:52-05:00" pubdate data-updated="true">Jun 12<span>th</span>, 2012</time>
        
           | <a href="/blog/posts/50/frustration-with-the-vs2012-team-explorer-tool-win#disqus_thread"
             data-disqus-identifier="http://kamranicus.com/blog/posts/50/frustration-with-the-vs2012-team-explorer-tool-win">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I would just like to quickly comment on something I noticed while using VS2012 and Team Explorer (we use TFS at work). Below is a screenshot of the window as it stands in the RC.</p>

<p><strong>Can you tell me what role the black text in the window plays?</strong></p>

<p><img src="/blog/images/48.png" alt="Team Explorer 2012" /></p>

<p>If you said &ldquo;headings,&rdquo; I would not blame you because <em>that&rsquo;s exactly what I thought at first.</em> In fact, they are <strong>links</strong> to the common tasks you&rsquo;ll do in TFS. I didn&rsquo;t realize this until my mouse happened to hover over the tasks and then it became underlined with the pointer cursor. There&rsquo;s a pretty clear violation of the Gestalt principle of color here; why are some links blue and the most common ones bold and black? Unconsciously, this matches my typical assumption of headings, when in fact the true intention is to make the common tasks stand out.</p>

<p>We see this header/nav paradigm all over the web. Here&rsquo;s what Apple&rsquo;s footer navigation is styled like:</p>

<p><img src="/blog/images/49.png" alt="Apple Nav" /></p>

<p>My automatic assumption is enforced by the fact that the <em>Home</em> heading is also black and bold, the only difference being the size.</p>

<p>This is even a paradigm <em>within VS2012 itself</em>. Here&rsquo;s an example on the start page:</p>

<p><img src="/blog/images/50.png" alt="Getting Started" /></p>

<p>Or, the Start tasks&hellip;</p>

<p><img src="/blog/images/51.png" alt="Start" /></p>

<p>The other thing that frustrated me the first time was figuring out how to change team projects. It&rsquo;s not easy to figure out. You need to click the team project name, which looks like a label except for the arrow on the far right edge.</p>

<p><img src="/blog/images/52.png" alt="Changing team projects" /></p>

<p>I like what the team is trying to do here, I just think the navigation needs to be gone over again to reduce the confusion.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/posts/49/use-enums-to-reduce-markup-maintenance-mvc">Use Enums to Reduce Markup Maintenance [MVC]</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-06-08T04:49:33-05:00" pubdate data-updated="true">Jun 8<span>th</span>, 2012</time>
        
           | <a href="/blog/posts/49/use-enums-to-reduce-markup-maintenance-mvc#disqus_thread"
             data-disqus-identifier="http://kamranicus.com/blog/posts/49/use-enums-to-reduce-markup-maintenance-mvc">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Have you ever done this before?</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="c">&lt;!-- Decide what CSS class to use for layout --&gt;</span>
</span><span class='line'>@if (Model.Format == Formats.Table) {
</span><span class='line'>  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;foo foo-layout-table&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>} else if (Model.Format == Formats.Grid) {
</span><span class='line'>  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;foo foo-layout-grid&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>} else if (Model.Format == Formats.Paragraph) {
</span><span class='line'>  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;foo foo-layout-paragraph&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>  <span class="c">&lt;!-- Markup --&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;/div&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Or some other variant of the same idea (trying to assign a CSS class based on some branch logic)?</p>

<p>If you find yourself doing this, I have a pro tip for you: wherever you can, utilize your enum directly in the CSS class name. Why? Because in 2 weeks when you add another layout, you will need to go back into this if statement and add another branch. The other reason is, frankly, this is ugly and not very Razor-ish.</p>

<p>Instead, I&rsquo;d advocate doing it this way:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;foo foo-layout-@Model.Format&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="c">&lt;!-- Markup --&gt;</span>
</span><span class='line'><span class="nt">&lt;/div&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Simple! I found that to be much more intuitive and is the way I&rsquo;ve always approached this. You can use this approach with an Enum, string, or other type where a <code>.ToString()</code> outputs a simple value (booleans!).</p>

<p><em>But Kamran, my logic is much more complex than that.</em> This is when I&rsquo;d recommend pulling out that logic into a view model, creating a <code>@helper</code>, or as a last resort, inline.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="c">&lt;!-- Helper --&gt;</span>
</span><span class='line'>@helper LayoutCss() {
</span><span class='line'>  if (Model.Format == Formats.Table) {
</span><span class='line'>      @:foo-layout-table
</span><span class='line'>  } else if (Model.Format == Formats.Grid) {
</span><span class='line'>      @:foo-layout-grid
</span><span class='line'>  } else if (Model.Format == Formats.Paragraph) {
</span><span class='line'>      @:foo-layout-paragraph
</span><span class='line'>  }
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;foo @LayoutCss()&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="c">&lt;!-- Inline --&gt;</span>
</span><span class='line'>@{
</span><span class='line'>  var layoutCssClass = &quot;&quot;;
</span><span class='line'>
</span><span class='line'>  if (Model.Format == Formats.Table) {
</span><span class='line'>      layoutCssClass = &quot;foo-layout-table&quot;;
</span><span class='line'>  } else if (Model.Format == Formats.Grid) {
</span><span class='line'>      layoutCssClass = &quot;foo-layout-grid&quot;;
</span><span class='line'>  } else if (Model.Format == Formats.Paragraph) {
</span><span class='line'>      layoutCssClass = &quot;foo-layout-paragraph&quot;;
</span><span class='line'>  }
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;foo @layoutCssClass&quot;</span><span class="nt">&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>The point is to decouple your CSS class logic from your markup as much as you can, so your markup isn&rsquo;t crufted up. What other tips do you have for reducing CSS class headaches?</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/posts/48/tips-for-updating-from-webapi-beta-to-webapi-rc">Tips for Updating From WebAPI Beta to WebAPI RC</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-06-01T05:59:01-05:00" pubdate data-updated="true">Jun 1<span>st</span>, 2012</time>
        
           | <a href="/blog/posts/48/tips-for-updating-from-webapi-beta-to-webapi-rc#disqus_thread"
             data-disqus-identifier="http://kamranicus.com/blog/posts/48/tips-for-updating-from-webapi-beta-to-webapi-rc">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I just installed VS 2012 RC (previous codename VS11) to make sure I am on the latest and greatest and I&rsquo;d like to mention a few gotchas I ran into along the way while upgrading <a href="http://keeptrackofmygames.com">Keep Track of My Games</a>.</p>

<h2>Nuget Packages</h2>

<p>One of the first things I did when opening the solution was to compile and run. WHAM. You will get a MissingMethodException:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[MissingMethodException: Method not found: 'Void System.Net.Http.Headers.HttpHeaders.AddWithoutValidation(System.String, System.Collections.Generic.IEnumerable`1&lt;System.String&gt;)'.]
</span><span class='line'>   System.Web.Http.WebHost.HttpControllerHandler.AddHeaderToHttpRequestMessage(HttpRequestMessage httpRequestMessage, String headerName, String[] headerValues) +0
</span><span class='line'>   System.Web.Http.WebHost.HttpControllerHandler.ConvertRequest(HttpContextBase httpContextBase) +248
</span><span class='line'>   System.Web.Http.WebHost.HttpControllerHandler.BeginProcessRequest(HttpContextBase httpContextBase, AsyncCallback callback, Object state) +79
</span><span class='line'>   System.Web.Http.WebHost.HttpControllerHandler.System.Web.IHttpAsyncHandler.BeginProcessRequest(HttpContext httpContext, AsyncCallback callback, Object state) +48
</span><span class='line'>   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +268
</span><span class='line'>   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +155</span></code></pre></td></tr></table></div></figure>


<p>First issue: Web API had also been updated along with VS 2012&rsquo;s install. That means your previous beta Nuget packages are out of date. Unfortunately, if you go into <em>Manage Nuget Packages</em> you&rsquo;ll find no help in the Updates panel.</p>

<p>Turns out, the IDs have changed! Search for <code>Microsoft.AspNet.WebApi</code> and you&rsquo;ll find the RC packages again. In my solution, I am using:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'>  <span class="nt">&lt;package</span> <span class="na">id=</span><span class="s">&quot;Microsoft.AspNet.Mvc&quot;</span> <span class="na">version=</span><span class="s">&quot;4.0.20505.0&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;package</span> <span class="na">id=</span><span class="s">&quot;Microsoft.AspNet.Razor&quot;</span> <span class="na">version=</span><span class="s">&quot;2.0.20505.0&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;package</span> <span class="na">id=</span><span class="s">&quot;Microsoft.AspNet.WebApi.Client&quot;</span> <span class="na">version=</span><span class="s">&quot;4.0.20505.0&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;package</span> <span class="na">id=</span><span class="s">&quot;Microsoft.AspNet.WebApi.Core&quot;</span> <span class="na">version=</span><span class="s">&quot;4.0.20505.0&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;package</span> <span class="na">id=</span><span class="s">&quot;Microsoft.AspNet.WebApi.WebHost&quot;</span> <span class="na">version=</span><span class="s">&quot;4.0.20505.0&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;package</span> <span class="na">id=</span><span class="s">&quot;Microsoft.AspNet.WebPages&quot;</span> <span class="na">version=</span><span class="s">&quot;2.0.20505.0&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;package</span> <span class="na">id=</span><span class="s">&quot;Microsoft.Net.Http&quot;</span> <span class="na">version=</span><span class="s">&quot;2.0.20505.0&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;package</span> <span class="na">id=</span><span class="s">&quot;Microsoft.Web.Infrastructure&quot;</span> <span class="na">version=</span><span class="s">&quot;1.0.0.0&quot;</span> <span class="nt">/&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Once you uninstall your beta packages and install the new RC, you will likely run into a few more issues&hellip;</p>

<h2>Dependency Injection</h2>

<p>I am using Ninject for dependency injection. You will need to adapt this solution to your needs if you <em>aren&rsquo;t</em> using Ninject. You will <a href="http://www.strathweb.com/2012/05/using-ninject-with-the-latest-asp-net-web-api-source/">need to use a new way</a> of setting the DependencyResolver, see this GitHub source repository: <a href="https://github.com/filipw/Ninject-resolver-for-ASP.NET-Web-API">https://github.com/filipw/Ninject-resolver-for-ASP.NET-Web-API</a></p>

<p>Thanks Filip!</p>

<h2>No more generic HttpResponseMessage</h2>

<p>If you had previously been using code like this:</p>

<pre><code>new HttpResponseMessage&lt;T&gt;(someValue)
</code></pre>

<p>You will get compilation errors. The new way to handle this is via the <code>Request</code> property in your controllers:</p>

<pre><code>Request.CreateResponse(HttpStatusCode.OK, result);
</code></pre>

<p>You will need to change any return types from <code>HttpResponseMessage&lt;T&gt;</code> to <code>HttpResponseMessage</code>.</p>

<h2>No need for custom JSON.NET formatter</h2>

<p>If you had previously been using a variant of <a href="http://www.west-wind.com/weblog/posts/2012/Mar/09/Using-an-alternate-JSON-Serializer-in-ASPNET-Web-API">Rick Strahl&rsquo;s JSON.NET formatter</a>, you do not need it anymore as Web API defaults to JSON.NET now. However, if you, like me, want to customize the settings used, you can still do so:</p>

<p><strong>Global.asax or App_Start</strong></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="kt">var</span> <span class="n">formatter</span> <span class="p">=</span> <span class="n">GlobalConfiguration</span><span class="p">.</span><span class="n">Configuration</span><span class="p">.</span><span class="n">Formatters</span><span class="p">.</span><span class="n">OfType</span><span class="p">&lt;</span><span class="n">JsonMediaTypeFormatter</span><span class="p">&gt;().</span><span class="n">First</span><span class="p">();</span>
</span><span class='line'><span class="n">formatter</span><span class="p">.</span><span class="n">SerializerSettings</span><span class="p">.</span><span class="n">NullValueHandling</span> <span class="p">=</span> <span class="n">NullValueHandling</span><span class="p">.</span><span class="n">Ignore</span><span class="p">;</span>
</span><span class='line'><span class="n">formatter</span><span class="p">.</span><span class="n">SerializerSettings</span><span class="p">.</span><span class="n">Converters</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="k">new</span> <span class="n">StringEnumConverter</span><span class="p">());</span>
</span></code></pre></td></tr></table></div></figure>


<p>Thanks to Matt in the comments for trimming the fat off what I had previously.</p>

<h2>No more GetUserPrincipal</h2>

<p>I had previously been using the extension method <code>GetUserPrincipal</code> in my custom Authorize attribute. No more! You can now use <code>System.Threading.Thread.CurrentPrincipal.Identity</code> if you need the current principal in Web API. There&rsquo;s also a convenient <code>User</code> property in the <code>ApiController</code> base class.</p>

<h2>That&rsquo;s it!</h2>

<p>That&rsquo;s about all I ran into. I am also happy to report that <a href="https://github.com/mccalltd/AttributeRouting">AttributeRouting</a> still seems to work fine against the Web API RC and MVC 4 RC! I did some limited browsing around on my site with heavy AJAX calls and everything seemed to work.</p>

<p>Hope this saves you some time!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/posts/47/some-thoughts-on-the-vs11-betarcrtm-interface">Some Thoughts on the VS11 Beta/RC/RTM Interface</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-05-31T14:07:00-05:00" pubdate data-updated="true">May 31<span>st</span>, 2012</time>
        
           | <a href="/blog/posts/47/some-thoughts-on-the-vs11-betarcrtm-interface#disqus_thread"
             data-disqus-identifier="http://kamranicus.com/blog/posts/47/some-thoughts-on-the-vs11-betarcrtm-interface">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>As you may know, the next version of Visual Studio dubbed VS11 <a href="http://www.microsoft.com/visualstudio/11/en-us">is available in Beta form</a> right now for developers worldwide to <strike>complain about</strike> go wild and test against.</p>

<p>While you can learn more about what VS11 offers in terms of new features, I think the biggest thing you&rsquo;ll hear about is feedback regarding it&rsquo;s new user interface style. I want to write down some thoughts I had as a heavy Visual Studio user and self-professed user experience (UX) <em>aficionado</em>.</p>

<h3>Please don&rsquo;t hurt me</h3>

<p>I want to be clear that I am not here to bash on Visual Studio nor complain about the new interface. Rather, I&rsquo;d like to take a constructive look at a couple of the cosmetic changes in store for us.</p>

<h3>I HEARD U LIEK ALL CAPS</h3>

<p>I think the biggest thing I see on the tubes these days are comments about the ALL CAPS menu change from the Beta to the RC as you can see below (this is the Dark Theme):</p>

<p><strong>Beta:</strong><br/>
<img src="/blog/images/42.png" alt="Beta Main Menu" /></p>

<p><strong>RC:</strong><br/>
<img src="/blog/images/41.png" alt="All Caps RC Main Menu" /></p>

<p><strong>What People Are Saying</strong></p>

<p>Why is the main menu SHOUTING AT ME? This is terrible!</p>

<p><strong>What People Are Missing</strong></p>

<p>Whether or not you believe a fundamental user experience principle has been violated here, I think the underlying issue all along has been: why are there <em>so many damn options</em>?</p>

<p>All caps or not, I think the team should be aiming to reduce the amount of time I even need to look at the main menu and even better, totally eliminate or consolidate some of those menus. If I had to list what menus I used the most it would be:</p>

<ol>
<li>Edit &ndash; to get to some advanced options that I can&rsquo;t remember hotkeys for</li>
<li>View &ndash; to see a window I closed at some point or find a window</li>
<li>Build &ndash; to Rebuild/Clean sometimes or build my current project (vs. the entire solution)</li>
<li>Tools &ndash; to get to extension manager for updates or new extensions</li>
<li>File &ndash; to open a project when I&rsquo;m not on the start screen</li>
</ol>


<p>That&rsquo;s about it. So, in other words, I use about 5 out of the 16 total menu options regularly. Does that sound like the Pareto Principle (80/20 rule) at work here? It should at least have crossed your mind. Admittedly, this is <em>just for me</em> but no matter the person, I would expect to find that the typical Visual Studio user does <strong>not</strong> use all the menu options every day or very often.</p>

<p>One of the nice things about VS is that you can totally customize the menu. For example, here&rsquo;s mine right now:</p>

<p><img src="/blog/images/47.png" alt="My Menu" /></p>

<p>Unfortunately, I can&rsquo;t do much more because VS2010 crashes if I try to modify the menus themselves, otherwise I&rsquo;d move Theme, Resharper, Sitecore, and Mindscape into the Tools menu reducing my total menus to only 6. Finally, I&rsquo;d like the ability to hit Alt to enable the menu, otherwise it should be hidden (see Sublime Text). I don&rsquo;t know if there&rsquo;s an extension that enables that.</p>

<p>Just because I have the control to move my menu commands around doesn&rsquo;t mean it solves this problem. There are so many commands in Visual Studio the team could expose but don&rsquo;t simply for that reason, there&rsquo;s just too many. A different kind of menu should be considered that doesn&rsquo;t rely on the &ldquo;classic&rdquo; menu bar pattern.</p>

<p>Is it too crazy to think about a menu inside Visual Studio that acted like the Windows OS menu? It could list my most recent actions or actions I pin, it could group different tasks or let me open an advanced panel to see more tasks. The useful Ctrl-3 shortcut in one of the power tool extensions lets you start typing to search the menu system (and I believe that is what the search box in the top right of VS11 also does); why not build that into a single menu ala Windows 7 Start Menu? Dare I even mention&hellip; a ribbon (<em>shudder</em>)?</p>

<h3>Monochrome is the New Color</h3>

<p>In the VS11 beta, probably the first thing you&rsquo;ll notice is the distinct lack of color. Where&rsquo;d all the pretty icons go?! If you asked me how I felt when I opened it up for the first time, the word &ldquo;depressed&rdquo; probably would make the cut. I know that sounds extreme, but when you talk about how we as humans perceive colors, certain schemes evoke certain emotions.</p>

<p>Again, let&rsquo;s take a look at the dark theme (since it exacerbates the effect):</p>

<p><img src="/blog/images/43.png" alt="Dark Theme in Beta" /></p>

<p>Now, work has been done since the beta to add color back to VS which I believe makes it look <em>so</em> much better:</p>

<p><img src="/blog/images/44.png" alt="Dark Theme in RTM" /></p>

<p>The added color in the icons really makes a difference and I was glad to see it back for the RC and RTM. I also think it&rsquo;s very admirable that the team will release the vector versions alongside Visual Studio for use in our own apps. In this day and age where images need to be scaled for different form factors and &ldquo;Retina&rdquo; displays, I think we&rsquo;ll be seeing more emphasis on vector-based icons. GitHub even <a href="https://github.com/blog/1106-say-hello-to-octicons">created their own font</a> to address the issue. You could argue they may have jumped the gun a bit but hopefully font rendering will continue to improve in modern browsers.</p>

<p>My one criticism is that not all icons will be mono&rsquo;d right away, so with some extensions you&rsquo;ll see something like this:</p>

<p><img src="/blog/images/45.png" alt="Ugh" /></p>

<p>I know they specifically fixed this icon in RC, but I&rsquo;m sure there will be more instances of this, especially in the New File dialog:</p>

<p><img src="/blog/images/46.png" alt="File icons" /></p>

<p>This can be fixed by extension developers, but I hope (as an extension developer myself) that it is not too painful to provide iconography for both the VS2010 and VS11 version of an extension.</p>

<h3>Other Thoughts</h3>

<p>In general, I think those are the two big topics I see while reading blog posts and seeing comments. I may have other thoughts for the overall experience but I&rsquo;ll save them for future posts as I use VS11 more and more.</p>

<p>As always, let me know what you think! Do you have other criticisms of the interface? If you&rsquo;re going to just go on about how you hate M$ and VS11 is terrible, don&rsquo;t bother responding. The VS team would benefit more from constructive feedback.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/posts/46/please-go-watch-the-pluralsight-ux-fundamentals-of">Please Go Watch the Pluralsight UX Fundamentals of Design Course</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-05-30T20:26:06-05:00" pubdate data-updated="true">May 30<span>th</span>, 2012</time>
        
           | <a href="/blog/posts/46/please-go-watch-the-pluralsight-ux-fundamentals-of#disqus_thread"
             data-disqus-identifier="http://kamranicus.com/blog/posts/46/please-go-watch-the-pluralsight-ux-fundamentals-of">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://blog.pluralsight.com/2012/05/30/free-training-on-user-experiences-fundamental-design-principles-by-billy-hollis/">Pluralsight is having a deal right now</a> where if you follow them on Twitter and follow Billy Hollis, you get a free token to watch the <a href="http://www.pluralsight-training.net/microsoft/Courses/TableOfContents?courseName=cux-designprinciples">UX fundamentals course</a>.</p>

<p>After having finished the course (a full 4 hours plus exercises), and while I normally don&rsquo;t like contests that require you to follow people, I would heavily encourage you to take advantage of this offer if you don&rsquo;t have a Pluralsight license.</p>

<p>Whether you&rsquo;re a full-on developer, front-end developer, interaction designer, or a plumber, I think you should watch this course. It&rsquo;s chock full of awesome advice and design guidance, especially aimed at .NET developers and enterprise developers.</p>

<p>I&rsquo;ve already learned some neat techniques I can start using immediately while I&rsquo;m developing the next version of Keep Track of My Games.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/posts/45/sitecore-and-net-framework-45">Sitecore and .NET Framework 4.5</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-05-11T13:24:25-05:00" pubdate data-updated="true">May 11<span>th</span>, 2012</time>
        
           | <a href="/blog/posts/45/sitecore-and-net-framework-45#disqus_thread"
             data-disqus-identifier="http://kamranicus.com/blog/posts/45/sitecore-and-net-framework-45">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><strong>Update 1 (8/28/2012)</strong>: As of Sitecore CMS 6.5.0 rev. 120706 (6.5.0 Update-5), this issue should have been fixed. <a href="http://sdn.sitecore.net/Products/Sitecore%20V5/Sitecore%20CMS%206/ReleaseNotes/ChangeLog.aspx#650update5">See here</a> under &ldquo;Miscellaneous&rdquo; fixes.</p>

<p>Just a quick note that as of this post, Sitecore (6.5.x) does not yet support .NET Framework 4.5. If you try to install Sitecore, you will be able to access the homepage and login page, but you won&rsquo;t be able to login. You&rsquo;ll see an error like this:</p>

<p><img src="/blog/images/40.png" alt="Error" /></p>

<blockquote><p>Object of type &lsquo;System.Int32&rsquo; cannot be converted to type &lsquo;System.Web.Security.Cryptography.Purpose&rsquo;</p></blockquote>

<p>This is because in .NET 4.5 there are some new namespaces in <code>System.Web</code> that I guess return a different value than what Sitecore was expecting (or previous .NET 4 consumers).</p>

<p>I googled this error to no avail. Sitecore knows about it but I am posting it in case anyone else (which there will be more soon) run into this.</p>

<h2>Fix it</h2>

<p>Unfortunately, this requires you to (in this order):</p>

<ul>
<li>Uninstall VS11 if you have it installed</li>
<li>Uninstall .NET 4.5 (Multi-Targeting and the core one)</li>
<li>Reinstall .NET 4 (yes, you need to)</li>
</ul>


<p>I&rsquo;m a bit sad since a few of my projects are MVC4 so in order to use SC locally I now can&rsquo;t work on those projects on this computer. If you have the ability to use a VM or equivalent, I&rsquo;d go that route to avoid having to muck up your main work environment.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/posts/44/why-am-i-forced-to-store-my-users-contact-informat">Why Am I Forced to Store My User&#8217;s Contact Information?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-04-18T23:44:51-05:00" pubdate data-updated="true">Apr 18<span>th</span>, 2012</time>
        
           | <a href="/blog/posts/44/why-am-i-forced-to-store-my-users-contact-informat#disqus_thread"
             data-disqus-identifier="http://kamranicus.com/blog/posts/44/why-am-i-forced-to-store-my-users-contact-informat">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>OpenID and OpenAuth are cool. What&rsquo;s not cool about either approach is that I have no way to say, &ldquo;Notify this user by whatever means available.&rdquo; Instead, I am forced to collect that information and figure out a way to store it that is safe from prying eyes.</p>

<p>What I&rsquo;d like to see, and tell me if this exists, is a way to not only have people <em>authenticate</em> using their service of choice, but also to be <em>notified</em> via that service. In other words, OpenID already lets me ask for a user&rsquo;s email or phone but even that isn&rsquo;t really standard (see Google). That is not <em>exactly</em> what I want, though. I just want a way to notify the user. That might be email, it might be phone, it might be proprietary (Facebook notification). Just tell me what&rsquo;s available to me and I can decide based on that what to send (small message for phones, email for email).</p>

<p>As I understand the landscape, the only way to get around storing information myself is to buy into an infrastructure like Facebook to handle it for me&hellip; except that not everyone is enthused about being forced to use Facebook to use my app and it&rsquo;s not in my best interest to alienate my user base.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/posts/43/attributerouting-now-supports-web-api">AttributeRouting Now Supports Web API</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-04-17T16:08:22-05:00" pubdate data-updated="true">Apr 17<span>th</span>, 2012</time>
        
           | <a href="/blog/posts/43/attributerouting-now-supports-web-api#disqus_thread"
             data-disqus-identifier="http://kamranicus.com/blog/posts/43/attributerouting-now-supports-web-api">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>If you&rsquo;re <em>not</em> using <a href="https://github.com/mccalltd/AttributeRouting">AttributeRouting</a> you&rsquo;re missing out. I&rsquo;m serious, I am not sure how any ASP.NET MVC application can live without this library. Like <a href="http://getcassette.net">Cassette</a>, it&rsquo;s become a standard in my .NET tool belt.</p>

<h3>AttributeRouting at a Glance</h3>

<p>If you&rsquo;re like me, you hate being stuck in this <code>{controller}/{action}</code> world that is the default MVC experience. I&rsquo;d rather have URLs like this:</p>

<ul>
<li>/library/1 (GET, POST)</li>
<li>/library/1/games/1 (GET, POST, PUT, DELETE)</li>
<li>/search/?q=keyword (GET)</li>
<li>/register (GET, POST)</li>
</ul>


<p>In other words, more control over my URLs. Sure, you <em>could</em> be a caveman and use Global.asax for all of that, but I think you&rsquo;ll find it quickly growing out of hand unless you create methods to take care of different controllers.</p>

<p>Instead, wouldn&rsquo;t this be easier and more discoverable?</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="na">[RoutePrefix(&quot;library&quot;)]</span>
</span><span class='line'><span class="k">public</span> <span class="k">class</span> <span class="nc">LibraryController</span> <span class="p">:</span> <span class="n">Controller</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// GET: /</span>
</span><span class='line'>    <span class="c1">// GET: /library</span>
</span><span class='line'>
</span><span class='line'><span class="na">    [GET(&quot;&quot;, RouteName = &quot;default&quot;, IsAbsoluteUrl = true)]</span>
</span><span class='line'><span class="na">    [GET(&quot;&quot;, RouteName = &quot;library&quot;)]</span>
</span><span class='line'>    <span class="k">public</span> <span class="n">ActionResult</span> <span class="nf">Index</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// GET: /library/{userId}</span>
</span><span class='line'><span class="na">    [GET(&quot;{userId}&quot;)]</span>
</span><span class='line'>    <span class="k">public</span> <span class="n">ActionResult</span> <span class="nf">ByUser</span><span class="p">(</span><span class="kt">int</span> <span class="n">userId</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// POST: /library</span>
</span><span class='line'><span class="na">    [POST(&quot;&quot;)]</span>
</span><span class='line'>    <span class="k">public</span> <span class="n">ActionResult</span> <span class="nf">Filter</span><span class="p">(</span><span class="n">Criteria</span> <span class="n">criteria</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>That is exactly what AttributeRouting lets you do (and more!).</p>

<h3>Web API</h3>

<p>Now what if you want to do the same thing with ASP.NET Web API (or self-hosted Web API)? The short answer is <strong>now you can</strong>, though a week ago you couldn&rsquo;t. Having embarked on using Web API for my latest project, I decided that since I couldn&rsquo;t live without AR in MVC, I also couldn&rsquo;t live without it for Web API. So I forked the project, <a href="https://github.com/mccalltd/AttributeRouting/pull/57">did my thing</a>, and now it&rsquo;s in v2.0 which is <a href="http://nuget.org/packages?q=attributerouting">out now on Nuget</a>.</p>

<p>I tried hard to keep the exact same convention and syntax:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="na">[RoutePrefix(&quot;library&quot;)]</span>
</span><span class='line'><span class="k">public</span> <span class="k">class</span> <span class="nc">LibraryController</span> <span class="p">:</span> <span class="n">ApiController</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'><span class="na">  [GET(&quot;&quot;)]</span>
</span><span class='line'>  <span class="k">public</span> <span class="n">LibraryViewModel</span> <span class="nf">Get</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="na">  [HttpRoute(&quot;custom&quot;, HttpMethod.Get, HttpMethod.Post)]</span>
</span><span class='line'>  <span class="k">public</span> <span class="n">HttpResponseMessage</span> <span class="nf">Custom</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Using Web API in a self-hosted environment? Not a problem, I made sure self-hosted works the same way, just grab the <a href="http://nuget.org/packages/AttributeRouting.WebApi.Hosted">appropriate Nuget package</a>.</p>

<p>It was a fun project and I learned a lot about generics. The end result was that I didn&rsquo;t even need to use generics and that sometimes generics are a hindrance rather than a help (such as having classes that require 7-8 generic arguments). I was also able to <a href="/32/using-nuspec-inheritance-to-reduce-nuget-maintenan">use what I learned</a> from contributing to Cassette and bring it to AttributeRouting.</p>

<p>It seems Tim is a happy camper and it always gives me a warm, fuzzy feeling whenever someone appreciates help:</p>

<p><img src="/blog/images/39.png" alt="Appreciation Goes A Long Way" /></p>

<p>If you haven&rsquo;t contributed to a project you love, you should give it a chance, you always learn something!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/posts/42/windows-8-windows-phone-7-and-ktomg">Windows 8, Windows Phone 7, and KTOMG</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-04-14T17:40:51-05:00" pubdate data-updated="true">Apr 14<span>th</span>, 2012</time>
        
           | <a href="/blog/posts/42/windows-8-windows-phone-7-and-ktomg#disqus_thread"
             data-disqus-identifier="http://kamranicus.com/blog/posts/42/windows-8-windows-phone-7-and-ktomg">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>You may have remembered me saying in the last few posts I&rsquo;ve been working on v2 of <a href="http://keeptrackofmygames.com">KTOMG</a>. It&rsquo;s going well and progress is being made. I also recently acquired a Windows Phone for agreeing to release an app before June. Funnily enough, I learned from Jeff Brand today while at <a href="http://twincitiescodecamp.com">Twin Cities Code Camp</a> that there will be some accelerator labs in May that will provide a way to quickly get up and running on Windows 8. Needless to say, I decided that it would be good to target both platforms, which means I have even more work to do in the next couple months (like I need more?).</p>

<p>This is pretty exciting. I have big plans for KTOMG and I really hope it pans out. The plan is to release v2 on 3 platforms and to be on the Windows 8 app store on day one. It will be technically interesting to see how separation of the codebase will be done on all three of these different platforms. For WP7, I&rsquo;m sure I&rsquo;ll need to write a XAML front-end but with Windows 8, I can probably reuse most of my existing web code. It&rsquo;ll also be interesting to take advantage of each platform&rsquo;s unique abilities (push notifications, camera, etc.).</p>

<p>Bring it on!</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/5/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/3/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  	<h1>About Me</h1>

  	<p><img src="http://gravatar.com/avatar/8303c4eb9f9099df39adbc3d8c634746?s=120" alt="My Headshot" title="My ugly mug" /></p>

  	<p>Hi, my name is Kamran. I am a web developer and designer, residing in Minnesota. I&#8217;ve been programming since 2001 and I am familiar with many different languages, both web-based and server-based. I love to tinker around and think of new ways to solve problems.</p>

	<p>If you wanna talk, tweet <strong><a href="http://twitter.com/kamranayub" target="_blank">@kamranayub</a></strong> or send me an email at my <strong>full name</strong> at <strong>gmail.com</strong></p>
</section>
<section>
  	<h1>Apps</h1>

  	<ul>
  		<li><a href="http://centwiseapp.com/">Centwise</a></li>
  		<li><a href="http://wp-bowling.tumblr.com/">Bowling Calculator</a></li>
  		<li><a href="http://keeptrackofmygames.com/">Keep Track of My Games</a></li>  		
  	</ul>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/12/18/get-your-ci-on-with-travis-ci/">Get Your CI on With Travis CI</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/12/10/just-released-bowling-calculator-app/">Just Released: Bowling Calculator App</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/12/05/miniprofiler-ravendb-pull-request-accepted/">MiniProfiler RavenDB Pull Request Accepted</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/12/04/kamranicus-now-with-100-percent-more-octopress/">Kamranicus: Now With 100% More Octopress</a>
      </li>
    
      <li class="post">
        <a href="/blog/posts/79/just-pushed-blackjack-sample-game">Just Pushed: Blackjack Sample Game</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/kamranayub">@kamranayub</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'kamranayub',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/104789622697290911192?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Kamran -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'kamranicus';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>


<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>All Posts - Kamranicus</title>
  <meta name="author" content="Kamran">

  
  <meta name="description" content="All Posts Install Windows 10 Immediately Before Rollout This is only applicable for the next few hours until your machine gets Windows 10 rolled out &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://kamranicus.com/posts">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="http://feeds.feedburner.com/Kamranicus" rel="alternate" title="Kamranicus" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-1203259-13']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

  <body>
    <a href="/" class="home-icon">
      <img src="/images/home.png"/>
    </a>

    <div class="all-posts">
  <div class="container">
    <div class="row">
      <div class="list-title col-md-offset-3 col-md-6">
        <h4>All Posts</h4>
      </div>
    </div>
  </div>

  <div class="article-list">
    <div class="container">
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/2015/07/28/install-windows-10-immediately/">Install Windows 10 Immediately Before Rollout</a></h2>
  
  <p>
    <p>This is only applicable for the next few hours until your machine gets Windows 10 rolled out. If you&rsquo;re impatient like me, a friend tipped me off that he was able to install Windows 10 prematurely by simply forcing Windows Update to download Windows 10 and then setting his system time forward a day (BIOS, I&rsquo;m thinking).</p>




<p>It&rsquo;s kind of unbelievable but it&rsquo;s working so far. I&rsquo;m at 95% complete downloading (you can view in Windows Update window).</p>




<p><img src="https://cloud.githubusercontent.com/assets/563819/8948016/ce3997f0-3567-11e5-8e1e-679fd5b54daa.png" alt="Progress" /></p>




<ol>
<li>Hit Windows+R to bring up Run command</li>
<li>Type in <code>wuauclt.exe /updatenow</code> (<strong>Works</strong>)</li>
<li>Wait for the download to finish (Control Panel &ndash;> Windows Update) (<strong>Works</strong>)</li>
<li>When Windows Update says, &ldquo;Preparing for installation&hellip;&rdquo;, set system time forward a day in Windows (<strong>Works</strong>)<br/>
<img src="https://cloud.githubusercontent.com/assets/563819/8948191/fa639e0a-3569-11e5-97c0-2b79d709c8cf.png" alt="image" /></li>
<li>When progress is done, reboot (<strong>Untested</strong>)</li>
<li>Windows 10 should install (<strong>Untested</strong>)</li>
</ol>




<p>I will update this post with any new information.</p>




<p><strong>Update (8:49pm)</strong>: I adjusted my Windows 8 date/time to tomorrow and the progress of the update jumped and I&rsquo;m completed now. I now see a Restart PC to finish installing updates.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2015-07-28T06:20:13+00:00" pubdate data-updated="true">Jul 28<span>th</span>, 2015</time>
    

in
<span class="categories">
  
    <a class='category' href='/blog/categories/windows-10/'>Windows 10</a>
  
</span>


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/2015/05/30/ktomg-update/">Behind the Major Update to Keep Track of My Games</a></h2>
  
  <p>
    <p><img src="https://cloud.githubusercontent.com/assets/563819/7899619/b3154994-072a-11e5-8da1-b9a9703a8b57.png" alt="My profile" /></p>




<p>Today I just pushed a <strong>major</strong> update to <a href="http://keeptrackofmygames.com">KTOMG</a>. <em>Psst, you should join!</em></p>




<p>You can <a href="http://blog.keeptrackofmygames.com/post/120264549011/updates-for-may-2015">reference the blog post</a> for details on features but on the technical side I&rsquo;m pretty proud because I got to implement a bunch of new tech that I&rsquo;ve been wanting to learn properly.</p>




  </p>
  <span class="meta">
    written 








  



<time datetime="2015-05-30T22:13:00+00:00" pubdate data-updated="true">May 30<span>th</span>, 2015</time>
    

in
<span class="categories">
  
    <a class='category' href='/blog/categories/css3/'>CSS3</a>, <a class='category' href='/blog/categories/front-end/'>Front-End</a>, <a class='category' href='/blog/categories/html5/'>HTML5</a>, <a class='category' href='/blog/categories/javascript/'>Javascript</a>, <a class='category' href='/blog/categories/keep-track-of-my-games/'>Keep Track of My Games</a>, <a class='category' href='/blog/categories/projects/'>Projects</a>
  
</span>


  </span>

  
    <a class="full-article-link pull-right" rel="full-article" href="/blog/2015/05/30/ktomg-update/">Read on &rarr;</a>
  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/2015/05/25/knockout-binding-report/">Knockout.js Binding Report for Performance Tuning</a></h2>
  
  <p>
    <p>I use a lot of <a href="http://knockoutjs.com">Knockout.js</a> on <a href="http://keeptrackofmygames.com">Keep Track of My Games</a>. I love Knockout but sometimes it makes it difficult to understand what&rsquo;s slowing my page down.</p>




  </p>
  <span class="meta">
    written 








  



<time datetime="2015-05-25T10:30:00+00:00" pubdate data-updated="true">May 25<span>th</span>, 2015</time>
    

in
<span class="categories">
  
    <a class='category' href='/blog/categories/chrome/'>Chrome</a>, <a class='category' href='/blog/categories/gists/'>Gists</a>, <a class='category' href='/blog/categories/javascript/'>Javascript</a>, <a class='category' href='/blog/categories/keep-track-of-my-games/'>Keep Track of My Games</a>, <a class='category' href='/blog/categories/knockout/'>Knockout</a>, <a class='category' href='/blog/categories/oss/'>OSS</a>, <a class='category' href='/blog/categories/performance/'>Performance</a>
  
</span>


  </span>

  
    <a class="full-article-link pull-right" rel="full-article" href="/blog/2015/05/25/knockout-binding-report/">Read on &rarr;</a>
  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/2015/05/21/5-things-for-6-months-abroad/">5 Things I Learned About Design While Living Abroad for 6 Months</a></h2>
  
  <p>
    <p>My wife and I have been living abroad in France for the past six months, since December. We had originally planned for me to work during this time (and to stay longer) but sometimes things just don&rsquo;t work out as planned. Still, it was truly a blessing in disguise as we&rsquo;ve been able to travel and I&rsquo;ve been able to observe and learn about how people around the world use technology that has affected the way I think about how I design software and websites.</p>




<p>Here are 5 things I&rsquo;ve learned during my 6 months living abroad.</p>




  </p>
  <span class="meta">
    written 








  



<time datetime="2015-05-21T16:48:00+00:00" pubdate data-updated="true">May 21<span>st</span>, 2015</time>
    

in
<span class="categories">
  
    <a class='category' href='/blog/categories/design/'>Design</a>, <a class='category' href='/blog/categories/france/'>France</a>, <a class='category' href='/blog/categories/life/'>Life</a>, <a class='category' href='/blog/categories/technology/'>Technology</a>, <a class='category' href='/blog/categories/travel/'>Travel</a>, <a class='category' href='/blog/categories/ux/'>UX</a>
  
</span>


  </span>

  
    <a class="full-article-link pull-right" rel="full-article" href="/blog/2015/05/21/5-things-for-6-months-abroad/">Read on &rarr;</a>
  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/2015/05/21/chrome-multi-user/">Use a Separate Chrome Profile to Manage Your Apps</a></h2>
  
  <p>
    <p>If you&rsquo;re an app or site developer, you&rsquo;ve probably got a bunch of
tabs or bookmarks for your dashboards, social network accounts,
blog, and more. For <a href="http://keeptrackofmygames.com">Keep Track of My Games</a>,
I have UserVoice, Azure, RavenDB, social profiles, etc. that I
need to manage and track (haha).</p>




  </p>
  <span class="meta">
    written 








  



<time datetime="2015-05-21T13:45:00+00:00" pubdate data-updated="true">May 21<span>st</span>, 2015</time>
    

in
<span class="categories">
  
    <a class='category' href='/blog/categories/chrome/'>Chrome</a>, <a class='category' href='/blog/categories/google/'>Google</a>, <a class='category' href='/blog/categories/keep-track-of-my-games/'>Keep Track of My Games</a>, <a class='category' href='/blog/categories/productivity/'>Productivity</a>, <a class='category' href='/blog/categories/tips/'>Tips</a>
  
</span>


  </span>

  
    <a class="full-article-link pull-right" rel="full-article" href="/blog/2015/05/21/chrome-multi-user/">Read on &rarr;</a>
  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/2015/05/11/extending-knockout-with-urlsync/">Extending Knockout Observables to Sync With Address Bar</a></h2>
  
  <p>
    <p>I made a tiny Knockout extender called <code>urlSync</code> that syncs an observable with the URL.</p>




  </p>
  <span class="meta">
    written 








  



<time datetime="2015-05-11T16:20:00+00:00" pubdate data-updated="true">May 11<span>th</span>, 2015</time>
    

in
<span class="categories">
  
    <a class='category' href='/blog/categories/gists/'>Gists</a>, <a class='category' href='/blog/categories/javascript/'>Javascript</a>, <a class='category' href='/blog/categories/knockout/'>Knockout</a>, <a class='category' href='/blog/categories/oss/'>OSS</a>
  
</span>


  </span>

  
    <a class="full-article-link pull-right" rel="full-article" href="/blog/2015/05/11/extending-knockout-with-urlsync/">Read on &rarr;</a>
  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/2015/04/30/101-ideas-for-the-microsoft-hololens/">101 Ideas for the Microsoft HoloLens</a></h2>
  
  <p>
    <p>HoloLens has the potential to change how we live, drastically.</p>




  </p>
  <span class="meta">
    written 








  



<time datetime="2015-04-30T20:42:59+00:00" pubdate data-updated="true">Apr 30<span>th</span>, 2015</time>
    

in
<span class="categories">
  
    <a class='category' href='/blog/categories/france/'>France</a>, <a class='category' href='/blog/categories/hololens/'>HoloLens</a>, <a class='category' href='/blog/categories/ideas/'>Ideas</a>, <a class='category' href='/blog/categories/musings/'>Musings</a>, <a class='category' href='/blog/categories/travel/'>Travel</a>
  
</span>


  </span>

  
    <a class="full-article-link pull-right" rel="full-article" href="/blog/2015/04/30/101-ideas-for-the-microsoft-hololens/">Read on &rarr;</a>
  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/2015/03/29/triggering-a-travis-build-programmatically/">Triggering a Travis Build Programmatically</a></h2>
  
  <p>
    <p>For <a href="http://excaliburjs.com">Exalibur.js</a> we wanted to be able to keep our <code>master</code> branch documentation up-to-date on the website. The website is built using <a href="http://assemble.io">Assemble.io</a> and GitHub pages and <a href="http://kamranicus.com/blog/2015/02/26/continuous-deployment-with-travis-ci/">after successfully automating my blog</a>, naturally I turned to <a href="http://travis-ci.org">Travis CI</a> to set up automated documentation generation.</p>




  </p>
  <span class="meta">
    written 








  



<time datetime="2015-03-29T22:45:30+00:00" pubdate data-updated="true">Mar 29<span>th</span>, 2015</time>
    

in
<span class="categories">
  
    <a class='category' href='/blog/categories/automation/'>Automation</a>, <a class='category' href='/blog/categories/ci/'>CI</a>, <a class='category' href='/blog/categories/javascript/'>Javascript</a>, <a class='category' href='/blog/categories/node-dot-js/'>Node.js</a>, <a class='category' href='/blog/categories/tips/'>Tips</a>, <a class='category' href='/blog/categories/travis-ci/'>Travis-CI</a>
  
</span>


  </span>

  
    <a class="full-article-link pull-right" rel="full-article" href="/blog/2015/03/29/triggering-a-travis-build-programmatically/">Read on &rarr;</a>
  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/2015/02/26/continuous-deployment-with-travis-ci/">Continuous Deployment With Travis-CI</a></h2>
  
  <p>
    <p>One of the fun things we did for <a href="http://playsweepstacks.com">Sweep Stacks</a> (our Ludum Dare entry)
during development was to setup continuous deployment. Since our GitHub
repository was public, we could leverage the excellent Travis CI build tool.</p>




  </p>
  <span class="meta">
    written 








  



<time datetime="2015-02-26T16:18:22+00:00" pubdate data-updated="true">Feb 26<span>th</span>, 2015</time>
    

in
<span class="categories">
  
    <a class='category' href='/blog/categories/automation/'>Automation</a>, <a class='category' href='/blog/categories/ci/'>CI</a>, <a class='category' href='/blog/categories/tips/'>Tips</a>, <a class='category' href='/blog/categories/travis-ci/'>Travis-CI</a>
  
</span>


  </span>

  
    <a class="full-article-link pull-right" rel="full-article" href="/blog/2015/02/26/continuous-deployment-with-travis-ci/">Read on &rarr;</a>
  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/2014/11/04/just-released-the-new-keep-track-of-my-games-beta/">Just Released the New Keep Track of My Games Beta</a></h2>
  
  <p>
    <p><img src="/blog/images/2014-11-03-ktomg.png" alt="Keep Track of My Games" /></p>




<p>This last weekend I finally released <a href="http://keeptrackofmygames.com">the beta version</a> of the new Keep Track of My Games site. It&rsquo;s been a long time coming but now it actually lets you keep track of your games. The original site only let you track new games and the new version still offers notifications but now you can organize and tag your collection to track games you&rsquo;ve played or haven&rsquo;t played yet (backlog) or new games.</p>




<p>Over the next few months, I want to add social features and more syncing capabilities to services like Steam, Xbox, and PSN. I also want to add deal notifications for any game in your wishlist.</p>




<p>If you use the site, <a href="http://ktomg.uservoice.com">let me know what you think</a> or vote up ideas on the roadmap!</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2014-11-04T00:16:03+00:00" pubdate data-updated="true">Nov 4<span>th</span>, 2014</time>
    

in
<span class="categories">
  
    <a class='category' href='/blog/categories/announcements/'>Announcements,</a>, <a class='category' href='/blog/categories/gaming/'>Gaming,</a>, <a class='category' href='/blog/categories/ktomg/'>KTOMG</a>, <a class='category' href='/blog/categories/news/'>News,</a>
  
</span>


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/2014/05/01/ludum-dare-29-game-jam-success/">Ludum Dare 29 Game Jam Success!</a></h2>
  
  <p>
    <p>This last weekend I spent 72 hours working on a game for the <a href="http://ludumdare.com/compo">Ludum Dare 29</a> game jam. LD is a competition where you get a prompt for a game and then have to spend 48 hours (solo) or 72 hours (jam) and bang out a game. The solo competition has strict rules but the game jam has looser rules and allows for team development. It was a caffeine-filled rush and I hope to write a blog post shortly about how it all went down. It was a ton of fun! I worked with my friends <a href="http://erikonarheim.com">Erik Onarheim</a> and <a href="http://twitter.com/joshedeen">Josh Edeen</a>, both primary contributors to the <a href="http://excaliburjs.com">Excalibur.js</a> game engine. I am also a contributor but I haven&rsquo;t done a ton with the engine core, moreso the usability of the API, opening GH issues, and the <a href="http://github.com/excaliburjs/excaliburjs.github.io">website</a>.</p>




<p><img src="http://www.ludumdare.com/compo/wp-content/compo2/342546/34118-shot0.png" alt="Kraken Unchained" /></p>




<p>In the meantime, be sure to check out the fruits of our labor! It&rsquo;s a game where you play as the Kraken and you destroy ships. We originally had a ton of ideas, as you can see in our GitHub repository, but with only 72 hours your scope is pretty narrow. Still, we&rsquo;re very happy with what came out and we&rsquo;re glad that <a href="http://excaliburjs.com">Excalibur.js</a> pulled through!</p>




<p>Play <a href="http://krakenunchained.azurewebsites.net">Kraken Unchained</a>. Vote for it on the <a href="http://www.ludumdare.com/compo/ludum-dare-29/?action=preview&amp;uid=34118">LD site</a>. You can also take a peek at the <a href="http://krakenunchained.azurewebsites.net/post-dare.html">post-LD</a> version which is in on-going development. It does support touch and fixes some issues in IE10/11.</p>




<p>You can also view the entirety of the source code <a href="http://github.com/excaliburjs/ludum-29">on GitHub</a>!</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2014-05-01T13:54:07+00:00" pubdate data-updated="true">May 1<span>st</span>, 2014</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/2014/02/09/websockets-on-windows-azure/">Getting WebSockets to Work on Windows Azure</a></h2>
  
  <p>
    <p>I was banging my head against the wall for the past hour or so wondering why I was falling back to XHR polling when I deployed my Node.js application to Azure. I&rsquo;m using socket.io and everything looks like it&rsquo;s in order, works locally, etc. It was failing with a WebSocket handshake error.</p>




<p>What I saw in the Chrome developer console was something like:</p>




<pre><code>Error during WebSocket handshake: Unexpected response code: 502
</code></pre>




<p>In my Azure Node.js console (<code>azure site log tail SITENAME</code>), I was seeing <code>EPIPE</code> errors.</p>




<p>It turns out, this little tidbit from the <a href="http://blogs.msdn.com/b/windowsazure/archive/2013/11/14/introduction-to-websockets-on-windows-azure-web-sites.aspx">original Windows Azure blog post</a> on Web Sockets did the trick.</p>




<p>Modify your <strong>web.config</strong> and add:</p>




<pre><code>&lt;webSocket enabled="false" /&gt;
</code></pre>




<p>To your <code>system.webServer</code> configuration. Also, another good point in that blog post is to use SSL, since you get SSL for free with a <code>*.azurewebsites.net</code> site.</p>




<p>Hope this helps someone else out there. This should be added to the <a href="http://www.windowsazure.com/en-us/documentation/articles/web-sites-nodejs-chat-app-socketio/">official Azure tutorial</a> on using web sockets with Node.js.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2014-02-09T03:52:48+00:00" pubdate data-updated="true">Feb 9<span>th</span>, 2014</time>
    

in
<span class="categories">
  
    <a class='category' href='/blog/categories/azure/'>Azure</a>, <a class='category' href='/blog/categories/node-dot-js/'>Node.js</a>, <a class='category' href='/blog/categories/websockets/'>WebSockets</a>
  
</span>


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/2014/01/29/5-tips-to-improve-your-mvc-site/">5 Tips to Improve Your ASP.NET MVC Codebase</a></h2>
  
  <p>
    <p>I have an urge to write a quick list of tips for improving an ASP.NET MVC application because
I just got done reviewing some code for a support ticket at work. It&rsquo;s still fresh
in my mind and I wanted to get some of my thoughts down to share with others. If you
have been doing MVC for a while, I don&rsquo;t think much of this is news. It&rsquo;s more
for those of you that don&rsquo;t do MVC often or are new to MVC.</p>




  </p>
  <span class="meta">
    written 








  



<time datetime="2014-01-29T19:16:11+00:00" pubdate data-updated="true">Jan 29<span>th</span>, 2014</time>
    

in
<span class="categories">
  
    <a class='category' href='/blog/categories/mvc/'>MVC</a>, <a class='category' href='/blog/categories/tips/'>Tips</a>
  
</span>


  </span>

  
    <a class="full-article-link pull-right" rel="full-article" href="/blog/2014/01/29/5-tips-to-improve-your-mvc-site/">Read on &rarr;</a>
  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/2013/12/24/just-released-have-i-been-pwned/">Just Released: Have I Been Pwned?</a></h2>
  
  <p>
    <iframe src="https://skydrive.live.com/embed?cid=0E21D632E0E57AEE&resid=E21D632E0E57AEE%2149403&authkey=AEgpdW0TqRxZH0o" width="192" height="320" frameborder="0" scrolling="no"></iframe>




<iframe src="https://skydrive.live.com/embed?cid=0E21D632E0E57AEE&resid=E21D632E0E57AEE%2149404&authkey=AICb-R354Pi1e38" width="192" height="320" frameborder="0" scrolling="no"></iframe>




<iframe src="https://skydrive.live.com/embed?cid=0E21D632E0E57AEE&resid=E21D632E0E57AEE%2149405&authkey=AOyaP0QJsviTcw4" width="192" height="320" frameborder="0" scrolling="no"></iframe>




<p>I just released <a href="http://www.windowsphone.com/en-us/store/app/have-i-been-pwned/43ca9526-4db2-40ba-9125-60d7abe62b40">Have I Been Pwned?</a> to the Windows Phone store. It&rsquo;s a tiny, tiny app that only took me a couple hours to build. You can find the source code on <a href="https://github.com/kamranayub/HaveIBeenPwned">GitHub</a>.</p>




<p><a href="http://haveibeenpwned.com">HaveIBeenPwned.com</a> is a website created by <a href="http://www.troyhunt.com/">Troy Hunt</a>, a security MVP, that checks to see if your email address appears in a database of all the breached email addresses in prominent hacks like Gawker, Sony, and Adobe. I&rsquo;ve definitely been pwned, so it&rsquo;s a good service to use to quickly see if you need to change your passwords.</p>




<p>I plan to add the background task soon but I wanted the initial release out there so that I can just submit updates to it. If you want to contribute, send me a pull request!</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2013-12-24T21:33:00+00:00" pubdate data-updated="true">Dec 24<span>th</span>, 2013</time>
    

in
<span class="categories">
  
    <a class='category' href='/blog/categories/app/'>App</a>, <a class='category' href='/blog/categories/windows-phone/'>Windows Phone</a>
  
</span>


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/2013/12/19/get-your-ci-on-with-travis-ci/">Get Your CI on With Travis CI</a></h2>
  
  <p>
    <p>I just published an article on Tech.pro that <a href="http://tech.pro/tutorial/1749/get-your-ci-on-with-travis-ci">walks through getting started with Travis CI</a>. We use it for Excalibur.js and that was my first
time configuring it, so I thought I might as well write up a nice tutorial for other people. It&rsquo;s really an awesome service, especially
for open source projects.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2013-12-19T05:10:10+00:00" pubdate data-updated="true">Dec 19<span>th</span>, 2013</time>
    

in
<span class="categories">
  
    <a class='category' href='/blog/categories/article/'>Article</a>, <a class='category' href='/blog/categories/tech-dot-pro/'>Tech.pro</a>, <a class='category' href='/blog/categories/writing/'>Writing</a>
  
</span>


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/2013/12/11/just-released-bowling-calculator-app/">Just Released: Bowling Calculator App</a></h2>
  
  <p>
    <p><img src="http://cdn.marketplaceimages.windowsphone.com/v8/images/4eb4e175-0dd5-4e48-860b-639e6796b01b?rotation=90" alt="Screenshot" /></p>




<p>I just released my second Windows Phone app, <a href="http://www.windowsphone.com/en-us/store/app/bowling-calculator/9287a99a-6068-4ff4-925b-988c8c99dbf6">Bowling Calculator</a>. It&rsquo;s an <a href="http://github.com/kamranayub/wp-bowling">open source app</a> that I created when <a href="/blog/posts/77/tccc15-leveling-up-your-windows-phone-app">I gave my talk at TCCC15</a>.
If you&rsquo;re a fellow developer, feel free to send me a pull request with any bug fixes or enhancements. I want to keep it focused on
the simple use case of scoring a bowling game; I don&rsquo;t need it to track multiple games or keep track of history. It&rsquo;s purpose is to serve
as a production-ready sample app and to also be good at what it aims to do.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2013-12-11T03:02:26+00:00" pubdate data-updated="true">Dec 11<span>th</span>, 2013</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/2013/12/05/miniprofiler-ravendb-pull-request-accepted/">MiniProfiler RavenDB Pull Request Accepted</a></h2>
  
  <p>
    <p>I just got a notification that my <a href="https://github.com/MiniProfiler/dotnet/pull/15">pull request</a> for
adding RavenDB support to MiniProfiler went through! It&rsquo;s always really cool to see your contributions
get pulled in. The MiniProfiler guys were really easy-going, <a href="https://github.com/yellis">@yellis</a> was even kind enough to take on
the testing. That kind of acceptance for pull requests is great to see because it makes me feel good
about contributing and is a bit less intimidating.</p>




  </p>
  <span class="meta">
    written 








  



<time datetime="2013-12-05T14:32:08+00:00" pubdate data-updated="true">Dec 5<span>th</span>, 2013</time>
    

in
<span class="categories">
  
    <a class='category' href='/blog/categories/github/'>GitHub</a>, <a class='category' href='/blog/categories/oss/'>OSS</a>
  
</span>


  </span>

  
    <a class="full-article-link pull-right" rel="full-article" href="/blog/2013/12/05/miniprofiler-ravendb-pull-request-accepted/">Read on &rarr;</a>
  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/2013/12/05/kamranicus-now-with-100-percent-more-octopress/">Kamranicus: Now With 100% More Octopress</a></h2>
  
  <p>
    <p>I&rsquo;ve just pushed a new version of Kamranicus that is built using the static site generator, <a href="http://octopress.org">Octopress</a>. Octopress uses <a href="http://jekyllrb.com/">Jekyll</a> to generate static sites.</p>




<p>I decided to switch because I can leverage GitHub Pages which are <strong>free</strong> and I can use a custom domain. It&rsquo;s a perfect fit because I can just piggyback on GitHub&rsquo;s cloud hosting for free and not worry about incurring any downtime due to database issues (something that happened more than a few times with the last ASP.NET MVC and SQL-based site).</p>




<p>I really enjoyed setting up Octopress, it was easy to migrate my posts. I highly recommend it! It would be even better to have a .NET/C#-based static site generator that supported all of Jekyll&rsquo;s configuration options, except with Razor-based layouts and templating. Mmmm, that sounds pretty good. Someone get on that.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2013-12-05T05:18:28+00:00" pubdate data-updated="true">Dec 5<span>th</span>, 2013</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/79/just-pushed-blackjack-sample-game">Just Pushed: Blackjack Sample Game</a></h2>
  
  <p>
    <p>It&rsquo;s finally done! I sat down today and dug through my backups to find my original WPF BlackJack game I wrote way back when WPF was really cool. I converted it to VS 2013, made sure it still ran, organized the solution, and hit deploy. It&rsquo;s now up on GitHub for your learning pleasure. There are no Nuget packages here! This was before Nuget where I had to find code to learn from and, ahem, copy. The deck is also something I found online. If I find the source, I&rsquo;ll be sure to attribute it properly.</p>




<p><strong>Code:</strong> <a href="https://github.com/kamranayub/blackjack/">https://github.com/kamranayub/blackjack/</a></p>




<iframe src="//player.vimeo.com/video/5122176" width="500" height="338" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>




<p>This was a sample game I wrote to learn OO design and WPF. There&rsquo;s some cool animations, sound effects, and a pretty fun Blackjack implementation. It&rsquo;s very &ldquo;simple&rdquo; and should be easy to digest. I never got around to implementing all the cool AI but now that it&rsquo;s on GitHub for all to see, maybe someone will pick it up.</p>




<p>I also think it&rsquo;d be fun to port it to Windows 8 C# and XAML. It could be an app I release on the store, free and open source.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2013-12-03T09:09:04+00:00" pubdate data-updated="true">Dec 3<span>rd</span>, 2013</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/78/tccc15-see-you-again-in-april">TCCC15: See You Again in April!</a></h2>
  
  <p>
    <p>Well, that was a blast. Yesterday was <a href="http://twincitiescodecamp.com">TCCC15</a> and it was great. Many awesome sessions, including several by my fellow co-workers <a href="http://twitter.com/ErikOnarhem">Erik Onarheim</a> and <a href="http://twitter.com/StephenErstad">Stephen Erstad</a>.</p>




<p>Thanks to all who attended <a href="/Blog/Posts/77/tccc15-leveling-up-your-windows-phone-app">my talk</a>! I got +10 votes on the code camp speaker site and 9 llamas, which made me feel pretty good!</p>




<p>Please send me feedback at my email or leave a comment here with your thoughts. The code will be available (soon) at <a href="http://github.com/kamranayub/wp-bowling">http://github.com/kamranayub/wp-bowling</a>. It&rsquo;ll be released under an open license but is meant to be educational. The app will also be available soon in the Windows Phone store.</p>




<p>If you missed my talk, you can still get all the bits once I release the app on GitHub. Sure, there won&rsquo;t be droning voice over the code, but you can still see all the steps I took to enhance it.</p>




<p>There was only one big hiccup where Nuget would not install a package, even when I had it in my local repository (it installed the other ones). I remembered some time ago Scott Hanselman mentioning that Nuget packages were just zip files. I quickly changed my Nuget package extension (because I didn&rsquo;t have Nuget Package Explorer installed), got the DLL, and added it as a project reference to quickly save my skin. Thanks Scott!</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2013-10-21T02:11:30+00:00" pubdate data-updated="true">Oct 21<span>st</span>, 2013</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/77/tccc15-leveling-up-your-windows-phone-app">TCCC15: Leveling Up Your Windows Phone App</a></h2>
  
  <p>
    <p>It&rsquo;s talk time again! I&rsquo;m lucky to be giving yet another talk at Twin Cities Code Camp (my second one!). Last time was a lot of fun! This time, we&rsquo;re <a href="/Blog/Posts/66/about-my-web-api-session-at-twin-cities-code-camp">leaving the Web API pasture</a> and exploring the fun world of Windows Phone development.</p>




<p>TCCC15 is October 19 and I&rsquo;ll be <a href="http://twincitiescodecamp.com/TCCC/Fall2013/Schedule.aspx">speaking in Rapson 45 at 2:15pm</a>, so come say hi!</p>




<h2>Why You Should Attend</h2>




<p>If you&rsquo;re an experienced or even a beginning Windows Phone developer, come. If you&rsquo;re still not sure why Windows Phone is cool, come.</p>




<p>The code I&rsquo;ll be showing will start out at a beginner level and move all the way passed intermediate to advanced. By the end, for example, you&rsquo;ll see how to implement a custom message box that fully supports Caliburn binding, dismissal, and the view lifecycle.</p>




<p>Finally, all the code will be available on GitHub soon after (this weekend?). I just need time to remove any secrets and figure out a license that will let me publish the app and own it while still allowing you all to learn from it.</p>




<h2>What We&rsquo;ll Talk About</h2>




<p>I&rsquo;ll be doing a &ldquo;live coding&rdquo; presentation. In reality, I&rsquo;ll be coding and switching to Git branches that showcase the fully completed code then walk through it. The app I&rsquo;ll be presenting is actually a &ldquo;complete&rdquo; app; meaning that it works fine and does everything I need it to. However, anyone whose done app development can tell you that the work isn&rsquo;t done when your app runs and all your tests pass; there&rsquo;s still plenty of work making it &ldquo;production ready.&rdquo; That&rsquo;s what I&rsquo;ll cover in my session!</p>




<p>Right now, my talk is divided into 5 sections covering MVVM, fast resume, logging, about page, and UX improvement. The sections are designed in a way that will expose you to many different parts of my preferred MVVM framework, Caliburn. Along the way, you&rsquo;ll also learn some great tips &amp; tricks I&rsquo;ve found along my journey designing Windows Phone apps.</p>




<p>I&rsquo;m excited because we&rsquo;ll start with the basic premise of an app (which works) and then take it to a production-ready application. Literally, <strong>by the end of the presentation</strong>, I could publish my app to the store and feel good about it.</p>




<p>I hope to see you on Saturday!</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2013-10-17T20:17:14+00:00" pubdate data-updated="true">Oct 17<span>th</span>, 2013</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/76/minnesota-developer-conference-2013-connected-apps">Minnesota Developer Conference 2013: Connected Apps</a></h2>
  
  <p>
    <p><strong>Update:</strong> My session slides are available online at <a href="https://speakerdeck.com/kamranayub/bending-apis-to-your-will-using-windows-phone">SpeakerDeck</a>. If you attended, I hope you enjoyed it!</p>




<p>Will you be attending <a href="http://mdc.ilmservice.com">Minnesota Developer Conference</a>? Come see me at 12:45pm if you want to get jump started with creating connected Windows Phone apps. I&rsquo;ll be talking about how to connect to APIs and useful patterns I&rsquo;ve learned throughout my (limited) development experience. Even if you <em>have</em> developed an app, I hope to share some tips that might help improve your app and it&rsquo;ll definitely provide a jumping off point if you haven&rsquo;t started yet.</p>




<p>My current rehearsals clock in at around a 45 minute presentation which leaves a healthy 30 minutes for questions and seeing any live code, which will be at the audiences&#8217; whim. I&rsquo;ll be walking through a real application I&rsquo;m in the middle of developing so I hope to share some patterns and practices that I&rsquo;ve found useful when developing connected apps like MVVM, Async/Await, offline storage, and more.</p>




<p>See you on Thursday!</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2013-09-24T23:58:10+00:00" pubdate data-updated="true">Sep 24<span>th</span>, 2013</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/75/test-retina-images-without-a-retina-screen">Test Retina Images Without a Retina Screen</a></h2>
  
  <p>
    <p>This comes directly from a tip <a href="https://coderwall.com/p/engjbw">Mike Zarandona posted on Coderwall</a>, which I&rsquo;m posting here to keep track of it:</p>




<hr />




<p>I was sick of borrowing a friend&rsquo;s retina laptop to test retina images. After a little poking around, I discovered a few options baked right into the most popular browsers.</p>




<p>In Google Chrome:</p>




<ul>
<li>Browse to chrome://flags</li>
<li>Search for and enable Force high DPI mode</li>
</ul>




<p>In FireFox:</p>




<ul>
<li>Browse to about:config</li>
<li>Search for layout.css.devPixelsPerPx</li>
</ul>




  </p>
  <span class="meta">
    written 








  



<time datetime="2013-07-26T02:36:22+00:00" pubdate data-updated="true">Jul 26<span>th</span>, 2013</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/74/debounced-after-render-pattern-for-knockoutjs">Debounced After Render Pattern for Knockout.js</a></h2>
  
  <p>
    <p>When dealing with Knockout-based lists, I think the built-in events/callbacks provided by Knockout leave a bit to be desired. For example, a common case I here people complain about is that the <code>afterRender</code> callback for the <code>foreach/template</code> bindings executes for each item in the array, not after all the elements have been rendered.</p>




<p>There are probably better ways to <em>resolve</em> this using Promises (pun intended), but here&rsquo;s one way to attack it using <a href="http://underscorejs.org/docs/underscore.html#section-65">Underscore.js</a>&rsquo;s <code>debounce</code> method that&rsquo;s easy to understand and use.</p>




<p>The <code>debounce</code> method:</p>




<blockquote><p>Returns a function, that, as long as it continues to be invoked, will not be triggered. The function will be called after it stops being called for N milliseconds. If immediate is passed, trigger the function on the leading edge, instead of the trailing.</p></blockquote>




<p>This is useful for high-octane events like rendering elements, window resizing, or capture mouse events.</p>




<p>Here&rsquo;s a Fiddle that demonstrates a way to execute a callback after all the elements in a list have been rendered (and filters them to only <code>li</code> DOM elements):</p>




<iframe width="100%" height="300" src="http://jsfiddle.net/kamranayub/yEhEt/3/embedded/" allowfullscreen="allowfullscreen" frameborder="0"></iframe>




<p>This can be cleaned up multiple ways, I think a cleaner way to implement this would be through resolving a promise and then overriding the <code>foreach</code> and <code>template</code> binding to support it, for example, <code>afterAllRender</code> or something.</p>




<p>But this gets the job done and is easy to implement!</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2013-06-06T00:18:28+00:00" pubdate data-updated="true">Jun 6<span>th</span>, 2013</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/73/slides-and-resources-for-tccc14-web-api-talk">Slides and Resources for TCCC14 Web API Talk</a></h2>
  
  <p>
    <p>I gave a talk this past weekend at Twin Cities Code Camp; it was my first public talk (hopefully the first of many?). It was a deep dive on selected ASP.NET Web API topics (as voted on by the audience) and you can view it on <a href="https://speakerdeck.com/kamranayub/diving-into-the-deep-wih-asp-dot-net">SpeakerDeck</a>.</p>




<p>You can also <a href="http://sdrv.ms/ZgUuGI">download the notes</a> (i.e. links, comments, resources) from my SkyDrive.</p>




<p>If you were there and saw me present, <a href="http://spkr8.com/t/21961">please rate how I did</a>! It&rsquo;s the only way I really have of getting feedback.</p>




<h3>Thoughts</h3>




<p>I thought it went decent for my first talk. I was pretty nervous; I even forgot to say my name&hellip; but whatever! Hopefully by volunteering to do more talks I&rsquo;ll get the hang of it. All those business leadership classes paid off, my friends said that I didn&rsquo;t appear nervous, I projected my voice, and some folks were kind enough to say they liked it which is all I wanted. I also got the largest room right after lunch and it was probably 200 degrees. The Wi-Fi was deathly slow (&lt; 1Mbps) so that didn&rsquo;t help. Next time I&rsquo;ll plan to either take more screenshots or limit the online interaction.</p>




<p>I also think I had too many topics; I knew we couldn&rsquo;t get through all of them but one of my co-workers suggested to scale it down in order to hit specific topics and spend more time on each. It&rsquo;s so hard because they&rsquo;re all great topics to talk about&hellip; I didn&rsquo;t even list content negotiation or automatic documentation.</p>




<p>Overall I was pleased with the outcome; I said what I wanted to say and it was a lot of fun.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2013-04-30T03:39:24+00:00" pubdate data-updated="true">Apr 30<span>th</span>, 2013</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/72/i-was-a-ux-expert-when-i-was-13">I Was a UX Expert When I Was 13</a></h2>
  
  <p>
    <p>I&rsquo;ve been reading Word documents on my computer that I&rsquo;ve had since I was a teen. I&rsquo;ve been keeping them all through my PC upgrades for no particular reason except for times like these when I need to laugh at myself.</p>




<p>I just found this nugget in some random debate outline, I was 13 when I wrote it (I had just started working in web design):</p>




<blockquote><p>Team work, in my opinion, not only involves working with your teammates, but working with your audience to find out what they want. What company does not ask their audience what they want? I don&rsquo;t think many do.</p></blockquote>




<p>Little did I know.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2013-04-26T07:05:48+00:00" pubdate data-updated="true">Apr 26<span>th</span>, 2013</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/71/anecdote-i-frustrate-easily">Anecdote: I Frustrate Easily</a></h2>
  
  <p>
    <p>When I first started my &ldquo;real job&rdquo; where I&rsquo;m at I was put on an internal site. It was a beast, it had a lot of history, and more importantly, it was <strong>damn ugly and sometimes hard to use</strong>. The site was used by developers and no one on the team had much UI experience. I was frustrated. I couldn&rsquo;t work on this thing and have it be ugly, why should we have a tool that gets used every day that&rsquo;s a bear to use? &ldquo;Because it&rsquo;s always been that way&rdquo; wasn&rsquo;t good enough for me. For about a month I worked outside of work, off the sprint, and I re-tooled the CSS, markup, and UX while still maintaining the overall functionality and behavior. No one asked, I just did it <strong>because I was frustrated.</strong> Sure, at some points, people were sort of wondering what the heck I was doing but in the end, everyone loved the changes and everyone keeps mentioning how great the changes have been since. I believe it was also the start of a bigger push to make things easy to use internally but I suppose correlation does not equal causation :)</p>




<p>I think that&rsquo;s what <a href="http://zachholman.com/">Zach Holman</a> means when he says to <a href="https://speakerdeck.com/holman/keeping-people?slide=31">hire people who frustrate easily</a> and that&rsquo;s what triggered this anecdote.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2013-04-25T01:59:46+00:00" pubdate data-updated="true">Apr 25<span>th</span>, 2013</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/70/protip-using-anti-forgery-token-with-aspnet-web-ap">Protip: Using Anti-Forgery Token With ASP.NET Web API on MVC 4 on AppHarbor</a></h2>
  
  <p>
    <p>I just ran into and solved this problem so I thought I&rsquo;d share (I&rsquo;ll also be talking about this at my upcoming talk).</p>




<h3>Anti-Forgery in MVC</h3>




<p>In vanilla MVC, you&rsquo;d do anti-forgery like this in your Razor view:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>@Html.AntiForgeryToken()
</span></code></pre></td></tr></table></div></figure></p>

<p>Then in a controller (POST):</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="na">[ValidateAntiForgeryToken]</span>
</span><span class='line'><span class="k">public</span> <span class="n">ActionResult</span> <span class="nf">DoSomething</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>Cool. But what about Web API? It uses a totally different pipeline and likely you&rsquo;re interacting with it via JQuery or other AJAX framework.</p>




<h3>ValidateHttpAntiForgeryToken</h3>




<p>Here are some references I used when trying to implement Anti-Forgery with Web API:</p>




<ul>
<li><a href="http://stackoverflow.com/questions/11725988/problems-implementing-validatingantiforgerytoken-attribute-for-web-api-with-mvc">Problems implementing ValidatingAntiForgeryToken attribute for Web API with MVC 4 RC</a></li>
<li><a href="http://stackoverflow.com/questions/11476883/web-api-and-validateantiforgerytoken">Web API and ValidateAntiForgeryToken</a></li>
<li><a href="http://www.asp.net/web-api/overview/security/preventing-cross-site-request-forgery-(csrf">Preventing Cross-Site Request Forgery (CSRF) Attacks</a>-attacks)</li>
<li>MVC 4 SPA template</li>
</ul>




<p>Here&rsquo;s the rub: the two SO posts above implement this quite differently than the MVC 4 SPA template and the last article referenced. Both approaches actually worked locally for me, but both failed once I deployed to AppHarbor.</p>




<p>The long and short of it is that I was using the HTTP header <code>__RequestVerificationToken</code>. This is a no-no and I&rsquo;m sort of the dumb one here in that I should <em>know</em> not to use custom headers like that.</p>




<p>My friends, the <em>proper</em> way is to use the <code>X-*</code> convention, so the HTTP header in your AJAX requests become <code>X-XSRF-Token</code> instead.</p>




<p>Apparently, AppHarbor was stripping off the other header on AJAX POST. I was receiving an error about the given header could not be found.</p>




<p>The working solution is below:</p>




<script src="https://gist.github.com/kamranayub/5449779.js"></script>




<p>The <code>machineKey</code> thing is also key to remember on a cloud host/web farm environment.</p>




<p>I hope that helps somebody out there.</p>




<h3>Aside</h3>




<p>In the last article referenced, the <code>AntiForgery.GetTokens()</code> didn&rsquo;t work for me on AH. I kept getting the error:</p>




<pre><code>System.Web.Mvc.HttpAntiForgeryException (0x80004005): The required anti-forgery cookie "__RequestVerificationToken" is not present.
</code></pre>




<p>I didn&rsquo;t get far enough to see what actual cookies were present because I switched to the other method outlined in the two SO posts. I just thought you should know that it just didn&rsquo;t work. I believe it&rsquo;s because <code>GetTokens</code> does not create a new cookie if the <code>cookieToken</code> has a value where as using <code>@Html.AntiForgeryToken()</code> does. The <a href="http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/9a83b63f3f889e3f2c979274fe3e8f7610e06b98#src/System.Web.WebPages/Helpers/AntiXsrf/AntiForgeryWorker.cs">source code</a> makes that clear in the comments. Why it worked locally I have no idea and at this point, don&rsquo;t care!</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2013-04-24T10:14:06+00:00" pubdate data-updated="true">Apr 24<span>th</span>, 2013</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/69/put-the-cloud-to-work-pt-1-create-a-background-wor">Put the Cloud to Work, Pt 1: Create a Background Worker Using Quartz.NET</a></h2>
  
  <p>
    <p>I&rsquo;ve written a [long] article for Tech.pro on <a href="http://tech.pro/tutorial/1222/put-the-cloud-to-work-pt-1-create-a-background-worker-using-quartznet">how to use Quartz.NET to build an end-to-end background worker on AppHarbor</a>.</p>




<p>I plan to write a couple more follow-ups about more advanced usage of Quartz with a pretty big finale (I don&rsquo;t want to get anyone&rsquo;s hopes up though).</p>




<p>Some fun stats:</p>




<ul>
<li>~5300 words</li>
<li>~40 hours of work</li>
<li>~40 pages in PDF</li>
</ul>




<p>It seems longer than it is; most of it is code snippets and pictures but it takes about 20 minutes to read and about 45-60 minutes to work through (follow along).</p>




<p>I marked it as a Beginner tutorial and as such went into a lot of detail I wouldn&rsquo;t normally spend time on if it was just a blog post. I find writing formal articles forces me to verify what I know (or I think I know), explore alternatives, and do a deep-dive into whatever topic I want to talk about. It&rsquo;s mostly driven by fear: fear of being wrong, fear of being humiliated, fear of what other people think. Writing about a topic forces you to learn about things you maybe thought you knew but didn&rsquo;t really. I also believe it helps you become better at teaching others; if you can&rsquo;t explain what you know, do you really know it? At it&rsquo;s core, it&rsquo;s just good exercise!</p>




<p>I chose tech.pro because I like what they&rsquo;re trying to do, I like that they&rsquo;re open with development, and I also like the cash prize if your article is the top in its category ($1000). I also like that they don&rsquo;t &ldquo;own&rdquo; your content; you&rsquo;re free to post it to other venues and it&rsquo;s your own work. I think it already has some great tutorials, including ones by someone I follow regularly, <a href="http://tech.pro/filipw/blog">Filip W</a>.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2013-04-23T23:02:22+00:00" pubdate data-updated="true">Apr 23<span>rd</span>, 2013</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/68/upcoming-events-rwd-workshop-code-camp-and-dotnetc">Upcoming Events: RWD Workshop, Code Camp, and dotNetConf [Updated]</a></h2>
  
  <p>
    <p>Just a quick set of FYIs. I will be attending 3 upcoming events, two in-person and one virtually.</p>




<h3>RWD Workshop with Tim Kadlec</h3>




<p><a href="http://timkadlec.com">Tim Kadlec</a> is a cool guy; he&rsquo;s also one of the RWD gurus and has lots to share. He&rsquo;s <a href="http://timkadlec.com/2013/04/implementing-responsive-design-workshop/">hosting a 30 person workshop</a> at the U of MN, so it&rsquo;ll be a small group of people that will be sharing RWD experiences. I&rsquo;m attending, and if prodded, I will share my experience implementing RWD on some big sites (hint: it&rsquo;s challenging).</p>




<h3>Code Camp</h3>




<p><a href="http://twincitiescodecamp.com">Twin Cities Code Camp</a> is a free conference put together by local volunteers and is a great event to go to if you like to see people&rsquo;s code or share your own. I will be <a href="/Blog/Posts/66/about-my-web-api-session-at-twin-cities-code-camp">talking about Web API</a> and opening up my closed-source project (Keep Track of My Games v2) for all to see. It&rsquo;s going to be interesting, for sure.</p>




<h3>dotNetConf</h3>




<p><a href="http://dotnetconf.net">dotNetConf</a> is a free virtual conference on all things .NET. I&rsquo;ll be attending a couple sessions at least and there&rsquo;s nothing to lose by attending. Be sure to check it out!</p>




<h3>Hack for MN</h3>




<p><a href="http://hackformn.eventbrite.com/">HackForMN</a> is for the National Day of Civic Hacking but for us Minnesotans. A handful of friends are going and I think there&rsquo;s probably a good app or two for The Land of Ten Thousand Lakes worth making.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2013-04-18T19:38:02+00:00" pubdate data-updated="true">Apr 18<span>th</span>, 2013</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/67/ive-released-my-first-windows-phone-app-centwise">I&#8217;ve Released My First Windows Phone App: Centwise</a></h2>
  
  <p>
    <p>I&rsquo;m excited to talk about my latest project that just went live a couple weeks ago: <a href="http://centwiseapp.com">Centwise</a>. Centwise is a Windows Phone 7 &amp; 8 app client for a service that I use regularly, <a href="http://splitwise.com">Splitwise</a>.</p>




<p>You can download the app to your Windows Phone below:</p>




<p><a href="http://bit.ly/getcentwise"><img src="http://media.tumblr.com/410b39b16d0c759db1cbda923e968f91/tumblr_inline_mjvfbsUlMF1qz4rgp.png" alt="Get the app" /></a></p>




<h2>What&rsquo;s Splitwise?</h2>




<p><a href="http://splitwise.com">Splitwise</a> is a web app that lets you manage IOUs and bill splitting. I use it day-to-day during outings with friends but mainly I use it to keep track of bills and household expenses between me, my fiancee, and our roommate. It&rsquo;s a great tool and they provide native apps for iOS and Android. When I started Centwise, they didn&rsquo;t have a WP app and I figured as an avid user of the service, my first app could be a Splitwise client.</p>




<p>I really want to thank the Splitwise team (Jon &amp; Ryan!) for helping me out, answering questions, and for mentioning Centwise on their blog.</p>




<h2>First app experience</h2>




<p>I bought a HTC 8X when it was announced on Verizon day one. I knew I wanted to leave my old Droid Incredible in the dust and move on to greener pastures. Being a Microsoft stack guy, I figured Windows Phone would be good not only because I like the interface and experience but also because I could make some apps for the platform.</p>




<p>In the past, I&rsquo;ve worked with WPF and XAML before, so learning the ins and outs of the pared-down Silverlight for Windows Phone wasn&rsquo;t too terrible but there were certainly roadblocks. I&rsquo;ve tried to bookmark every article or post I came across that helped me out, which I&rsquo;ll share at the end. Coming from a primarily web-based focus to a native XAML/C# platform was certainly jarring and there were times I slammed my hands on the keyboard exclaiming, &ldquo;THIS WOULD BE WAY EASIER IN CSS AND HTML!&rdquo; Like making a transparent button, for example.</p>




<p>I hope to go more in detail with certain issues as well as share some tips and tricks I learned along my journey to building my first app. There can be a lot of crazy things you wouldn&rsquo;t know XAML can do if you didn&rsquo;t spend time deconstructing bigger open-source libraries (which I <em>highly</em> recommend, I often kept <a href="http://phone.codeplex.com">Phone Toolkit</a> open alongside my own app to see how they built controls).</p>




<h2>The beginnings</h2>




<p>All apps have a beginning. Mine began on paper using the <a href="http://www.flickr.com/photos/michaeldorian/5071511857/">excellent paper templates</a> provided by Michael Bach.</p>




<p>Here are the paper sketches I made that helped me form the screens for the app. I spent most of my time sketching the more complex pages, the ones that needed to do or show a lot of stuff but where I wanted to keep it as simple as possible.</p>




<iframe src="https://skydrive.live.com/embed?cid=0E21D632E0E57AEE&resid=E21D632E0E57AEE%2136892&authkey=ACGYGiJBJeURBfk" width="320" height="180" frameborder="0" scrolling="no"></iframe>




<iframe src="https://skydrive.live.com/embed?cid=0E21D632E0E57AEE&resid=E21D632E0E57AEE%2136893&authkey=AEr0Ed2bQzMJx54" width="320" height="180" frameborder="0" scrolling="no"></iframe>




<iframe src="https://skydrive.live.com/embed?cid=0E21D632E0E57AEE&resid=E21D632E0E57AEE%2136894&authkey=APrH1Wua6J8fLJU" width="320" height="180" frameborder="0" scrolling="no"></iframe>




<p>I&rsquo;ve found it helpful to do these types of sketches to help me visualize the UI. It also helps me see immediately whether or not my idea makes sense.</p>




<p>From there, I could start working on the XAML and the screens to put my ideas into the app. However, as you&rsquo;ll soon see, my first ideas usually weren&rsquo;t the best.</p>




<h2>Optimizing the UX</h2>




<iframe src="https://skydrive.live.com/embed?cid=0E21D632E0E57AEE&resid=E21D632E0E57AEE%2136892&authkey=ACGYGiJBJeURBfk" width="320" height="180" frameborder="0" scrolling="no"></iframe>




<p>If you look at the first image, you can see that my initial idea when creating expenses was to display a list of people to choose from. In fact, pre-1.0 that is exactly what I had done. The flow looked like this:</p>




<ol>
<li>User specifies &ldquo;Create an IOU&rdquo;</li>
<li>User chooses other person or chooses from address book</li>
<li>User is shown IOU screen</li>
</ol>




<p>This was pretty straightforward&hellip; after all, there are only 3 steps. But that was one step too many. It also ended up complicating my code quite a bit due to managing the back stack (i.e. what happens when a user cancels or hits &lsquo;Back&rsquo;).</p>




<p>In the final 1.0 release, I changed it to be easier and faster:</p>




<ol>
<li>User chooses to create an IOU</li>
<li>User is shown screen and either a) the other person is already populated or b) user can tap the avatar placeholder to choose someone</li>
</ol>




<p>That&rsquo;s just one example of a change I had made that was different from my first implementation.</p>




<p>If you take a look at the second set of sketches, you can see I drastically changed how the IOU (and other) screens were laid out.</p>




<iframe src="https://skydrive.live.com/embed?cid=0E21D632E0E57AEE&resid=E21D632E0E57AEE%2136893&authkey=AEr0Ed2bQzMJx54" width="320" height="180" frameborder="0" scrolling="no"></iframe>




<iframe src="https://skydrive.live.com/embed?cid=0E21D632E0E57AEE&resid=E21D632E0E57AEE%2136609&authkey=AOWlC2tQqkFVW_A" width="180" height="320" frameborder="0" scrolling="no"></iframe>




<p>Here are just some of the changes I made:</p>




<ol>
<li>Instead of a button, I created a <code>CalculatorTextBox</code> that combines a calculator and amount textbox into one.</li>
<li>This was huge because it also greatly simplified the UI of the Divide a Bill screen</li>
<li>Moved the currency button to the appbar menu items because it&rsquo;s not something a user will typically use often.</li>
<li>Made the static arrow shown between avatars a button to easily swap people in case the user made a mistake</li>
</ol>




<h2>Easy but not simple</h2>




<p>Someone wise once said:</p>




<blockquote><p>Making things easy is <em>hard</em>.</p></blockquote>




<p>That&rsquo;s been true with everything I&rsquo;ve ever had the pleasure to work on. Easy is hard.</p>




<p>I didn&rsquo;t have any formal beta testers, mainly because the Windows Phone Dev Center didn&rsquo;t let me (<em>sigh</em>), but that didn&rsquo;t stop me from showing it to friends and family to have them test it out.</p>




<p>The core implementation of the app is pretty simple&hellip; it&rsquo;s all the extra work I had to put in to make the <em>app</em> simple that wasn&rsquo;t easy. Not only was it my first time trying to learn Windows Phone development, I also have a tendency to spend a lot of time on little things.</p>




<iframe src="https://skydrive.live.com/embed?cid=0E21D632E0E57AEE&resid=E21D632E0E57AEE%2136736&authkey=AI7_LBxzEW-9MkM" width="180" height="320" frameborder="0" scrolling="no"></iframe>




<p>For example, let&rsquo;s consider the &ldquo;people picker&rdquo; functionality. When a user wants to choose people to add to the expense, there&rsquo;s more logic than simply &ldquo;show the user&rsquo;s friends&rdquo;. The control actually does several things:</p>




<ol>
<li>If the user adds an expense type in the context of a group, then the picker shows the people in that group first.</li>
<li>If the user divides a bill from the home screen, the picker shows available groups which:</li>
<li>Automatically adds all the people in that group to the bill</li>
<li>Sets the &ldquo;filed in&rdquo; value to the group they chose, regardless of the context the user was in (home screen vs. group)</li>
<li>Makes sure not to show people already added to the expense</li>
<li>Let&rsquo;s the user choose someone from the address book (but not for payments!)</li>
</ol>




<p>I use this people picker anywhere I need to, including when creating a group. By reusing the same experience, the user never has to learn a new way of picking people.</p>




<p>There&rsquo;s just a ton of little things like that throughout the app that the user probably won&rsquo;t ever notice but I hope surfaces in the form of, &ldquo;Hey, this is easy to use!&rdquo;. I didn&rsquo;t want the app to get in the way of the user doing whatever they needed to do.</p>




<p>I cannot count the amount of hours I&rsquo;ve spent so far, although I tried to keep track at first but once I hit 60+ hours in less than a week, I stopped. Luckily, GitHub has a great visualization of how often I worked the app:</p>




<p><strong>Commit Activity</strong></p>




<p><img src="/blog/images/72.png" alt="I am insane" /></p>




<p>Let me break it down for you: I am insane.</p>




<p><img src="/blog/images/73.png" alt="Seriously, insane" /></p>




<p>You can forgive me if I plan to take it a bit slower with updates. I was hoping to finish in time for the Next App Star challenge but unfortunately even spending countless hours during the week, the app just wasn&rsquo;t in a good state in time for that deadline.</p>




<h2>What&rsquo;s next?</h2>




<p>I hope to go into more technical detail around some of the things I did with my app at a later point. I was really excited to learn how to build a Windows Phone app and am very pleased with the result. I didn&rsquo;t build it expecting to make thousands of dollars; I&rsquo;ll be lucky (and happy) if I break $500 but making it a paid-for app motivates me as a single developer to keep the app up-to-date and full of useful features. I have personal projects and open projects that eat up time that I need to make sure I can support each one of them.</p>




<p>As far as what I have planned, you can keep tabs on <a href="http://centwiseapp.com">CentwiseApp.com</a> or follow Centwise on <a href="http://twitter.com/centwiseapp">Twitter</a> or <a href="http://facebook.com/centwise">Facebook</a>. I hope to do a UI refresh soon and I have about 20+ enhancements to incrementally add. I already released the <a href="http://centwiseapp.com/post/46850512483/update-v1-1-will-be-available-today">1.1 update</a> that added several new features, so that&rsquo;s a good start!</p>




<h2>Resources</h2>




<p>Here are all my bookmarks currently under my Windows Phone folder:</p>




<ul>
<li><a href="http://www.windowsphone.com/en-us/store/app/centwise/faeb5f7b-fbb6-41c6-8fac-17d81dae703d">Centwise | Windows Phone Apps+Games Store (United States)</a></li>
<li><a href="http://bartwullems.blogspot.com/2012/08/caliburnmicro-design-time-support.html">The art of simplicity: Caliburn.Micro: Design time support</a></li>
<li><a href="http://elegantcode.com/2009/04/07/wpf-stringformat-in-xaml-with-the-stringformat-attribute/">Elegant Code » WPF String.Format in XAML with the StringFormat attribute</a></li>
<li><a href="http://blogs.msdn.com/b/pfxteam/archive/2010/11/21/10094564.aspx">Processing Sequences of Asynchronous Operations with Tasks &ndash; .NET Parallel Programming &ndash; Site Home &ndash; MSDN Blogs</a></li>
<li><a href="http://www.windowsphonegeek.com/articles/Implementing-Windows-Phone-7-DataTemplateSelector-and-CustomDataTemplateSelector">Implementing Windows Phone 7 DataTemplateSelector and CustomDataTemplateSelector | WindowsPhoneGeek</a></li>
<li><a href="http://www.jeff.wilcox.name/2011/07/creating-a-global-progressindicator-experience-using-the-windows-phone-7-1-sdk-beta-2/">Jeff Wilcox – Creating a global ProgressIndicator experience using the Windows Phone 7.1 SDK Beta 2</a></li>
<li><a href="http://danielvaughan.orpius.com/post/Binding-the-WP7-ProgressIndicator-in-XAML.aspx">Daniel Vaughan | Binding the WP7 ProgressIndicator in XAML</a></li>
<li><a href="http://cyberherbalist.wordpress.com/2011/03/20/addingremoving-appbar-buttons-on-the-fly/">Adding/Removing AppBar Buttons on the fly « Cyberherbalist&#39;s Blog</a></li>
<li><a href="http://weblogs.asp.net/dotjosh/archive/2009/11/05/bringintoview-extension-method-for-silverlight-with-behavior.aspx">Silverlight BringIntoView() extension method (with OnGotFocus behavior) &ndash; Josh Schwartzberg high-fives the CLR</a></li>
<li><a href="http://blogs.msdn.com/b/jaimer/archive/2010/11/23/working-with-gif-images-in-windows-phone.aspx">Working with GIF images in Windows Phone &ndash; Jaime Rodriguez &ndash; Site Home &ndash; MSDN Blogs</a></li>
<li><a href="http://compiledexperience.com/blog/posts/wp7-context-menus-with-caliburn-micro">WP7 Context Menus with Caliburn Micro &ndash; Compiled Experience &ndash; Freelance Windows 8 and Windows Phone Application Development</a></li>
<li><a href="http://caliburnmicro.codeplex.com/">Caliburn Micro: WPF, Silverlight, WP7 and WinRT/Metro made easy. &ndash; Home</a></li>
<li><a href="http://blog.falafel.com/blogs/josh-eastburn/2011/09/16/silverlight_listbox_add_and_remove_animations">Silverlight ListBox Add and Remove Animations</a></li>
<li><a href="http://blogs.msdn.com/b/bclteam/archive/2012/10/22/using-async-await-without-net-framework-4-5.aspx">Using async/await without .NET Framework 4.5 &ndash; BCL Team Blog &ndash; Site Home &ndash; MSDN Blogs</a></li>
<li><a href="http://www.scottlogic.co.uk/blog/colin/2011/05/metro-in-motion-part-4-tilt-effect/">Metro In Motion Part #4 – Tilt Effect | Colin Eberhardt&#39;s Technology Adventures</a></li>
<li><a href="http://blogs.msdn.com/b/pfxteam/archive/2011/09/28/10217876.aspx">Task Exception Handling in .NET 4.5 &ndash; .NET Parallel Programming &ndash; Site Home &ndash; MSDN Blogs</a></li>
<li><a href="http://social.msdn.microsoft.com/Forums/en-US/async/thread/b536336f-812a-4227-8abe-fd123df49fc1">good way to cancel async method</a></li>
<li><a href="http://msdn.microsoft.com/en-us/library/dd537607.aspx">How to: Cancel a Task and Its Children</a></li>
<li><a href="http://msdn.microsoft.com/en-us/library/dd997364.aspx">Cancellation in Managed Threads</a></li>
<li><a href="http://msdn.microsoft.com/en-us/library/dd997396.aspx">Task Cancellation</a></li>
<li><a href="http://blogs.msdn.com/b/fiddler/archive/2010/10/15/fiddler-and-the-windows-phone-emulator.aspx">Fiddler and the Windows Phone 7 Emulator &ndash; Fiddler Web Debugger &ndash; Site Home &ndash; MSDN Blogs</a></li>
<li><a href="http://www.silverlightplayground.org/post/2009/07/10/Silverlight-30-RTW-The-CollectionViewSource.aspx">Silverlight 3.0 RTW: The CollectionViewSource</a></li>
<li><a href="http://windowsphonegeek.com/tips/how-to-search-for-a-contact-and-get-contact-picture-in-windows-phone">How to: Search for a Contact and get Contact Picture in Windows Phone | WindowsPhoneGeek</a></li>
<li><a href="http://www.silverlightshow.net/items/Windows-Phone-7-Part-3-Understanding-navigation.aspx">Windows Phone 7 &ndash; Part #3: Understanding navigation</a></li>
<li><a href="http://blogs.msdn.com/b/ptorr/archive/2010/08/28/redirecting-an-initial-navigation.aspx">Redirecting an initial navigation &ndash; Peter Torr&#39;s Blog &ndash; Site Home &ndash; MSDN Blogs</a></li>
<li><a href="http://blogs.claritycon.com/windowsphone7/">Clarity on Windows Phone 7</a></li>
<li><a href="http://msdn.microsoft.com/en-us/library/hh487164(v=VS.92">How to: Encrypt Data in a Windows Phone Application</a>.aspx)</li>
<li><a href="http://multitouch.codeplex.com/">Windows Phone, Silverlight and WPF Multi-Touch Manipulations &ndash; Home</a></li>
<li><a href="http://msdn.microsoft.com/en-us/expression/ff624123.aspx">Dynamic Layout and Transitions in Expression Blend 4</a></li>
<li><a href="http://blogs.claritycon.com/blog/2011/02/silverlight-4-property-triggers/">Silverlight 4 Property Triggers | Clarity Blogs</a></li>
<li><a href="http://expressionblend.codeplex.com/">Expression Blend Samples &ndash; Home</a></li>
<li><a href="http://jacob4u2.blogspot.com/2011/02/silverlight-4-property-triggers.html">Jacob Gable: Silverlight 4 Property Triggers</a></li>
<li><a href="http://www.codeproject.com/Articles/150166/Loading-Data-when-the-User-Scrolls-to-the-End-of-a">Loading Data when the User Scrolls to the End of a List in Windows Phone 7 &ndash; CodeProject</a></li>
<li><a href="http://blogs.msdn.com/b/expression/archive/2010/03/16/dynamic-layout-and-transitions-in-expression-blend-4.aspx">Dynamic Layout and Transitions in Expression Blend 4 &ndash; Expression Blend and Design &ndash; Site Home &ndash; MSDN Blogs</a></li>
<li><a href="http://msdn.microsoft.com/id-id/library/windowsphone/develop/jj206997(v=vs.105">How to target multiple versions with your app for Windows Phone</a>.aspx#linked_projects)</li>
<li><a href="http://msdn.microsoft.com/library/windowsphone/design/jj662929(v=vs.105">Tile design guidelines for Windows Phone</a>.aspx)</li>
<li><a href="http://msdn.microsoft.com/en-US/library/windowsphone/develop/jj206974(v=vs.105">Multi-resolution apps for Windows Phone 8</a>.aspx)</li>
<li><a href="http://www.codeproject.com/Articles/412435/Logging-exceptions-of-Windows-Phone-applications-t">Logging exceptions of Windows Phone applications to a central server with the help of FogBugz &ndash; CodeProject</a></li>
<li><a href="http://blogs.msdn.com/b/priozersk/archive/2010/09/20/creating-progress-dialog-for-wp7.aspx">Creating Progress Dialog for WP7. &ndash; Alex Yakhnin&#39;s Blog &ndash; Site Home &ndash; MSDN Blogs</a></li>
<li><a href="http://dotnetapp.com/blog/2012/05/21/how-to-fix-the-standard-header-of-a-pivot-control-using-a-style-and-how-to-fix-a-page-using-the-titlecontrol/">How to fix the standard header of a pivot control using a style and how to fix &ndash; ge using the TitleControl » .NET App</a></li>
<li><a href="http://nikovrdoljak.wordpress.com/2012/02/20/how-to-crash-other-wp7-applications/">How to crash other WP7 applications? | Niko Vrdoljak&#39;s Blog</a></li>
<li><a href="http://mikaelkoskinen.net/wp7-splitting-application-to-multiple-assemblies-when-using-caliburn-micro">WP7: Splitting Application to Multiple Assemblies when using Caliburn.Micro &ndash; Mikael Koskinen</a></li>
<li><a href="http://blogs.msdn.com/b/ptorr/archive/2011/07/11/background-agents-part-1-of-3.aspx">Background Agents &ndash; Part 1 of 3 &ndash; Peter Torr&#39;s Blog &ndash; Site Home &ndash; MSDN Blogs</a></li>
<li><a href="http://www.nachmore.com/talks/">Oren Nachman » Talks</a></li>
<li><a href="http://sterling.codeplex.com/">Sterling NoSQL OODB for .NET 4.0, Silverlight 4 and 5, and Windows Phone 7 &ndash; Home</a></li>
<li><a href="http://msdn.microsoft.com/en-us/magazine/hh205658.aspx">MSDN Magazine: Windows Phone 7 &ndash; Sterling for Isolated Storage on Windows Phone 7</a></li>
<li><a href="http://modernuiicons.com/">Modern UI Icons</a></li>
<li><a href="http://blog.humann.info/post/2011/08/28/Save-disk-space-with-IsolatedStorageGZipFileStream.aspx">Nicolas Humann | Save disk space with IsolatedStorageGZipFileStream</a></li>
<li><a href="http://msdn.microsoft.com/en-us/library/hh821020.aspx">Using Isolated Storage on the Phone</a></li>
<li><a href="http://channel9.msdn.com/Events/Build/2012/3-045">Windows Phone 8: Critical Developer Practices for Delivering Outstanding Apps | Build 2012 | Channel 9</a></li>
<li><a href="http://blogs.claritycon.com/windowsphone7/2011/01/wicked-wireframes-wp7-vector-ux-kit-3/">» Wicked Wireframes: WP7 Vector UX Kit on Windows Phone 7</a></li>
<li><a href="http://www.flickr.com/photos/michaeldorian/5071511857/">Windows Phone 7 Wireframe Paper Sketching Template | Flickr &ndash; Photo Sharing!</a></li>
<li><a href="http://www.jeff.wilcox.name/2012/01/jeffwilcox-maps/">Jeff Wilcox – Displaying static maps on the Windows Phone for performance and scenario wins</a></li>
<li><a href="http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff769542(v=vs.105">Launchers and Choosers for Windows Phone</a>.aspx)</li>
<li><a href="http://usdpe.ohours.org/">People Hosting Open Office Hours</a></li>
<li><a href="http://iconmonstr.com/">iconmonstr &ndash; Free simple icons for your next project</a></li>
</ul>




  </p>
  <span class="meta">
    written 








  



<time datetime="2013-04-12T03:47:42+00:00" pubdate data-updated="true">Apr 12<span>th</span>, 2013</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/66/about-my-web-api-session-at-twin-cities-code-camp">About My Web API Session at Twin Cities Code Camp</a></h2>
  
  <p>
    <p><strong>Update:</strong> I&rsquo;ll be in the 12:45pm track, come see me crash and burn!</p>




<p>Yay! I was just informed by TCCC that I&rsquo;ve made it onto the <a href="http://twincitiescodecamp.com/TCCC/Spring2013/Sessions.aspx#s22">Sessions list</a> so I guess I&rsquo;m officially a speaker. This would be the very first time I&rsquo;m giving a public talk <em>on my own</em>. I was part of a session at MinneWebCon when I spoke about my work on the Student Unions &amp; Activities touch-screen directory, so I have <em>at least</em> 15 minutes under my belt.</p>




<h3>Session? Or Presentation?</h3>




<p>Presentation is a strong and loaded word. It brings to mind a boring PowerPoint slideshow of stuff no one ever reads. It brings to mind a stale &ldquo;I&rsquo;m going to talk at you&rdquo; type of feeling, where the &ldquo;participants&rdquo; aren&rsquo;t actually participating.</p>




<p>No, my session at TCCC is not like that. I did a 20 minute version of the session at work and it went well, though I didn&rsquo;t have much time to dive into real code, which is definitely what I plan to do at TCCC&hellip; after all, it is a <strong>code camp</strong>. I will be showing some information about the topics I cover but other than that, we will be diving into the bowels of my app&hellip; for better or worse.</p>




<h3>ASP.NET Web API: What now?</h3>




<p>I&rsquo;ve been using Web API for a bit, it&rsquo;ll be a core part of the next <a href="http://keeptrackofmygames.com">Keep Track of My Games</a>. In fact, the beta version of KTOMG will be what I will use to demo all my code and ideas.</p>




<p>I&rsquo;m not an expert on it. I&rsquo;m not even &ldquo;great&rdquo; at it. I&rsquo;m just a regular developer who is using it on a real project and I&rsquo;ve run into &ldquo;real&rdquo; issues. The main reason I wanted to do a session on Web API is because of a few reasons:</p>




<ol>
<li>Web API is awesome and everyone should know about it</li>
<li>Some things aren&rsquo;t apparent when you&rsquo;re starting out doing API development</li>
<li>Most presentations on Web API are cursory overviews</li>
<li>It can be hard to know what the &ldquo;right way&rdquo; to do things is</li>
</ol>




<p>Regarding #4, this is a hard thing to talk about&hellip; since I still don&rsquo;t know &ldquo;what the right way&rdquo; is and I think it depends on your situation. However, at the very least, I can tell you <em>what I did</em> and <em>what works for me</em> and maybe you can leave the session with a better idea of what it is you want to do.</p>




<h3>So what&rsquo;s on the agenda?</h3>




<p>Lots of stuff, and I&rsquo;m sure we won&rsquo;t get to a lot of it:</p>




<ul>
<li>Debugging tips</li>
<li>CSRF prevention</li>
<li>Custom routing (w/client-side)</li>
<li>Custom error handling</li>
<li>Integration with the client-side</li>
<li>Working with multiple clients (phone, Windows 8, etc.)</li>
<li>Versioning</li>
<li>Async actions</li>
</ul>




<p>There&rsquo;ll be plenty to show and plenty more to discuss. I&rsquo;m more interested in seeing what others have done or would recommend.</p>




<p>I&rsquo;m pretty excited, so I&rsquo;ll see you April 27!</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2013-03-06T02:59:46+00:00" pubdate data-updated="true">Mar 6<span>th</span>, 2013</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/64/bindableappbar-for-caliburn-micro">BindableAppBar for Caliburn Micro</a></h2>
  
  <p>
    <p><strong>Update:</strong> Matteo Pagani has a <a href="http://wp.qmatteoq.com/first-steps-with-caliburn-micro-the-application-bar/">great introduction</a> on setting up the BindableAppBar. Thanks Matteo!</p>




<p>Anyone who has done Windows Phone development will tell you: the appbar sucks.</p>




<p>It sucks for several reasons:</p>




<ul>
<li>It&rsquo;s not a <code>DependencyObject</code> so you can&rsquo;t use binding</li>
<li>It doesn&rsquo;t support commands</li>
<li>It&rsquo;s hard to make it dynamic because it must be maniuplated in code</li>
<li>It sucks</li>
</ul>




<p>Given those reasons, it&rsquo;s no surprise people have come up with &ldquo;bindable app bars&rdquo; that are basically wrappers around the appbar that allow binding, manipulation, and such.</p>




<p>Unfortunately, none of those solutions have come to Caliburn. Caliburn <em>does</em> provide basic message binding support and IsEnabled guarding, but that&rsquo;s it.</p>




<p>So, given that I <strong>really</strong> wanted to start binding some appbars hardcore, I decided to spend a day and make it happen.</p>




<p><strong>Introducing the Caliburn.Micro.BindableAppBar</strong>: you can enjoy the fruits of my labor on <a href="https://nuget.org/packages/Caliburn.Micro.BindableAppBar/">Nuget</a> or at the <a href="https://github.com/kamranayub/CaliburnBindableAppBar">GitHub</a> repository. Here&rsquo;s hoping Rob brings this into core so it&rsquo;ll just &ldquo;be there&rdquo; and integrated more into the overall Caliburn system.</p>




<p>The big benefit is the ability to easily use multiple appbars on a single view <strong>and</strong> in conducted Pivot/Panorama views. In my case, I do both, because one pivot page has two states (a selection state and a browsing state) and both requires two different appbars. The other pivot page doesn&rsquo;t need all the cruft of the first pivot&rsquo;s appbar, so only one button is present on it.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2013-03-06T01:07:28+00:00" pubdate data-updated="true">Mar 6<span>th</span>, 2013</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/65/i-forked-fastjson">I Forked fastJSON</a></h2>
  
  <p>
    <p>My Windows Phone app mainly deals with talking to a web API. I&rsquo;ve previously had good experience using RestSharp but now with the new <code>async/await</code> features, I&rsquo;ve been trying to only use <code>Task</code>-based stuff. I gotta say, I&rsquo;m loving it.</p>




<p>RestSharp for WP does not natively support async/await but you can wrap it yourself. However, why not just use <code>HttpClient</code>? So that&rsquo;s what I did. I ripped out RestSharp and replaced it with <a href="https://github.com/neuecc/AsyncOAuth">AsyncOAuth</a> (which depends on HttpClient).</p>




<p>Besides OAuth, the other issue you&rsquo;ll run into is what serializer/deserializer to use. You could go with JSON.NET, or ServiceStack, but those are two extremes&hellip; one being very flexible and other being very inflexible. I needed an in-between but also something very fast and that&rsquo;s exactly what <a href="http://www.codeproject.com/Articles/159450/fastJSON">fastJSON</a> is.</p>




<p>Of course, it&rsquo;s fast because of the same reason SS is fast: it doesn&rsquo;t do any fancy property matching. When you&rsquo;re dealing with APIs, it&rsquo;s rare that the response they send back matches exactly with your object model and properties (especially C#). That&rsquo;s why the name variance feature of the larger libraries is awesome.</p>




<p>So, I did what any good developer would, I dug in and added it. I also added <code>rootElement</code> support (for contained responses).</p>




<p>You can find my changes in my <a href="https://github.com/kamranayub/fastJSON">fastJSON fork</a> on GitHub. I also went ahead and organized the solution a bit, as the original source was a bit hard to get running. I also created a Nuget package for my changes and pushed that (<a href="https://nuget.org/packages/fastJSON-kayub">fastJSON-kayub</a>).</p>




<p>I don&rsquo;t necessarily intend to keep my changes in-sync. It would be preferable if my changes were pulled into the original&hellip; and it wouldn&rsquo;t hurt to use my new organization (since it&rsquo;s easy for others to pull down and build), but if that never happens, I&rsquo;m fine with that.</p>




<h3>Note on Name Variance</h3>




<p>The name variance is interesting. In R#, the code was written to <code>yield return</code> each variant so as soon as one matches, it returns. In fastJSON, the matching is done in the opposite direction, fastJSON will try to match the JSON key to an object&rsquo;s properties&hellip; so it makes it difficult to use what R# had written originally. I modified the code to allow for optional variant matching to speed things up. Without that, the name variance increased deserialization time by <strong>a ton</strong>. However, in my case, I really only needed ProperCase matching&hellip; which only increases the time by about 2x.</p>




<p>That&rsquo;s why I made the decision to opt-out of name variance by default and when enabled, only enable ProperCase by default as that&rsquo;s probably the most common.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2013-03-05T23:00:00+00:00" pubdate data-updated="true">Mar 5<span>th</span>, 2013</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/62/renderroutes-expose-your-routes-to-your-javascript">RenderRoutes: Expose Your Routes to Your Javascript</a></h2>
  
  <p>
    <p>When you&rsquo;re working on an AJAX-enabled application, you&rsquo;ll soon discover it can be a pain to manage URLs. In fact, when you&rsquo;re working with ASP.NET MVC in general, working with routes is a pain. As soon as you want to change one, you have to go and find everywhere it&rsquo;s used.</p>




<p>I came up with a solution that works well for me and may for you.</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="c1">// Are you writing code like this?</span>
</span><span class='line'><span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span> <span class="nx">url</span><span class="o">:</span> <span class="s2">&quot;/products/&quot;</span> <span class="o">+</span> <span class="nx">productId</span> <span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// Wouldn&#39;t you rather write this?</span>
</span><span class='line'><span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span> <span class="nx">url</span><span class="o">:</span> <span class="nx">Router</span><span class="p">.</span><span class="nx">url</span><span class="p">(</span><span class="s2">&quot;product&quot;</span><span class="p">,</span> <span class="nx">productId</span><span class="p">)</span> <span class="p">});</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>In MVC, you have the notion of &ldquo;named&rdquo; routes, like this:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="n">routes</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="k">new</span> <span class="p">{</span> <span class="n">RouteName</span> <span class="p">=</span> <span class="s">&quot;product&quot;</span><span class="p">,</span> <span class="n">Url</span> <span class="p">=</span> <span class="s">&quot;product/{productId}&quot;</span> <span class="p">});</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>(<em>Side Protip: <a href="http://kamranicus.com/Blog/Posts/23/mvc-pro-tip-dont-use-the-id-url-parameter-in-your">Don&rsquo;t use &ldquo;{id}&rdquo; in MVC routes</a></em>)</p>




<p>However, in the default MVC world, you would need to create these entries in your Global ASAX or wherever you set up your routes, and once you have enough, it will quickly get out of hand.</p>




<p>Awhile back, I started using <a href="http://attributerouting.net">AttributeRouting</a> to help organize my routing and remove the shackles of the default MVC routing experience. I even <a href="/Blog/Posts/43/attributerouting-now-supports-web-api">contributed the first Web API implementation</a> to the project.</p>




<p>One of the bonuses of using AR is that it uses a standard interface for any routes it creates, <code>IAttributeRoute</code>. I knew that when I started using Web API more that I needed an easy way to bring my server-side routes to my client-side in a way that was easy to use and that I didn&rsquo;t need to manually maintain.</p>




<p>Thus was born my <code>RenderRoutes</code> extension:</p>




<script src="https://gist.github.com/4438411.js"></script>




<p>In order to use this properly in your Javascript, you&rsquo;ll need to create a helper utility. The one that I use is very simplistic, doing basic search and replace on parameters, which is the only thing I really need with my routes.</p>




<p>The dependencies my solution has are:</p>




<ul>
<li><a href="http://attributerouting.net">AttributeRouting</a></li>
<li><a href="http://underscorejs.org">Underscore.js</a></li>
</ul>




<p>That&rsquo;s only because it was easier to leverage my existing dependencies. A more intrepid soul might be willing to de-couple my solution from these dependencies, and if you do, let me know so I can update my Gist. In fact, you should just fork my gist. Hmm, that sounds wrong.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2013-01-03T04:03:43+00:00" pubdate data-updated="true">Jan 3<span>rd</span>, 2013</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/61/a-smarter-checked-binding-for-knockoutjs">A Smarter `checked` Binding for KnockoutJS</a></h2>
  
  <p>
    <blockquote><p><strong>Update</strong>: In Knockout 3+, this issue is solved with the new <code>checkedValue</code> binding. Read the <a href="http://knockoutjs.com/documentation/checked-binding.html">documentation</a> for details. You can still use my workaround for KO 2.x and below.</p></blockquote>




<p>I love KnockoutJS. I&rsquo;ve been using it for awhile now and I really enjoy it. That said, there are a few oddities with it, one such being the <code>checked</code> binding.</p>




<p>Let&rsquo;s say you have this scenario (as I do now):</p>




<p>You want to <code>foreach</code> a list of items, each one having a checkbox. You want to store the checked items in a list, for use throughout the view model (bulk updates, select all, deselect all, etc.). How do you go about doing this?</p>




<p>The &ldquo;recommended&rdquo; approach would be to add an observable property, <code>isSelected</code>, to each of your items. Then, in your markup, you can bind to that property:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;ul</span> <span class="na">data-bind=</span><span class="s">&quot;foreach: tasks&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;li&gt;&lt;input</span> <span class="na">type=</span><span class="s">&quot;checkbox&quot;</span> <span class="na">data-bind=</span><span class="s">&quot;checked: isSelected&quot;</span><span class="nt">&gt;&lt;/li&gt;</span>
</span><span class='line'><span class="nt">&lt;/ul&gt;</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>That is OK. It&rsquo;s OK because what if you need to use that item (assuming you&rsquo;re using a &ldquo;class&rdquo; or other reusable object) somewhere else where you don&rsquo;t need that property. You could just attach it where you need it. It also makes it a bit tricky to manage the list of selected items (you&rsquo;d probably end up creating a <code>computed</code> array), as well as making it difficult to dynamically bind a checkbox list to a computed array.</p>




<p>What you may decide to do (like me) is to try and bind the <code>checked</code> to your own observable array, and assign the <code>value</code> of the checkbox to a model property like this:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;checkbox&quot;</span> <span class="na">data-bind=</span><span class="s">&quot;checked: $root.selectedTaskIds, value: id&quot;</span><span class="nt">&gt;</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>However, if you do this, you&rsquo;ll soon discover a few oddities:</p>




<ol>
<li>When you check the checkbox, the <em>string</em> value of your model property will be placed into the array.</li>
<li>Your model property <em>will change to this new string value</em> essentially changing your original model.</li>
</ol>




<p>There are reasons for these two crazy happenings, which I discovered:</p>




<ol>
<li>The <code>checked</code> binding bases its value on the <em>element&rsquo;s</em> value, which is stored as a string.</li>
<li>The <code>value</code> binding keeps the property you are bound to and the <em>element&rsquo;s value</em> in-sync, which is why your model&rsquo;s ID becomes a string.</li>
</ol>




<p>It turns out, we&rsquo;re suffering from some mental model breakdown. If you look at the KO documentation for <code>checked</code>, it&rsquo;s easy to believe the above syntax should work, after all, it says:</p>




<blockquote><p>Special consideration is given if your parameter resolves to an array. In this case, KO will set the element to be checked if the <strong>value</strong> matches an item in the array, and unchecked if it is not contained in the array.</p></blockquote>




<p>If the <em>value</em> matches&hellip; &ldquo;Cool!&rdquo; so I can just bind the <code>value:</code> to my model property? NOPE. You&rsquo;ll run into the aforementioned issues if you try.</p>




<h3>Making a smarter <code>checked</code> binding</h3>




<p>Since I didn&rsquo;t want to add <code>isSelected</code> properties everywhere, I decided to &ldquo;monkey patch&rdquo; the <code>checked</code> and <code>value</code> bindings to play nice together.</p>




<p>Essentially, all my patch does is two things:</p>




<ol>
<li>In the <code>checked</code> binding, if it finds a <code>value</code> binding, it binds to that value rather than the element&rsquo;s value.</li>
<li>In the <code>value</code> binding, it completely ignores any changes if the <code>checked</code> binding is present, essentially nullifying the binding.</li>
</ol>




<p>Here are the new binding definitions:</p>




<script src="https://gist.github.com/4418574.js"></script>




<p>And you can see it in action here:</p>




<iframe style="width: 100%; height: 300px" src="http://jsfiddle.net/kamranayub/G8YZU/embedded/" allowfullscreen="allowfullscreen" frameborder="0"></iframe>




<p>As you can see, now it works as you&rsquo;d expect! You can bind the <code>id</code> property to the list. You can also bind <code>$data</code> and you&rsquo;ll have the full object in your selected list.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2012-12-31T15:48:04+00:00" pubdate data-updated="true">Dec 31<span>st</span>, 2012</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/60/disappointed-in-the-windows-store-submission-proce">Disappointed in the Windows Store Submission Process</a></h2>
  
  <p>
    <p>I&rsquo;m disappointed I have to write about this, because I shouldn&rsquo;t have to. I&rsquo;ve been a Microsoft-stack guy for a long time and I was <em>really</em> excited to release my <a href="http://steamhubapp.com">first app</a> for Windows 8. I&rsquo;m even more excited to also work on a Windows Phone app. That&rsquo;s why I bought a Surface RT and a new HTC 8X. I&rsquo;m all in.</p>




<p>So imagine my disappointment when, after five days, I receive this email:</p>




<blockquote><p>Windows Store: we couldn&rsquo;t certify your app</p></blockquote>




<p>Boo. <em>Okay,</em> I thought, <em>I must have missed something, no big deal.</em> Clearly the testers must have found something that I missed, since I ran my app through memory profiling and performance testing both on my PC and Surface. I even poured over the certification checklist and common points of failure. What did I miss?</p>




<p><strong>Nothing.</strong></p>




<p>Here&rsquo;s what the tester&rsquo;s note said on the report:</p>




<blockquote><p>F:: It is unclear how to create an account for this app to be reviewed. This prevented us from completing our review of this app.</p></blockquote>




<p><em>What?</em> &ldquo;Unclear&rdquo;? You mean, the first sentence of my &ldquo;Instructions to Testers&rdquo; wasn&rsquo;t clear enough?</p>




<blockquote><p>Please use my account (***) to test the app with.</p></blockquote>




<p><em>So. Frustrating.</em> I could understand if I had perhaps put that information at the bottom of my note, forgot to include it, or something else&hellip; but I <em>put it at the top of the instructions</em> to avoid this very problem. How can I feel confident in this testing process if the testers don&rsquo;t read our instructions? It just seems to contribute to my overall view that the Windows Store is lacking in several areas and &ldquo;just isn&rsquo;t there&rdquo; yet but I suppose that rant is for another day.</p>




<p>What makes it worse is that the tutorial video I include in the app (that is accessible on the first screen) <strong>uses my account to demo.</strong> It just boggles my mind.</p>




<p><img src="http://ragemaker.net/images/Stupidity/seriouslyChan.png" alt="Seriously?" /></p>




<p>The icing on the cake was that it took 5 days for this to fail. I&rsquo;m sure it goes into a queue and that the actual time to perform &ldquo;content compliance&rdquo; is an hour or so but even knowing that, it just made it worse since now I have to wait an additional X days for something I shouldn&rsquo;t have had to wait for in the first place.</p>




<p>There&rsquo;s nothing else I can really do about it, though. I re-submitted it, I added extra emphasis in the Notes field, but what else is there? Just pray it works this time, I guess. Disappointing first-time experience, to say the least.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2012-12-15T08:29:55+00:00" pubdate data-updated="true">Dec 15<span>th</span>, 2012</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/59/using-knockout-bindings-in-your-winjs-application">Using Knockout Bindings in Your WinJS Application</a></h2>
  
  <p>
    <p>If you&rsquo;ve done any serious Windows 8 development with WinJS, you&rsquo;ve probably come across this wall:</p>




<blockquote><p>I need to do some custom logic and data binding on this element and I wish I could just use <code>win-data-bind</code> to do it.</p></blockquote>




<p>In my case, all I wanted to do was toggle a CSS class based on my view model&rsquo;s property. In WinJS bindings, there is no way to call a custom binding converter with parameters nor can you access the DOM element from a converter, as far as I can tell.</p>




<p>Technically, you could call a function using <code>markSupportedForProcessing</code> and pass in these parameters, like this:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="c">&lt;!&mdash; Template &mdash;&gt;</span>
</span><span class='line'><span class="nt">&lt;div</span> <span class="na">data-win-bind=</span><span class="s">&quot;className: myprop Converters.toggleClass&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
</span></code></pre></td></tr></table></div></figure></p>

<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="c1">// JS</span>
</span><span class='line'><span class="nx">WinJS</span><span class="p">.</span><span class="nx">Namespace</span><span class="p">.</span><span class="nx">define</span><span class="p">(</span><span class="s2">&quot;Converters&quot;</span><span class="p">,</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">toggleClass</span><span class="o">:</span> <span class="nx">WinJS</span><span class="p">.</span><span class="nx">Utilities</span><span class="p">.</span><span class="nx">markSupportedForProcessing</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">source</span><span class="p">,</span> <span class="nx">sourceProperties</span><span class="p">,</span> <span class="nx">dest</span><span class="p">,</span> <span class="nx">destProperties</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">if</span> <span class="p">(</span><span class="nx">source</span><span class="p">[</span><span class="nx">sourceProperties</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">===</span> <span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>            <span class="nx">WinJS</span><span class="p">.</span><span class="nx">Utilities</span><span class="p">.</span><span class="nx">toggleClass</span><span class="p">(</span><span class="nx">dest</span><span class="p">,</span> <span class="nx">sourceProperties</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">return</span> <span class="nx">dest</span><span class="p">.</span><span class="nx">className</span><span class="p">;</span>
</span><span class='line'>    <span class="p">})</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>But I am not sure that&rsquo;s a great idea (as the base.js source code has a lot of extra stuff around this method, which is why they expose an easier <code>WinJS.Binding.coverter</code>).</p>




<h2>Mix N&#8217; Match</h2>




<p>It turns out, it <em>seems</em> to be relatively straight-forward to make KO and WinJS work together. Why would you want to? Well, WinJS has a lot of useful features like WinJS.Promises, utilities, controls, templates, and lots of other stuff. You lose all that if you use a 3rd party library (like KO or jQuery) exclusively.</p>




<p>With this approach, you can choose what works best. You could go all out and use KO to bind all your stuff and then use WinJS for whatever else you need. I chose to just leverage the custom binding functionality.</p>




<h2>Let&rsquo;s do it!</h2>




<p>Once you have Knockout installed (via Nuget or what have you), be sure it&rsquo;s included in your page:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>default.html
</span><span class='line'>
</span><span class='line'><span class="c">&lt;!&mdash; WinJS references &mdash;&gt;</span>
</span><span class='line'><span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">&quot;//Microsoft.WinJS.1.0/css/ui-dark.css&quot;</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;//Microsoft.WinJS.1.0/js/base.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;//Microsoft.WinJS.1.0/js/ui.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;/scripts/knockout-2.2.0.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>I put it in default.html so it&rsquo;s globally accessible.</p>




<p>Now, all we are going to do is <strong>replace</strong> the call to <code>WinJS.Binding.processAll</code> with a function that intercepts the call and calls <code>ko.applyBindings</code>, then continues to call the built in WinJS function.</p>




<p>Create a new file, I named mine <em>*ko-winjs.js</em>:</p>




<script src="https://gist.github.com/4183235.js?file=ko-winjs.js"></script>




<p>Then, just include this before <strong>default.js</strong> in your HTML file:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>default.html
</span><span class='line'>
</span><span class='line'><span class="c">&lt;!&mdash; WinJS references &mdash;&gt;</span>
</span><span class='line'><span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">&quot;//Microsoft.WinJS.1.0/css/ui-dark.css&quot;</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;//Microsoft.WinJS.1.0/js/base.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;//Microsoft.WinJS.1.0/js/ui.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;/scripts/knockout-2.2.0.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;/scripts/ko-winjs.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>And you&rsquo;re all set! Now you can do this in your templates:</p>




<script src="https://gist.github.com/4183235.js?file=template.html"></script>




<p>Pretty awesome!</p>




<h2>Disclaimer</h2>




<p>I have no idea how inefficient this is, but my guess is that this adds extra processing time (plus, binding cache issues?). I have a small application so I&rsquo;m not too worried about it and it&rsquo;s the best thing I could come up with on short notice.</p>




<p>That said, if someone smarter than me and more familiar with KO and WinJS in general could take a peek at this&hellip; I&rsquo;d be super grateful, since I think this is a killer feature. If WinJS could just support KO-style binding syntax, I&rsquo;d be totally cool with that too!</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2012-12-01T23:08:38+00:00" pubdate data-updated="true">Dec 1<span>st</span>, 2012</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/58/using-calc-and-media-queries-to-create-a-combinati">Using Calc() and Media Queries to Create a Combination Variable + Fixed Sidebar</a></h2>
  
  <p>
    <p>The title of this post might be confusing, so let me describe our scenario:</p>




<p>I am working on a responsive layout, specifically one right now that has two columns, a content area and a right sidebar. This right sidebar needs to be flexible <em>up to a certain point</em> and then it needs to become fixed. In addition, both columns could be variable height, and on top of that, the two columns are sometimes split into two separate rows to achieve proper HTML markup order.</p>




<p>The reason the sidebar needs to have a minimum width is mostly due to the ads we&rsquo;re working with, since they have a fixed size. It might actually be possible to hack at the styles and make them pseudo-responsive, but I still want to share my tip with you, even if I don&rsquo;t end up using it.</p>




<p>I thought this was an interesting challenge because of two issues: the need for both flex <em>and</em> fixed for the same column.</p>




<h3>The Demo</h3>




<p>Here is the Fiddle I came up with where you can view the result:</p>




<iframe style="width: 100%; height: 300px" src="http://jsfiddle.net/kamranayub/mHvtM/4/embedded/" allowfullscreen="allowfullscreen" frameborder="0"></iframe>




<h3>The Markup</h3>




<p>The markup is straightforward and simple. I essentially need two rows of two columns, where the right columns line up and <em>appear</em> to be a single sidebar. When I get down to the smaller breakpoints, both columns stop floating and stack vertically (but that is neither here nor there).</p>




<h3>The Styles</h3>




<p>Here&rsquo;s where it gets interesting. I start out the design with a 60% left column and 40% right column. However, I need the right column to stop being variable at 300px, and I need the left column to take up the remaining space.</p>




<p>The way I achieved this was by using a media query and the CSS3 <code>calc()</code> unit. I wanted to avoid Javascript at all costs.</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="k">@media</span> <span class="o">(</span><span class="nt">max-width</span><span class="o">:</span> <span class="nt">750px</span><span class="o">)</span> <span class="p">{</span> <span class="c">/<em> min-width / % = (300 / 0.4) = 750 </em>/</span>
</span><span class='line'>    <span class="nc">.alpha</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">width</span><span class="o">:</span> <span class="o">&ndash;</span><span class="n">moz</span><span class="o">&ndash;</span><span class="n">calc</span><span class="p">(</span><span class="m">100</span><span class="o">%</span> <span class="o">&ndash;</span> <span class="m">300px</span><span class="p">);</span>
</span><span class='line'>        <span class="k">width</span><span class="o">:</span> <span class="o">&ndash;</span><span class="n">o</span><span class="o">&ndash;</span><span class="n">calc</span><span class="p">(</span><span class="m">100</span><span class="o">%</span> <span class="o">&ndash;</span> <span class="m">300px</span><span class="p">);</span>
</span><span class='line'>        <span class="k">width</span><span class="o">:</span> <span class="o">&ndash;</span><span class="n">webkit</span><span class="o">&ndash;</span><span class="n">calc</span><span class="p">(</span><span class="m">100</span><span class="o">%</span> <span class="o">&ndash;</span> <span class="m">300px</span><span class="p">);</span>
</span><span class='line'>        <span class="k">width</span><span class="o">:</span> <span class="n">calc</span><span class="p">(</span><span class="m">100</span><span class="o">%</span> <span class="o">&ndash;</span> <span class="m">300px</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="nc">.beta</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">width</span><span class="o">:</span> <span class="m">300px</span><span class="p">;</span>
</span><span class='line'>        <span class="k">background</span><span class="o">:</span> <span class="nb">orange</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>Turns out, pretty simple!</p>




<h3>Gotchas</h3>




<p>Of course this world isn&rsquo;t perfect and neither is CSS3 support. According to <a href="http://caniuse.com/#feat=calc">Can I Use</a>, <code>calc</code> isn&rsquo;t supported in: IE &lt; 9, iOS &lt; 6.0, Android, Opera, or BB &lt; 10.0. That&rsquo;s lot of non-support.</p>




<p>So what to do? Well, in our case, it&rsquo;s not essential we maintain the fixed minimum-width. Especially if we can workaround the ads. If you <strong>must</strong> have the support, I don&rsquo;t know what to tell you. You could test for <code>calc</code> support using <a href="https://github.com/Modernizr/Modernizr/blob/master/feature-detects/css-calc.js">Modernizr</a>, then decide what to do in browsers that don&rsquo;t have that support (for example, throwing in the towel and just convert the layout to single column). You could also use a Javascript-based solution (which you might as well, if you&rsquo;re relying on Modernizr).</p>




<h3>Have a better solution?</h3>




<p>I&rsquo;d like to know. I&rsquo;m not a front-end expert, so there may be a more clever way to achieve this and maximize browser support. If you know of any way to do this better, please let me know down below.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2012-11-03T01:27:12+00:00" pubdate data-updated="true">Nov 3<span>rd</span>, 2012</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/57/enter-a-windows-8-contest-just-do-it">Enter a Windows 8 Contest, Just Do It!</a></h2>
  
  <p>
    <p>There are at least a couple app contests I know of for Windows 8: <a href="http://apptivate.ms">Apptivate</a> and <a href="http://www.generationapp.com/giveaway/">GenerationApp</a>.</p>




<p>The prizes are cool and all you need to do is make an app. In fact, for Apptivate at least, <em>your app doesn&rsquo;t even need to be complete to win</em>!</p>




<p>Can&rsquo;t think of an app to make? No worries, just ask yourself: what site do you like and would you like to bring it to Windows 8 or WinRT? Then ask, does it have an API or feed or enough of <em>something</em> to make a usable app? If the answer is <strong>Yes</strong> to both of those questions, you have your app.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2012-10-03T22:41:20+00:00" pubdate data-updated="true">Oct 3<span>rd</span>, 2012</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/56/what-would-a-windows-8-halo-app-look-like">What Would a Windows 8 Halo App Look Like?</a></h2>
  
  <p>
    <p><strong>Update (10/24)</strong>: There&rsquo;s a good indication there&rsquo;ll be an API. If you log into <a href="http://dewxp.com">DewXP</a> with your Xbox Live account, it will display your spartan player model using a URL I haven&rsquo;t seen before:</p>




<blockquote><p><a href="https://stats.svc.halowaypoint.com/players/subkamran/h4/spartans/fullbody">https://stats.svc.halowaypoint.com/players/subkamran/h4/spartans/fullbody</a></p></blockquote>




<p>Nothing is at the root of that URL, but I assume the <strong>h4</strong> is for Halo 4-related stats. It also looked like it used OAuth to allow the DewXP &ldquo;app&rdquo; access to my profile. This is a good sign!</p>




<hr />




<p>I&rsquo;m a Halo fan. I enjoy playing with my friends, it&rsquo;s fun to be competitive and it&rsquo;s fun to compete against each other. One of the things me and my friends love is the ability to view our stats and history. It&rsquo;s all about bragging rights. Bungie used to have a <em>fan-fucking-tastic</em> site to view stats. Since the handover to 343, seeing stats has just not been the same nor as in-depth, though the core features have remained.</p>




<p>There are mixed reactions to this in the community, I would say leaning more on the negative side, even among my friends. However, after seeing all the footage of Halo 4, I have high hopes for the game as long as it continues to be competitive and to provide a source of stats and feedback.</p>




<p>So what does Halo have to do with Windows 8? Well, before Bungie handed the franchise off, they worked on releasing Halo Waypoint to several devices including <a href="http://itunes.apple.com/us/app/halo-waypoint/id468457600?mt=8">iOS</a>, <a href="https://play.google.com/store/apps/details?id=com.halo.companion&amp;hl=en">Android</a>, and <a href="http://www.shacknews.com/article/71466/halo-waypoint-premium-mobile-app-add-on-features-real-time">Windows Phone</a>. These apps are great for people like us who like to see our stats on the go or when we&rsquo;re not at the computer (like in front of the Xbox). I wanted to build a similar app for Windows 8 that just showed stats of my friends or other players. Simple, right? Wrong.</p>




<p>Bungie had originally released a <a href="http://www.bungie.net/fanclub/statsapi/Group/Resources/Article.aspx?cid=545064">poorly documented</a> (it&rsquo;s true) public API for their Halo stats but <em>at least</em> it was an API. Fan sites were able to run with this, creating sites like <a href="http://halotracker.com">HaloTracker</a>. The problem is, since 343i came into the picture, there has been no effort that we can see to provide an API (the old Bungie one is deprecated). This leaves site developers to resort to less-than-savory tactics to get at the stats, including screen scraping.</p>




<p>The only glimmering light on the horizon is that there are <a href="https://forums.halo.xbox.com/yaf_postst97564_Probably-confirmation-of-a-Halo-4-API.aspx">rumblings</a> of a Halo 4 API, which would be a god-send for the community. But it&rsquo;s just that, a hope and no confirmation.</p>




<h2>There must be an API somewhere, though</h2>




<p>There is. If you can get at the traffic on your mobile device that has Halo Waypoint, and you can get as far as seeing where that traffic goes, you&rsquo;ll discover there <em>is indeed a JSON web service</em>. Unfortunately, it requires authentication to the xbox.com domain, because the authentication cookie is sent on every request. In other words, it&rsquo;s not public and 343 probably doesn&rsquo;t want us using it.</p>




<p>I&rsquo;m not sure if WinRT&rsquo;s <a href="http://msdn.microsoft.com/en-us/library/windows/apps/hh750287.aspx">Web Authentication Broker</a> could help in this case, but as far as I can tell, Xbox Live does not have an authentication endpoint. There must be <em>something</em>, as the Windows 8 Games app can connect to Xbox Live but I&rsquo;m assuming this isn&rsquo;t available to just anyone and that there&rsquo;s black magic involved. Even if you could somehow manage to authenticate and pass those headers into the WinJS XHR calls, there&rsquo;s still the tiny problem that we probably aren&rsquo;t <em>supposed</em> to be able to use this Waypoint API.</p>




<h2>My plea to 343</h2>




<p>343: you need to have an API. If the rumors are true that Halo 4 will be getting an API, that&rsquo;s <em>excellent</em> news because I strongly feel that if you want to build a community around the game, you really should let us go wild with the data.</p>




<p>Even if that pipe dream does come to pass, there&rsquo;s still the issue of previous Halo games. We know you have the stats. We know you have the API. Just figure out a way to make it public! Release the Waypoint API so we can start somewhere; secure it with API keys or OAuth or whatever else you need to do.</p>




<p>Because if you don&rsquo;t? People can&rsquo;t have an app like this unless <em>you</em> release it, and let&rsquo;s be honest: wouldn&rsquo;t you rather spend resources creating a great API to view stats and then let us do the dirty work and build around it?</p>




<p><img src="/blog/images/69.png" alt="MetroHalo" /></p>




<p><img src="/blog/images/70.png" alt="MetroHalo Lookup" /></p>




<p><img src="/blog/images/71.png" alt="MetroHalo Search" /></p>




<p>This is a real app, living on my hard drive right now. It can fetch any player&rsquo;s data, integrates with Search, and is pretty sexy to see in motion. Unfortunately, none of you reading this post will ever get to see it, simply because it violates the Terms of Service. It screen-scrapes the Halo Waypoint site to get this data, which is not an acceptable way of getting data.</p>




<p>343, if you <em>are</em> planning to release a Windows 8 application, good on you! But my point still stands: this took me a couple days to put together and you didn&rsquo;t spend a dime on it, or assign Joe Bob 50% to innovation, or call your agency and have them put together mockups and charge you thousands of dollars. I did this in two evenings with a little bit of free time. There are so many things that are possible with a platform like Windows 8:</p>




<ul>
<li>Leaderboards among your friends</li>
<li>Live tile updates of your games</li>
<li>Beautiful high-res imagery of medals, ranks, and your spartan models</li>
<li>Awesome win/lose charts and game history</li>
<li>Map breakdowns</li>
<li>Weapon overviews and tips</li>
<li>Clan or group management</li>
<li>Delivering video and other rich content to your users</li>
</ul>




<p>And that&rsquo;s what I could think of on-the-spot, I&rsquo;m sure after seeing these screenshots people could think of a lot more.</p>




<p>Release an API, 343. Your community will thank you for it.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2012-10-03T03:49:51+00:00" pubdate data-updated="true">Oct 3<span>rd</span>, 2012</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/54/2-computers-1-desk">2 Computers, 1 Desk</a></h2>
  
  <p>
    <p>At home, I have two main computers and one desk. I use one for my main everyday tasks and for gaming, and I use the other one as a server/development machine.</p>




<p>As you might guess, this is logistically difficult to manage on a small desk that is meant for only a single PC. You need to have two keyboards/mice and, if you like sound, two sets of speakers. Furthermore, if you&rsquo;re like me, you want to see both computers at once if you have two screens. Personally, I like dual-monitors for my main machine and am fine with only using a single monitor for development.</p>




<h2>Two PC&rsquo;s, One Mouse and Keyboard</h2>




<p>The first logistical item to eliminate is how to control both computers with one keyboard and one mouse. There are a couple options:</p>




<ol>
<li>Use a hardware KVM switch</li>
<li>Use a software KVM switch</li>
</ol>




<p>Going with option 1 requires some more cables, but is handy in that you purposefully switch to the device you want to use, plus it is using actual hardware, rather than software emulation (which may have issues on Windows 8, see below).</p>




<p>I went with option 2, using the open source software <a href="http://synergy-foss.org/">Synergy</a>. I have a Windows 7 host (gaming PC) and my server as the client (Windows 8 RTM). If you make sure Synergy starts as a service and is elevated, you won&rsquo;t have issues with starting up and logging in on the client PC.</p>




<p><em>Notice for Windows 8 users</em>: You may run into an issue with any KVM software out right now, which is being unable to see your mouse cursor. If you do not have any mouse plugged in to the computer, I believe Windows 8 hides the cursor because it assumes a touch interface by default. There are two workarounds: 1) Enable &ldquo;<a href="http://windows.microsoft.com/is-IS/windows7/Use-Mouse-Keys-to-move-the-mouse-pointer">MouseKeys</a>&rdquo; but I had to enable this almost every time I restarted or, 2) Plug in a mouse. I opted for #2, with a wireless mouse/kb. This gives me some flexibility where I can use a physical mouse/kb if I really want.</p>




<h2>Two PC&rsquo;s One Set of Speakers</h2>




<p>This is the more interesting problem. Is it possible to play both computers through one set of speakers? I am happy to report: yes! However, there is a caveat&hellip;</p>




<p>In order to pull this off, your &ldquo;main&rdquo; PC needs to have the ability to accept an input device (like a Digital/SPDIF/Optical-In). My gaming PC has a Sound Blaster X-Fi Elite Pro, so I have a big external console that accepts all kinds of inputs.</p>




<p>My server has a modern motherboard which can output either SPDIF or Optical. I had an extra SPDIF cable lying around, so I wired it from the server to my X-Fi&rsquo;s console.</p>




<p>There are a couple things to do in Windows to get this to work:</p>




<ol>
<li><p>Right-click your sound icon and go to Playback Devices.</p></li>
<li><p>Make sure SPDIF is the default playback device:</p>

<p> <img src="/blog/images/66.png" alt="SPDIF" /></p></li>
<li><p>On the main PC, you can &ldquo;listen&rdquo; to any recording device, which plays whatever&rsquo;s being sent to the main playback device. Listen to whatever input you&rsquo;re using to send the output of the client PC:</p>

<p> <img src="/blog/images/68.png" alt="Listen" /></p></li>
</ol>




<p>Voila! As soon as you hit &ldquo;Apply&rdquo;, you&rsquo;ll start hearing Iron Maiden blasting through your single set of speakers as you code!</p>




<p><strong>Note:</strong> This problem can also be solved if the monitor you use has speakers. If you use HDMI to connect your monitor to your client, audio and video will pass through (or you can use one of those speaker-jack cables). It&rsquo;ll sound like crap, though!</p>




<h2>Two PCs, Two Monitors</h2>




<p>This is straightforward enough. As long as your main monitor accepts multiple inputs (DVI, VGA, HDMI, DisplayPort), you just need to find the right cable from your client to the monitor.</p>




<p>For example, my gaming PC has a DVI cable to my monitor. My server uses an HDMI cable. You&rsquo;re going to have a tougher time if your display doesn&rsquo;t accept multiple digital inputs (for example, only DVI and VGA&hellip;). It&rsquo;ll work, but analog signals look like crap on your nice 1080p display.</p>




<p>When I am developing, I set my secondary monitor (which is to the right of my main monitor) as the primary monitor for my gaming PC. That way, I can still use my other PC as I&rsquo;m using my development machine.</p>




<h2>The End Result</h2>




<p>&hellip; is awesome! My desk isn&rsquo;t cluttered with multiple sets of things, and the only manual thing I really have to do is switch my monitor input when I need to switch to using one PC more than the other.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2012-08-18T01:54:51+00:00" pubdate data-updated="true">Aug 18<span>th</span>, 2012</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/53/how-to-install-a-ssl-certificate-into-appharbor">How to Install a SSL Certificate Into AppHarbor</a></h2>
  
  <p>
    <p>I am mostly writing this for my own benefit because every year I tend to forget what I did before. It&rsquo;s not hard, there&rsquo;s just a handful of steps. I use RapidSSL as my provider, so my steps are based on what RapidSSL gives me.</p>




<p>This guide assumes you are using SNI SSL (I am not sure if the steps differ for IP/hostname-based SSL on AppHarbor).</p>




<ol>
<li><p>Create a new Certificate Signing Request on your local IIS box (the machine doesn&rsquo;t matter, just use your dev machine)</p>

<p> <img src="/blog/images/55.png" alt="Certificates in IIS" /></p>

<p> <img src="/blog/images/65.png" alt="Enter your information" /></p>

<p> <img src="/blog/images/57.png" alt="Don't need to change this" /></p>

<p> <img src="/blog/images/58.png" alt="Save somewhere" /></p>

<p> Be sure to remember the <em>Common Name</em> you entered as that is important. I use my domain name because it&rsquo;s easy to remember.</p></li>
<li><p>On your SSL provider (e.g. RapidSSL), they will ask you to paste in your CSR. Open the TXT file IIS made and copy <em>everything</em> and paste it in when your provider asks for it.</p></li>
<li><p>Wait until your provider completes your order. RapidSSL will send you an email with some certificates in the email, but all you need right now is the Intermediary Certificate.</p></li>
<li><p>Copy the Intermediary Certificate from your provider and install it into AppHarbor:</p>

<p> <img src="/blog/images/59.png" alt="Copy this" /></p>

<p> Be sure to copy everything including the header and footer.</p>

<p> <img src="/blog/images/60.png" alt="Enter the IC" /></p></li>
<li><p>Now, for RapidSSL, you will let you download either the X.509 certificate or a PKCS#7 file. With IIS, you need to download the X.509 certificate. At the end of the order email, there&rsquo;s a link to the order portal where you enter your order info and you can then download your certificate. Download your X.509 certificate file, which will probably end in a <em>.crt</em> extension. Put it in the same place as your CSR to keep track of it.</p>

<p> <img src="/blog/images/61.png" alt="Download cert" /></p></li>
<li><p>Back in IIS, on the same machine you generated the CSR with, you must &ldquo;Complete a Certificate Signing Request&hellip;&rdquo;. You need to browse to the cer file (you may need to change the dialog to All Files).</p>

<p> <img src="/blog/images/62.png" alt="Complete the CSR" /></p></li>
<li><p>Once completed, IIS will list your certificate. You now need to select it and export it as a <em>.pfx</em> file. You need to enter a passphrase for the PFX file which you&rsquo;ll need for AppHarbor.</p>

<p> <img src="/blog/images/63.png" alt="Export" /></p>

<p> <img src="/blog/images/64.png" alt="Enter a passphrase" /></p></li>
<li><p>Finally! On AppHarbor, go to your certificates and add a new certificate. Specify you want to use a PFX file. Now enter the Common Name you&rsquo;ve been keeping the same throughout the process (e.g. whatever.com) and enter the password you just used in IIS.</p></li>
</ol>




<p>ALL DONE. That wasn&rsquo;t so bad, was it?</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2012-08-03T20:10:58+00:00" pubdate data-updated="true">Aug 3<span>rd</span>, 2012</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/52/experiences-in-the-wild-away-signs-and-picture-fra">Experiences in the Wild: Away Signs and Picture Frames</a></h2>
  
  <p>
    <p>Inspired by a lot of the research and learning lately I&rsquo;ve been doing around experience design (which has always been a passion for me), I decided it might be fun to start sharing the little things I run into in daily life that frustrate me as a user or that give me some joy.</p>




<p>The big catalyst for deciding to do this was <a href="http://twitter.com/aral">Aral Balkan</a>&rsquo;s amazing keynote at the Norwegian Developer Conference 2012 in Oslo, Norway:</p>




<iframe src="http://player.vimeo.com/video/43524962" width="500" height="281" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>




<p> <p><a href="http://vimeo.com/43524962">NDC2012 &ndash; Opening and Keynote &ldquo;A happy grain of sand&rdquo; by Aral Balkan</a> from <a href="http://vimeo.com/ndcoslo">NDCOslo</a> on <a href="http://vimeo.com">Vimeo</a>.</p></p>




<p>If you haven&rsquo;t seen it, <strong>you must watch it now</strong> if you do any development or design. It may just change how you think about what you do.</p>




<p>I may or may not commit to doing these kinds of posts each week, but I will try! Since Google+ instantly uploads my camera photos from my phone to my profile, I don&rsquo;t have much of an excuse not to share my feelings.</p>




<p>The last thing I want to say is that I want to approach this from the standpoint of a user, <strong>myself</strong> and how I felt. When something is frustrating, we like to blame ourselves. The fact is that in the majority (all?) cases, there&rsquo;s an aspect of bad design at work. When something makes us happy, we should take note of what it was that caused it!</p>




<p>I&rsquo;d highly recommend reading <a href="http://www.amazon.com/Design-Everyday-Things-Donald-Norman/dp/0465067107">The Design of Everyday Things</a>, as it should cause you to take a deeper look at the things you use every day and question whether or not they show aspects of good or bad design.</p>




<h2>The Away Sign</h2>




<p>I went to work today to pick up some prints I requested (I will talk about the job request form in another post!). When I approached the print desk I was greeted with this:</p>




<p><img src="https://lh5.googleusercontent.com/-qKsASX3hclo/T9tqFrwh4VI/AAAAAAAABTs/f-si5HCrjD8/s0-d/12%2B-%2B3" alt="Away" /></p>




<p>First off, this is better than nothing! At least I know that from the time I see this sign to 5 minutes from <em>now</em>, they should be back. This made me feel good.</p>




<p>What I want to point out is that <em>there&rsquo;s an even better option.</em></p>




<p>When I went shopping for a new place to live, we visited a ton of leasing offices. Rental agents have to give tours of the model or vacant apartments <em>every day</em> practically. It makes sense they should give feedback to people who arrive early to their appointments.</p>




<p>Can you guess what they did?</p>




<p><img src="http://www.littleclockshop.com/images/products/will_return_clock.jpg" alt="Be Back Clock" /><br/>
(Source: <a href="http://www.littleclockshop.com/images/products/will_return_clock.jpg">LittleClockShop</a>)</p>




<p><strong>Yes! That makes me happy!</strong> Not only do I know the folks are away, I know when to expect their return so I can plan accordingly: Do I wait in the car? Do I leave a message? Do I simply wait?</p>




<p>The problem with saying &ldquo;Be back in 5 minutes&rdquo; is that when a customer arrives, they don&rsquo;t know what 5 minutes means. The 5 minutes was relative to when you posted the sign, not relative to when a customer arrives. It&rsquo;s OK to not know the exact time you&rsquo;ll be back, but it&rsquo;s still better than a relative time.</p>




<h2>The IKEA Picture Frame</h2>




<p>I love IKEA. I understand that I will probably need to replace a lot of the things I buy from them in a year or two, but I like their philosophy.</p>




<p>I usually have no frustrating experiences with IKEA, even with their absurdly large <strike>warehouse</strike> store.</p>




<p>Today, however, was different. I needed to purchase low-cost 8.5x11&#8221; frames for a project I&rsquo;m doing. IKEA to the rescue! I found this great NYTTJIA frame for a measly $2:</p>




<p><a href="http://www.ikea.com/us/en/catalog/products/50186500/"><img src="http://www.ikea.com/us/en/images/products/nyttja-frame__0109048_PE258703_S4.JPG" alt="Frame" /></a></p>




<p>Excellent. I headed over to my local IKEA store, ran in, and ran out with 8 of them.</p>




<p><img src="https://lh6.googleusercontent.com/-EjFXc7qBt3g/T9tqFi_vulI/AAAAAAAABT8/5Zmfp-o2yhc/s0-d/12%2B-%2B4" alt="What it looks like" /></p>




<p>Looks fine to me! Fast forward to when I arrived home and decided to put my pictures in the frames. The frames are wrapped in plastic, so I tore them off easily. I opened up the back of the frame, cool, this is easy. I get down to the included backing paper and take it out to reveal the laminate cover.</p>




<p>Then, what I saw made me get angry.</p>




<p><img src="https://lh5.googleusercontent.com/-T3cyOTpaGXU/T9tqFjcqpHI/AAAAAAAABUE/8PB5WqfG9JY/s0-d/12%2B-%2B2" alt="What the hell" /></p>




<p><strong>The plastic cover has stupid recycling symbols on it, rendering it completely useless for covering and protecting my photos.</strong></p>




<p>Let&rsquo;s take a closer look, shall we?</p>




<p><img src="https://lh6.googleusercontent.com/-LGe7iNqhtgs/T9tqFl3bTuI/AAAAAAAABUI/gK_o_XtJSjM/s0-d/12%2B-%2B1" alt="Ugh" /></p>




<p><strong>What. The. Hell.</strong></p>




<p>Why would you do this IKEA? WHY? I understand I paid $2 cheap dollars for this, but why render the plastic covering totally useless? I don&rsquo;t understand&hellip; am I supposed to assume I needed to buy coverings separately?</p>




<p>You <a href="http://www.ikea.com/us/en/catalog/products/50186500/">totally didn&rsquo;t make it seem that way</a>:</p>




<blockquote><p>Front protection in durable plastic; makes the frame safer to use.</p></blockquote>




<p>NO! NO IT DOES NOT! I can&rsquo;t use it! I would get stupid little symbols over my photo.</p>




<h3>Wait a second&hellip;</h3>




<p>When I originally wrote this post 5 minutes ago, I posted the story above. After re-reading it, a sudden thought occurred to me!</p>




<blockquote><p>What if it&rsquo;s just a thin covering?</p></blockquote>




<p>Well, what have we here!</p>




<p><img src="https://lh6.googleusercontent.com/-ABfUr6W62dY/T9t3jhZc7dI/AAAAAAAABUU/hXiHGWQPAgQ/s0-d/IMG_20120615_125721.jpg" alt="WHAT?" /></p>




<p>So it turns out my rage against this frame was misplaced. It turns out, IKEA <em>did</em> do something right: they protected their protective cover.</p>




<p>But now I want to talk about why this design sucks.</p>




<h3>My Mental Model</h3>




<p>So why would I make this mistake? Why didn&rsquo;t I realize that the symbols I saw when I bought the frame were on the plastic and not on the paper? Why didn&rsquo;t I realize right away it was only a thin covering I could peel off?</p>




<ol>
<li>In the store, I unconsciously assumed the symbols were on the paper, not the plastic</li>
<li>At home, I unconsciously assumed the symbols were printed on the plastic</li>
</ol>




<p>My mental model was based on past experiences with picture frames, all of which had included a plastic or glass cover that had no marks or symbols on them. There was no reason to suspect this frame would be any different.</p>




<p>The issue was that IKEA took it one step further, becoming clever. That cleverness translated into frustration for me when I didn&rsquo;t see the cleverness right away.</p>




<p>Now that we know what the problem was, is there a solution? I think so, it&rsquo;s called a hint! I think the standard term for this is an <em><a href="http://en.wikipedia.org/wiki/Affordance">affordance</a></em>:</p>




<p><img src="/Blog/Posts/Image/54/Small" alt="Peel hint" /><br/>
Source: <a href="http://wpcornerpeelplugin.com/html/">http://wpcornerpeelplugin.com/html/</a></p>




<p>That is essentially all IKEA needed to do to prevent this problem. By folding a corner, providing a colored peel tab, or using any other myriad of techniques we see every day, they could have avoided my frustration and automatic assumption that they hated me.</p>




<h2>So there you have it</h2>




<p>One fairly pleasing experience, one frustrating experience and that was just this morning. Oh what fun me and you will have in the coming days! I will try to keep it balanced in each post, showcasing something that made me happy and something that did not.</p>




<p>If you came across something that made you happy or frustrated today, share it!</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2012-06-15T22:44:35+00:00" pubdate data-updated="true">Jun 15<span>th</span>, 2012</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/51/protip-show-db-usage-in-your-ef-application">Protip: Show DB Usage in Your EF Application</a></h2>
  
  <p>
    <p>My staging application is on <a href="http://appharbor.com">AppHarbor</a> so I gave it the shared Yocto SQL database which has a limit of 20MB. That&rsquo;s not much, so I wanted a way to display my current usage level in staging when I test the site in case I want to flush it out. It was fairly easy (with a gotcha)!</p>




<p><strong>MVC Layout</strong></p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>@if (AppSettings.RuntimeEnvironment != RuntimeEnvironment.P)
</span><span class='line'>{
</span><span class='line'>    <span class="nt">&lt;p&gt;</span>DB Usage: @{ Html.RenderAction(&quot;DbUsage&quot;, &quot;Stats&quot;); }<span class="nt">&lt;/p&gt;</span>
</span><span class='line'>}
</span></code></pre></td></tr></table></div></figure></p>

<p>I am rendering an action since I need to call out to my service layer.</p>




<p><strong>StatsController</strong></p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="na">[ChildActionOnly]</span>
</span><span class='line'><span class="na">[GET(&quot;stats/dbusage&quot;)]</span>
</span><span class='line'><span class="k">public</span> <span class="n">ActionResult</span> <span class="nf">DbUsage</span><span class="p">()</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="n">AppSettings</span><span class="p">.</span><span class="n">RuntimeEnvironment</span> <span class="p">!=</span> <span class="n">RuntimeEnvironment</span><span class="p">.</span><span class="n">P</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="nf">Content</span><span class="p">(</span><span class="n">SomeAbstraction</span><span class="p">.</span><span class="n">GetDatabaseUsageStat</span><span class="p">());</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="k">new</span> <span class="nf">EmptyResult</span><span class="p">();</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>I am using <a href="https://github.com/mccalltd/AttributeRouting">AttributeRouting</a>, and if you use <code>RenderAction</code> you should know it requires a route to be made. I use <code>ChildActionOnly</code> to prevent browsing to the action. I also return an empty result if it&rsquo;s production (I only have 3 states).</p>




<p><strong>IRepository</strong></p>




<p>In my project, I have a application service layer that uses an injectable repository. I&rsquo;ve found this makes integration testing pretty easy as my controllers are dumb as heck and leave all the logic up to the service layer where there&rsquo;s no need to mock any HTTP stuff.</p>




<p>I&rsquo;ll skip to the repository since that&rsquo;s where the actual code is.</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="k">public</span> <span class="kt">string</span> <span class="nf">GetDbUsage</span><span class="p">()</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="k">try</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="n">IEnumerable</span> <span class="n">dt</span> <span class="p">=</span> <span class="n">_dbContext</span><span class="p">.</span><span class="n">Database</span><span class="p">.</span><span class="n">SqlQuery</span><span class="p">(</span><span class="k">typeof</span> <span class="p">(</span><span class="n">DbUsage</span><span class="p">),</span> <span class="s">&quot;sp_spaceused&quot;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">if</span> <span class="p">(</span><span class="n">dt</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
</span><span class='line'>            <span class="k">return</span> <span class="s">&quot;Unknown&quot;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>        <span class="kt">var</span> <span class="n">usage</span> <span class="p">=</span> <span class="n">dt</span><span class="p">.</span><span class="n">OfType</span><span class="p">&lt;</span><span class="n">DbUsage</span><span class="p">&gt;().</span><span class="n">FirstOrDefault</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">return</span> <span class="n">usage</span><span class="p">.</span><span class="n">database_size</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span> <span class="k">catch</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="s">&quot;Unknown&quot;</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">private</span> <span class="k">class</span> <span class="nc">DbUsage</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">database_name</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">database_size</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>This just executes the stored proc <code>sp_spaceused</code> and coerces it into the <code>DbUsage</code> type. The gotcha is that there&rsquo;s another column, &ldquo;unallocated space&rdquo; which <strong>for some ungodly, inconsistent reason</strong> has a space in it. I cannot figure out how to get it without resorting to an ADO.NET data reader. I&rsquo;d appreciate any advice on how to grab that additional column as well.</p>




<p>If you want to log an error, you should, but I don&rsquo;t really care if I can&rsquo;t access the size&hellip; so I just ignore it. It&rsquo;s only for debugging.</p>




<p>And as for the result? Handy!</p>




<p><img src="/blog/images/53.png" alt="DB Usage" /></p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2012-06-15T11:19:29+00:00" pubdate data-updated="true">Jun 15<span>th</span>, 2012</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/50/frustration-with-the-vs2012-team-explorer-tool-win">Frustration With the VS2012 Team Explorer Tool Window</a></h2>
  
  <p>
    <p>I would just like to quickly comment on something I noticed while using VS2012 and Team Explorer (we use TFS at work). Below is a screenshot of the window as it stands in the RC.</p>




<p><strong>Can you tell me what role the black text in the window plays?</strong></p>




<p><img src="/blog/images/48.png" alt="Team Explorer 2012" /></p>




<p>If you said &ldquo;headings,&rdquo; I would not blame you because <em>that&rsquo;s exactly what I thought at first.</em> In fact, they are <strong>links</strong> to the common tasks you&rsquo;ll do in TFS. I didn&rsquo;t realize this until my mouse happened to hover over the tasks and then it became underlined with the pointer cursor. There&rsquo;s a pretty clear violation of the Gestalt principle of color here; why are some links blue and the most common ones bold and black? Unconsciously, this matches my typical assumption of headings, when in fact the true intention is to make the common tasks stand out.</p>




<p>We see this header/nav paradigm all over the web. Here&rsquo;s what Apple&rsquo;s footer navigation is styled like:</p>




<p><img src="/blog/images/49.png" alt="Apple Nav" /></p>




<p>My automatic assumption is enforced by the fact that the <em>Home</em> heading is also black and bold, the only difference being the size.</p>




<p>This is even a paradigm <em>within VS2012 itself</em>. Here&rsquo;s an example on the start page:</p>




<p><img src="/blog/images/50.png" alt="Getting Started" /></p>




<p>Or, the Start tasks&hellip;</p>




<p><img src="/blog/images/51.png" alt="Start" /></p>




<p>The other thing that frustrated me the first time was figuring out how to change team projects. It&rsquo;s not easy to figure out. You need to click the team project name, which looks like a label except for the arrow on the far right edge.</p>




<p><img src="/blog/images/52.png" alt="Changing team projects" /></p>




<p>I like what the team is trying to do here, I just think the navigation needs to be gone over again to reduce the confusion.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2012-06-12T23:32:52+00:00" pubdate data-updated="true">Jun 12<span>th</span>, 2012</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/49/use-enums-to-reduce-markup-maintenance-mvc">Use Enums to Reduce Markup Maintenance [MVC]</a></h2>
  
  <p>
    <p>Have you ever done this before?</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="c">&lt;!&mdash; Decide what CSS class to use for layout &mdash;&gt;</span>
</span><span class='line'>@if (Model.Format == Formats.Table) {
</span><span class='line'>  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;foo foo-layout-table&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>} else if (Model.Format == Formats.Grid) {
</span><span class='line'>  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;foo foo-layout-grid&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>} else if (Model.Format == Formats.Paragraph) {
</span><span class='line'>  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;foo foo-layout-paragraph&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>  <span class="c">&lt;!&mdash; Markup &mdash;&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;/div&gt;</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>Or some other variant of the same idea (trying to assign a CSS class based on some branch logic)?</p>




<p>If you find yourself doing this, I have a pro tip for you: wherever you can, utilize your enum directly in the CSS class name. Why? Because in 2 weeks when you add another layout, you will need to go back into this if statement and add another branch. The other reason is, frankly, this is ugly and not very Razor-ish.</p>




<p>Instead, I&rsquo;d advocate doing it this way:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;foo foo-layout-@Model.Format&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="c">&lt;!&mdash; Markup &mdash;&gt;</span>
</span><span class='line'><span class="nt">&lt;/div&gt;</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>Simple! I found that to be much more intuitive and is the way I&rsquo;ve always approached this. You can use this approach with an Enum, string, or other type where a <code>.ToString()</code> outputs a simple value (booleans!).</p>




<p><em>But Kamran, my logic is much more complex than that.</em> This is when I&rsquo;d recommend pulling out that logic into a view model, creating a <code>@helper</code>, or as a last resort, inline.</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="c">&lt;!&mdash; Helper &mdash;&gt;</span>
</span><span class='line'>@helper LayoutCss() {
</span><span class='line'>  if (Model.Format == Formats.Table) {
</span><span class='line'>      @:foo-layout-table
</span><span class='line'>  } else if (Model.Format == Formats.Grid) {
</span><span class='line'>      @:foo-layout-grid
</span><span class='line'>  } else if (Model.Format == Formats.Paragraph) {
</span><span class='line'>      @:foo-layout-paragraph
</span><span class='line'>  }
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;foo @LayoutCss()&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="c">&lt;!&mdash; Inline &mdash;&gt;</span>
</span><span class='line'>@{
</span><span class='line'>  var layoutCssClass = &quot;&quot;;
</span><span class='line'>
</span><span class='line'>  if (Model.Format == Formats.Table) {
</span><span class='line'>      layoutCssClass = &quot;foo-layout-table&quot;;
</span><span class='line'>  } else if (Model.Format == Formats.Grid) {
</span><span class='line'>      layoutCssClass = &quot;foo-layout-grid&quot;;
</span><span class='line'>  } else if (Model.Format == Formats.Paragraph) {
</span><span class='line'>      layoutCssClass = &quot;foo-layout-paragraph&quot;;
</span><span class='line'>  }
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;foo @layoutCssClass&quot;</span><span class="nt">&gt;</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>The point is to decouple your CSS class logic from your markup as much as you can, so your markup isn&rsquo;t crufted up. What other tips do you have for reducing CSS class headaches?</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2012-06-08T09:49:33+00:00" pubdate data-updated="true">Jun 8<span>th</span>, 2012</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/48/tips-for-updating-from-webapi-beta-to-webapi-rc">Tips for Updating From WebAPI Beta to WebAPI RC</a></h2>
  
  <p>
    <p>I just installed VS 2012 RC (previous codename VS11) to make sure I am on the latest and greatest and I&rsquo;d like to mention a few gotchas I ran into along the way while upgrading <a href="http://keeptrackofmygames.com">Keep Track of My Games</a>.</p>




<h2>Nuget Packages</h2>




<p>One of the first things I did when opening the solution was to compile and run. WHAM. You will get a MissingMethodException:</p>


<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[MissingMethodException: Method not found: &lsquo;Void System.Net.Http.Headers.HttpHeaders.AddWithoutValidation(System.String, System.Collections.Generic.IEnumerable`1&lt;System.String&gt;)&rsquo;.]
</span><span class='line'>   System.Web.Http.WebHost.HttpControllerHandler.AddHeaderToHttpRequestMessage(HttpRequestMessage httpRequestMessage, String headerName, String[] headerValues) +0
</span><span class='line'>   System.Web.Http.WebHost.HttpControllerHandler.ConvertRequest(HttpContextBase httpContextBase) +248
</span><span class='line'>   System.Web.Http.WebHost.HttpControllerHandler.BeginProcessRequest(HttpContextBase httpContextBase, AsyncCallback callback, Object state) +79
</span><span class='line'>   System.Web.Http.WebHost.HttpControllerHandler.System.Web.IHttpAsyncHandler.BeginProcessRequest(HttpContext httpContext, AsyncCallback callback, Object state) +48
</span><span class='line'>   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +268
</span><span class='line'>   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&amp; completedSynchronously) +155</span></code></pre></td></tr></table></div></figure></p>

<p>First issue: Web API had also been updated along with VS 2012&rsquo;s install. That means your previous beta Nuget packages are out of date. Unfortunately, if you go into <em>Manage Nuget Packages</em> you&rsquo;ll find no help in the Updates panel.</p>




<p>Turns out, the IDs have changed! Search for <code>Microsoft.AspNet.WebApi</code> and you&rsquo;ll find the RC packages again. In my solution, I am using:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'>  <span class="nt">&lt;package</span> <span class="na">id=</span><span class="s">&quot;Microsoft.AspNet.Mvc&quot;</span> <span class="na">version=</span><span class="s">&quot;4.0.20505.0&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;package</span> <span class="na">id=</span><span class="s">&quot;Microsoft.AspNet.Razor&quot;</span> <span class="na">version=</span><span class="s">&quot;2.0.20505.0&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;package</span> <span class="na">id=</span><span class="s">&quot;Microsoft.AspNet.WebApi.Client&quot;</span> <span class="na">version=</span><span class="s">&quot;4.0.20505.0&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;package</span> <span class="na">id=</span><span class="s">&quot;Microsoft.AspNet.WebApi.Core&quot;</span> <span class="na">version=</span><span class="s">&quot;4.0.20505.0&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;package</span> <span class="na">id=</span><span class="s">&quot;Microsoft.AspNet.WebApi.WebHost&quot;</span> <span class="na">version=</span><span class="s">&quot;4.0.20505.0&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;package</span> <span class="na">id=</span><span class="s">&quot;Microsoft.AspNet.WebPages&quot;</span> <span class="na">version=</span><span class="s">&quot;2.0.20505.0&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;package</span> <span class="na">id=</span><span class="s">&quot;Microsoft.Net.Http&quot;</span> <span class="na">version=</span><span class="s">&quot;2.0.20505.0&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;package</span> <span class="na">id=</span><span class="s">&quot;Microsoft.Web.Infrastructure&quot;</span> <span class="na">version=</span><span class="s">&quot;1.0.0.0&quot;</span> <span class="nt">/&gt;</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>Once you uninstall your beta packages and install the new RC, you will likely run into a few more issues&hellip;</p>




<h2>Dependency Injection</h2>




<p>I am using Ninject for dependency injection. You will need to adapt this solution to your needs if you <em>aren&rsquo;t</em> using Ninject. You will <a href="http://www.strathweb.com/2012/05/using-ninject-with-the-latest-asp-net-web-api-source/">need to use a new way</a> of setting the DependencyResolver, see this GitHub source repository: <a href="https://github.com/filipw/Ninject-resolver-for-ASP.NET-Web-API">https://github.com/filipw/Ninject-resolver-for-ASP.NET-Web-API</a></p>




<p>Thanks Filip!</p>




<h2>No more generic HttpResponseMessage</h2>




<p>If you had previously been using code like this:</p>




<pre><code>new HttpResponseMessage&lt;T&gt;(someValue)
</code></pre>




<p>You will get compilation errors. The new way to handle this is via the <code>Request</code> property in your controllers:</p>




<pre><code>Request.CreateResponse(HttpStatusCode.OK, result);
</code></pre>




<p>You will need to change any return types from <code>HttpResponseMessage&lt;T&gt;</code> to <code>HttpResponseMessage</code>.</p>




<h2>No need for custom JSON.NET formatter</h2>




<p>If you had previously been using a variant of <a href="http://www.west-wind.com/weblog/posts/2012/Mar/09/Using-an-alternate-JSON-Serializer-in-ASPNET-Web-API">Rick Strahl&rsquo;s JSON.NET formatter</a>, you do not need it anymore as Web API defaults to JSON.NET now. However, if you, like me, want to customize the settings used, you can still do so:</p>




<p><strong>Global.asax or App_Start</strong></p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="kt">var</span> <span class="n">formatter</span> <span class="p">=</span> <span class="n">GlobalConfiguration</span><span class="p">.</span><span class="n">Configuration</span><span class="p">.</span><span class="n">Formatters</span><span class="p">.</span><span class="n">OfType</span><span class="p">&lt;</span><span class="n">JsonMediaTypeFormatter</span><span class="p">&gt;().</span><span class="n">First</span><span class="p">();</span>
</span><span class='line'><span class="n">formatter</span><span class="p">.</span><span class="n">SerializerSettings</span><span class="p">.</span><span class="n">NullValueHandling</span> <span class="p">=</span> <span class="n">NullValueHandling</span><span class="p">.</span><span class="n">Ignore</span><span class="p">;</span>
</span><span class='line'><span class="n">formatter</span><span class="p">.</span><span class="n">SerializerSettings</span><span class="p">.</span><span class="n">Converters</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="k">new</span> <span class="n">StringEnumConverter</span><span class="p">());</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>Thanks to Matt in the comments for trimming the fat off what I had previously.</p>




<h2>No more GetUserPrincipal</h2>




<p>I had previously been using the extension method <code>GetUserPrincipal</code> in my custom Authorize attribute. No more! You can now use <code>System.Threading.Thread.CurrentPrincipal.Identity</code> if you need the current principal in Web API. There&rsquo;s also a convenient <code>User</code> property in the <code>ApiController</code> base class.</p>




<h2>That&rsquo;s it!</h2>




<p>That&rsquo;s about all I ran into. I am also happy to report that <a href="https://github.com/mccalltd/AttributeRouting">AttributeRouting</a> still seems to work fine against the Web API RC and MVC 4 RC! I did some limited browsing around on my site with heavy AJAX calls and everything seemed to work.</p>




<p>Hope this saves you some time!</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2012-06-01T10:59:01+00:00" pubdate data-updated="true">Jun 1<span>st</span>, 2012</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/47/some-thoughts-on-the-vs11-betarcrtm-interface">Some Thoughts on the VS11 Beta/RC/RTM Interface</a></h2>
  
  <p>
    <p>As you may know, the next version of Visual Studio dubbed VS11 <a href="http://www.microsoft.com/visualstudio/11/en-us">is available in Beta form</a> right now for developers worldwide to <strike>complain about</strike> go wild and test against.</p>




<p>While you can learn more about what VS11 offers in terms of new features, I think the biggest thing you&rsquo;ll hear about is feedback regarding it&rsquo;s new user interface style. I want to write down some thoughts I had as a heavy Visual Studio user and self-professed user experience (UX) <em>aficionado</em>.</p>




<h3>Please don&rsquo;t hurt me</h3>




<p>I want to be clear that I am not here to bash on Visual Studio nor complain about the new interface. Rather, I&rsquo;d like to take a constructive look at a couple of the cosmetic changes in store for us.</p>




<h3>I HEARD U LIEK ALL CAPS</h3>




<p>I think the biggest thing I see on the tubes these days are comments about the ALL CAPS menu change from the Beta to the RC as you can see below (this is the Dark Theme):</p>




<p><strong>Beta:</strong><br/>
<img src="/blog/images/42.png" alt="Beta Main Menu" /></p>




<p><strong>RC:</strong><br/>
<img src="/blog/images/41.png" alt="All Caps RC Main Menu" /></p>




<p><strong>What People Are Saying</strong></p>




<p>Why is the main menu SHOUTING AT ME? This is terrible!</p>




<p><strong>What People Are Missing</strong></p>




<p>Whether or not you believe a fundamental user experience principle has been violated here, I think the underlying issue all along has been: why are there <em>so many damn options</em>?</p>




<p>All caps or not, I think the team should be aiming to reduce the amount of time I even need to look at the main menu and even better, totally eliminate or consolidate some of those menus. If I had to list what menus I used the most it would be:</p>




<ol>
<li>Edit &ndash; to get to some advanced options that I can&rsquo;t remember hotkeys for</li>
<li>View &ndash; to see a window I closed at some point or find a window</li>
<li>Build &ndash; to Rebuild/Clean sometimes or build my current project (vs. the entire solution)</li>
<li>Tools &ndash; to get to extension manager for updates or new extensions</li>
<li>File &ndash; to open a project when I&rsquo;m not on the start screen</li>
</ol>




<p>That&rsquo;s about it. So, in other words, I use about 5 out of the 16 total menu options regularly. Does that sound like the Pareto Principle (80/20 rule) at work here? It should at least have crossed your mind. Admittedly, this is <em>just for me</em> but no matter the person, I would expect to find that the typical Visual Studio user does <strong>not</strong> use all the menu options every day or very often.</p>




<p>One of the nice things about VS is that you can totally customize the menu. For example, here&rsquo;s mine right now:</p>




<p><img src="/blog/images/47.png" alt="My Menu" /></p>




<p>Unfortunately, I can&rsquo;t do much more because VS2010 crashes if I try to modify the menus themselves, otherwise I&rsquo;d move Theme, Resharper, Sitecore, and Mindscape into the Tools menu reducing my total menus to only 6. Finally, I&rsquo;d like the ability to hit Alt to enable the menu, otherwise it should be hidden (see Sublime Text). I don&rsquo;t know if there&rsquo;s an extension that enables that.</p>




<p>Just because I have the control to move my menu commands around doesn&rsquo;t mean it solves this problem. There are so many commands in Visual Studio the team could expose but don&rsquo;t simply for that reason, there&rsquo;s just too many. A different kind of menu should be considered that doesn&rsquo;t rely on the &ldquo;classic&rdquo; menu bar pattern.</p>




<p>Is it too crazy to think about a menu inside Visual Studio that acted like the Windows OS menu? It could list my most recent actions or actions I pin, it could group different tasks or let me open an advanced panel to see more tasks. The useful Ctrl-3 shortcut in one of the power tool extensions lets you start typing to search the menu system (and I believe that is what the search box in the top right of VS11 also does); why not build that into a single menu ala Windows 7 Start Menu? Dare I even mention&hellip; a ribbon (<em>shudder</em>)?</p>




<h3>Monochrome is the New Color</h3>




<p>In the VS11 beta, probably the first thing you&rsquo;ll notice is the distinct lack of color. Where&rsquo;d all the pretty icons go?! If you asked me how I felt when I opened it up for the first time, the word &ldquo;depressed&rdquo; probably would make the cut. I know that sounds extreme, but when you talk about how we as humans perceive colors, certain schemes evoke certain emotions.</p>




<p>Again, let&rsquo;s take a look at the dark theme (since it exacerbates the effect):</p>




<p><img src="/blog/images/43.png" alt="Dark Theme in Beta" /></p>




<p>Now, work has been done since the beta to add color back to VS which I believe makes it look <em>so</em> much better:</p>




<p><img src="/blog/images/44.png" alt="Dark Theme in RTM" /></p>




<p>The added color in the icons really makes a difference and I was glad to see it back for the RC and RTM. I also think it&rsquo;s very admirable that the team will release the vector versions alongside Visual Studio for use in our own apps. In this day and age where images need to be scaled for different form factors and &ldquo;Retina&rdquo; displays, I think we&rsquo;ll be seeing more emphasis on vector-based icons. GitHub even <a href="https://github.com/blog/1106-say-hello-to-octicons">created their own font</a> to address the issue. You could argue they may have jumped the gun a bit but hopefully font rendering will continue to improve in modern browsers.</p>




<p>My one criticism is that not all icons will be mono&rsquo;d right away, so with some extensions you&rsquo;ll see something like this:</p>




<p><img src="/blog/images/45.png" alt="Ugh" /></p>




<p>I know they specifically fixed this icon in RC, but I&rsquo;m sure there will be more instances of this, especially in the New File dialog:</p>




<p><img src="/blog/images/46.png" alt="File icons" /></p>




<p>This can be fixed by extension developers, but I hope (as an extension developer myself) that it is not too painful to provide iconography for both the VS2010 and VS11 version of an extension.</p>




<h3>Other Thoughts</h3>




<p>In general, I think those are the two big topics I see while reading blog posts and seeing comments. I may have other thoughts for the overall experience but I&rsquo;ll save them for future posts as I use VS11 more and more.</p>




<p>As always, let me know what you think! Do you have other criticisms of the interface? If you&rsquo;re going to just go on about how you hate M$ and VS11 is terrible, don&rsquo;t bother responding. The VS team would benefit more from constructive feedback.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2012-05-31T19:07:00+00:00" pubdate data-updated="true">May 31<span>st</span>, 2012</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/46/please-go-watch-the-pluralsight-ux-fundamentals-of">Please Go Watch the Pluralsight UX Fundamentals of Design Course</a></h2>
  
  <p>
    <p><a href="http://blog.pluralsight.com/2012/05/30/free-training-on-user-experiences-fundamental-design-principles-by-billy-hollis/">Pluralsight is having a deal right now</a> where if you follow them on Twitter and follow Billy Hollis, you get a free token to watch the <a href="http://www.pluralsight-training.net/microsoft/Courses/TableOfContents?courseName=cux-designprinciples">UX fundamentals course</a>.</p>




<p>After having finished the course (a full 4 hours plus exercises), and while I normally don&rsquo;t like contests that require you to follow people, I would heavily encourage you to take advantage of this offer if you don&rsquo;t have a Pluralsight license.</p>




<p>Whether you&rsquo;re a full-on developer, front-end developer, interaction designer, or a plumber, I think you should watch this course. It&rsquo;s chock full of awesome advice and design guidance, especially aimed at .NET developers and enterprise developers.</p>




<p>I&rsquo;ve already learned some neat techniques I can start using immediately while I&rsquo;m developing the next version of Keep Track of My Games.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2012-05-31T01:26:06+00:00" pubdate data-updated="true">May 31<span>st</span>, 2012</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/45/sitecore-and-net-framework-45">Sitecore and .NET Framework 4.5</a></h2>
  
  <p>
    <p><strong>Update 1 (8/28/2012)</strong>: As of Sitecore CMS 6.5.0 rev. 120706 (6.5.0 Update-5), this issue should have been fixed. <a href="http://sdn.sitecore.net/Products/Sitecore%20V5/Sitecore%20CMS%206/ReleaseNotes/ChangeLog.aspx#650update5">See here</a> under &ldquo;Miscellaneous&rdquo; fixes.</p>




<p>Just a quick note that as of this post, Sitecore (6.5.x) does not yet support .NET Framework 4.5. If you try to install Sitecore, you will be able to access the homepage and login page, but you won&rsquo;t be able to login. You&rsquo;ll see an error like this:</p>




<p><img src="/blog/images/40.png" alt="Error" /></p>




<blockquote><p>Object of type &lsquo;System.Int32&rsquo; cannot be converted to type &lsquo;System.Web.Security.Cryptography.Purpose&rsquo;</p></blockquote>




<p>This is because in .NET 4.5 there are some new namespaces in <code>System.Web</code> that I guess return a different value than what Sitecore was expecting (or previous .NET 4 consumers).</p>




<p>I googled this error to no avail. Sitecore knows about it but I am posting it in case anyone else (which there will be more soon) run into this.</p>




<h2>Fix it</h2>




<p>Unfortunately, this requires you to (in this order):</p>




<ul>
<li>Uninstall VS11 if you have it installed</li>
<li>Uninstall .NET 4.5 (Multi-Targeting and the core one)</li>
<li>Reinstall .NET 4 (yes, you need to)</li>
</ul>




<p>I&rsquo;m a bit sad since a few of my projects are MVC4 so in order to use SC locally I now can&rsquo;t work on those projects on this computer. If you have the ability to use a VM or equivalent, I&rsquo;d go that route to avoid having to muck up your main work environment.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2012-05-11T18:24:25+00:00" pubdate data-updated="true">May 11<span>th</span>, 2012</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/44/why-am-i-forced-to-store-my-users-contact-informat">Why Am I Forced to Store My User&#8217;s Contact Information?</a></h2>
  
  <p>
    <p>OpenID and OpenAuth are cool. What&rsquo;s not cool about either approach is that I have no way to say, &ldquo;Notify this user by whatever means available.&rdquo; Instead, I am forced to collect that information and figure out a way to store it that is safe from prying eyes.</p>




<p>What I&rsquo;d like to see, and tell me if this exists, is a way to not only have people <em>authenticate</em> using their service of choice, but also to be <em>notified</em> via that service. In other words, OpenID already lets me ask for a user&rsquo;s email or phone but even that isn&rsquo;t really standard (see Google). That is not <em>exactly</em> what I want, though. I just want a way to notify the user. That might be email, it might be phone, it might be proprietary (Facebook notification). Just tell me what&rsquo;s available to me and I can decide based on that what to send (small message for phones, email for email).</p>




<p>As I understand the landscape, the only way to get around storing information myself is to buy into an infrastructure like Facebook to handle it for me&hellip; except that not everyone is enthused about being forced to use Facebook to use my app and it&rsquo;s not in my best interest to alienate my user base.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2012-04-19T04:44:51+00:00" pubdate data-updated="true">Apr 19<span>th</span>, 2012</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/43/attributerouting-now-supports-web-api">AttributeRouting Now Supports Web API</a></h2>
  
  <p>
    <p>If you&rsquo;re <em>not</em> using <a href="https://github.com/mccalltd/AttributeRouting">AttributeRouting</a> you&rsquo;re missing out. I&rsquo;m serious, I am not sure how any ASP.NET MVC application can live without this library. Like <a href="http://getcassette.net">Cassette</a>, it&rsquo;s become a standard in my .NET tool belt.</p>




<h3>AttributeRouting at a Glance</h3>




<p>If you&rsquo;re like me, you hate being stuck in this <code>{controller}/{action}</code> world that is the default MVC experience. I&rsquo;d rather have URLs like this:</p>




<ul>
<li>/library/1 (GET, POST)</li>
<li>/library/1/games/1 (GET, POST, PUT, DELETE)</li>
<li>/search/?q=keyword (GET)</li>
<li>/register (GET, POST)</li>
</ul>




<p>In other words, more control over my URLs. Sure, you <em>could</em> be a caveman and use Global.asax for all of that, but I think you&rsquo;ll find it quickly growing out of hand unless you create methods to take care of different controllers.</p>




<p>Instead, wouldn&rsquo;t this be easier and more discoverable?</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="na">[RoutePrefix(&quot;library&quot;)]</span>
</span><span class='line'><span class="k">public</span> <span class="k">class</span> <span class="nc">LibraryController</span> <span class="p">:</span> <span class="n">Controller</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// GET: /</span>
</span><span class='line'>    <span class="c1">// GET: /library</span>
</span><span class='line'>
</span><span class='line'><span class="na">    [GET(&quot;&quot;, RouteName = &quot;default&quot;, IsAbsoluteUrl = true)]</span>
</span><span class='line'><span class="na">    [GET(&quot;&quot;, RouteName = &quot;library&quot;)]</span>
</span><span class='line'>    <span class="k">public</span> <span class="n">ActionResult</span> <span class="nf">Index</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// GET: /library/{userId}</span>
</span><span class='line'><span class="na">    [GET(&quot;{userId}&quot;)]</span>
</span><span class='line'>    <span class="k">public</span> <span class="n">ActionResult</span> <span class="nf">ByUser</span><span class="p">(</span><span class="kt">int</span> <span class="n">userId</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// POST: /library</span>
</span><span class='line'><span class="na">    [POST(&quot;&quot;)]</span>
</span><span class='line'>    <span class="k">public</span> <span class="n">ActionResult</span> <span class="nf">Filter</span><span class="p">(</span><span class="n">Criteria</span> <span class="n">criteria</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>That is exactly what AttributeRouting lets you do (and more!).</p>




<h3>Web API</h3>




<p>Now what if you want to do the same thing with ASP.NET Web API (or self-hosted Web API)? The short answer is <strong>now you can</strong>, though a week ago you couldn&rsquo;t. Having embarked on using Web API for my latest project, I decided that since I couldn&rsquo;t live without AR in MVC, I also couldn&rsquo;t live without it for Web API. So I forked the project, <a href="https://github.com/mccalltd/AttributeRouting/pull/57">did my thing</a>, and now it&rsquo;s in v2.0 which is <a href="http://nuget.org/packages?q=attributerouting">out now on Nuget</a>.</p>




<p>I tried hard to keep the exact same convention and syntax:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="na">[RoutePrefix(&quot;library&quot;)]</span>
</span><span class='line'><span class="k">public</span> <span class="k">class</span> <span class="nc">LibraryController</span> <span class="p">:</span> <span class="n">ApiController</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'><span class="na">  [GET(&quot;&quot;)]</span>
</span><span class='line'>  <span class="k">public</span> <span class="n">LibraryViewModel</span> <span class="nf">Get</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="na">  [HttpRoute(&quot;custom&quot;, HttpMethod.Get, HttpMethod.Post)]</span>
</span><span class='line'>  <span class="k">public</span> <span class="n">HttpResponseMessage</span> <span class="nf">Custom</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>Using Web API in a self-hosted environment? Not a problem, I made sure self-hosted works the same way, just grab the <a href="http://nuget.org/packages/AttributeRouting.WebApi.Hosted">appropriate Nuget package</a>.</p>




<p>It was a fun project and I learned a lot about generics. The end result was that I didn&rsquo;t even need to use generics and that sometimes generics are a hindrance rather than a help (such as having classes that require 7-8 generic arguments). I was also able to <a href="/32/using-nuspec-inheritance-to-reduce-nuget-maintenan">use what I learned</a> from contributing to Cassette and bring it to AttributeRouting.</p>




<p>It seems Tim is a happy camper and it always gives me a warm, fuzzy feeling whenever someone appreciates help:</p>




<p><img src="/blog/images/39.png" alt="Appreciation Goes A Long Way" /></p>




<p>If you haven&rsquo;t contributed to a project you love, you should give it a chance, you always learn something!</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2012-04-17T21:08:22+00:00" pubdate data-updated="true">Apr 17<span>th</span>, 2012</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/42/windows-8-windows-phone-7-and-ktomg">Windows 8, Windows Phone 7, and KTOMG</a></h2>
  
  <p>
    <p>You may have remembered me saying in the last few posts I&rsquo;ve been working on v2 of <a href="http://keeptrackofmygames.com">KTOMG</a>. It&rsquo;s going well and progress is being made. I also recently acquired a Windows Phone for agreeing to release an app before June. Funnily enough, I learned from Jeff Brand today while at <a href="http://twincitiescodecamp.com">Twin Cities Code Camp</a> that there will be some accelerator labs in May that will provide a way to quickly get up and running on Windows 8. Needless to say, I decided that it would be good to target both platforms, which means I have even more work to do in the next couple months (like I need more?).</p>




<p>This is pretty exciting. I have big plans for KTOMG and I really hope it pans out. The plan is to release v2 on 3 platforms and to be on the Windows 8 app store on day one. It will be technically interesting to see how separation of the codebase will be done on all three of these different platforms. For WP7, I&rsquo;m sure I&rsquo;ll need to write a XAML front-end but with Windows 8, I can probably reuse most of my existing web code. It&rsquo;ll also be interesting to take advantage of each platform&rsquo;s unique abilities (push notifications, camera, etc.).</p>




<p>Bring it on!</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2012-04-14T22:40:51+00:00" pubdate data-updated="true">Apr 14<span>th</span>, 2012</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/41/jqueryformatxml-plugin">jquery.formatXml Plugin</a></h2>
  
  <p>
    <p>Awhile ago I wrote a <a href="https://github.com/kamranayub/jQuery-XML-Helper">shim for jQuery to add pseudo-XML compatibility</a> that makes it easier to manipulate and read XML cross-browser on the client. I did it because I was working on a legacy application that decided it was a good idea to store the model in XML in a hidden input. No, I can&rsquo;t switch to Knockout, as much as I&rsquo;d want to.</p>




<p>However, I really liked the trick of showing a JSON output of a Knockout view model on a page while debugging on another project since it made it easier to see what was happening behind the scenes.</p>




<p>I came back to do some work on this legacy app and missed that in-your-face feedback. So I wrote an extension to my own plugin that traverses an XML jquery object and creates a tree to output to the page:</p>




<script src="https://gist.github.com/2346014.js?file=jquery.formatXml.js"></script>




<p>Here&rsquo;s a jsFiddle of the output:</p>




<iframe style="width: 100%; height: 300px" src="http://jsfiddle.net/kamranayub/XJGLe/embedded/" allowfullscreen="allowfullscreen" frameborder="0"></iframe>




  </p>
  <span class="meta">
    written 








  



<time datetime="2012-04-10T00:42:53+00:00" pubdate data-updated="true">Apr 10<span>th</span>, 2012</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/40/ux-applies-to-api-design-too">UX Applies to API Design Too</a></h2>
  
  <p>
    <p>I&rsquo;m working on enhancing a component we use for cryptography at work today. Previously it had a lot of useful methods, but no documentation. I was able to add XML documentation and now it&rsquo;s fully Intellisense-friendly:</p>




<p><img src="/blog/images/38.png" alt="Intellisense" /></p>




<p>That&rsquo;s one step for making your API friendly, even though it&rsquo;s a little more work.</p>




<p>What I want to point out is that I also made exceptions friendly. Cryptography is not an easy thing to understand and even I don&rsquo;t understand all of it. We have a method that lets you generate a new key for a given algorithm (the API defaults to <code>RijndaelManaged</code> as best practice), but it also lets you specify a key size.</p>




<p>I did a couple things:</p>




<ol>
<li><p>The argument accepts key size in bits, as that is what the .NET API uses and is what you see online (&ldquo;128 bit&rdquo;).</p></li>
<li><p>The API will tell you if the key size is invalid. Not only that, it will list out what the acceptable key sizes are.</p></li>
</ol>




<p>Check it out:</p>


<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Test method SymmetricEncryption_Should_Throw_Exception_For_Invalid_Key_Sizes threw exception:
</span><span class='line'>
</span><span class='line'>System.ArgumentException: 56 bits is not a valid key size for RijndaelManaged. Valid key sizes: 128 bits, 192 bits, 256 bits
</span><span class='line'>
</span><span class='line'>Parameter name: keySize</span></code></pre></td></tr></table></div></figure></p>

<p>And it didn&rsquo;t even take much code:</p>




<script src="https://gist.github.com/2292726.js?file=SymmetricEncryption.cs"></script>




<p>Never forget:</p>




<blockquote><p>UX is just as important for API design</p></blockquote>




<p>Put yourself in your consumer&rsquo;s shoes and design it with them in mind. They&rsquo;ll thank you for it, trust me.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2012-04-03T20:05:22+00:00" pubdate data-updated="true">Apr 3<span>rd</span>, 2012</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/39/a-few-hours-with-webapi-mvc-the-good-and-the-bad">A Few Hours With WebAPI + MVC, the Good and the Bad</a></h2>
  
  <p>
    <p>I&rsquo;m working on the next version of <a href="http://keeptrackofmygames.com">Keep Track of My Games</a> and it&rsquo;s an opportunity to upgrade to and play with MVC 4, especially the new <a href="http://asp.net/web-api">WebAPI</a>.</p>




<h2>Getting WebAPI</h2>




<p>This was not super apparent from the tutorials on asp.net but to get the WebAPI, you can simply obtain it from Nuget. Most of the tutorials start with File > New Project, but I wanted to incorporate it into a newly upgraded MVC 4 project. <em>Fun fact:</em> MVC4 is also available on Nuget, score!</p>




<p><img src="/blog/images/37.png" alt="Nuget" /></p>




<p>Which one?! Since there&rsquo;s no description or information regarding the &ldquo;Data&rdquo; package (assuming it will make it easy to integrate with EF), I went with the <strong>ASP.NET Web API (Beta)</strong> package.</p>




<h2>WebAPI is Not MVC</h2>




<p>I dislike things that cause friction. Unfortunately, there&rsquo;s some friction with using WebAPI for the first time. I&rsquo;m not sure if all of it can be removed, but hopefully some of it can be mitigated. If you haven&rsquo;t used WebAPI before, it&rsquo;s important to know <strong>WebAPI is not MVC</strong>.</p>




<p>Here&rsquo;s what I struggled with:</p>




<ol>
<li><p>Configuration is separate. You have to use the not-very-intuitively-named <code>GlobalConfiguration.Configuration</code> singleton to configure WebAPI. Seriously? Why not <code>HttpConfiguration</code> or even better, <code>ApiConfiguration</code>? To match typical MVC conventions (GlobalFilters.Filters, RouteTable.Routes), I&rsquo;d propose <code>HttpApi.Api</code> or something along those lines.</p></li>
<li><p>Routing is separate. I use <a href="https://github.com/mccalltd/AttributeRouting">AttributeRouting</a> and while I haven&rsquo;t explicitly tried it with WebAPI, I don&rsquo;t think it will work, but maybe it will. You register routes using the <code>MapHttpRoute</code> extension.</p></li>
<li><p>It doesn&rsquo;t plug into MVC&rsquo;s <code>DependencyResolver</code>. This was annoying. I use Ninject.MVC3 for my DI container, but that doesn&rsquo;t automatically make it available to WebAPI. Nay, <a href="http://haacked.com/archive/2012/03/11/itrsquos-the-little-things-about-asp-net-mvc-4.aspx">you have to jump through some hoops</a> to get it to work. Once you do, it works just as you&rsquo;d expect. <strong>Update:</strong> At a presentation today at Twin Cities Code Camp, Matt Milner presented on Web API and I saw he used a simpler method to plug Ninject into Web API:</p>

<pre><code> configuration.SetResolver(t =&gt; kernel.TryGet(t), t =&gt; kernel.GetAll(t));
</code></pre></li>
<li><p>Attributes are different. Do you have a custom <code>[Authorize]</code> attribute in MVC? You&rsquo;ll have to port it to WebAPI. This isn&rsquo;t a bad thing, it&rsquo;s just not apparent when you see this:</p>

<pre><code> [Authorize]
 Product GetProductById(int id) { }
</code></pre>

<p> To follow the convention, I prefixed my custom attributes with <code>Http</code> to make it more apparent they&rsquo;re different.</p></li>
<li><p>JSON.NET <em>will be</em> the default JSON serializer, but it&rsquo;s not <em>yet</em>. This means you have to register a custom formatter. I used the one <a href="http://www.west-wind.com/weblog/posts/2012/Mar/09/Using-an-alternate-JSON-Serializer-in-ASPNET-Web-API">on Rick Strahl&rsquo;s blog</a> (with some modifications) but you could try the several JsonNet Nuget packages for WebAPI (<a href="http://nuget.org/packages/WebAPIContrib.Formatters.JsonNet/0.6.0">WebAPIContrib.Formatters.JsonNet</a> or <a href="http://nuget.org/packages/netfx-WebApi.JsonNetFormatter/1.0.0.11">NetFx</a>).</p></li>
</ol>




<p>And that&rsquo;s about it. Once I overcame those &ldquo;frictions&rdquo; everything started to go smoothly. I haven&rsquo;t played with it a ton, but I&rsquo;m sure I&rsquo;ll write about it as I use it more.</p>




<h2>Removing the friction</h2>




<p>While I understand WebAPI is separate (but equal?) from MVC to allow for self-hosting or MVC-independent use cases, let&rsquo;s be honest: who are going to be the majority consumers of the API? MVC peeps. If there isn&rsquo;t already, there needs to be a &ldquo;bridge&rdquo; that makes it easier to use for MVC consumers.</p>




<p>The bridge should:</p>




<ol>
<li><strike>Plug into routing (so AttributeRouting sees it?)</strike> <a href="https://github.com/mccalltd/AttributeRouting/pull/57">I&rsquo;ve added Web API support</a> to AttributeRouting directly. It will be in v2.</li>
<li>Plug into whatever dependency resolver you have set</li>
<li>Do something else I haven&rsquo;t run into yet</li>
</ol>




<p>A Nuget package that added a WebActivator start up wouldn&rsquo;t be too hard. Maybe it doesn&rsquo;t even need to &ldquo;plug&rdquo; into the pipeline, it can simply make it easier to see and configure WebAPI. The auto-DI integration alone would be a big win.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2012-04-03T18:42:13+00:00" pubdate data-updated="true">Apr 3<span>rd</span>, 2012</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/38/can-i-use-signalr-to-design-a-typical-single-page">Can I Use SignalR to Design a &#8220;Typical&#8221; Single Page Application?</a></h2>
  
  <p>
    <p>This post is a stream of conciousness kind of post. I know I may be totally off base on some things but I need somewhere to write this so I can review and think about it, maybe pose it to people and see where my thinking is flawed or if there&rsquo;s an obvious thing I&rsquo;m not seeing.</p>




<h2>The Context</h2>




<p>You&rsquo;re designing some sort of client-based application that communicates via AJAX (it can be Backbone, it can be Knockout, whatever). You&rsquo;re using ASP.NET MVC as the back end, maybe even the new fancy Web API.</p>




<h2>The Problem</h2>




<p>Let&rsquo;s say your API is supposed to be only used by your application; you have no intention of making it available for all to use. The problem is that no matter what measures you take, it&rsquo;s all HTTP and it&rsquo;s all public. For many of us, that isn&rsquo;t what we really want. If I make a URL <code>/api/users/{id}</code>, I really don&rsquo;t want other people requesting that URL.</p>




<p>So far in my Googling and experience, there are a few things you can do to <strong>reduce</strong> malicious abuse of your API:</p>




<ol>
<li>Issue session-based or cookie-based tokens with timeouts</li>
<li>Include Anti-CSRF tokens in your AJAX headers</li>
<li>Make sure people are authenticated before issuing authorizable requests</li>
<li>Do checks and throttle requests (no more than x requests from this user per second)</li>
</ol>




<p>I think these are problems we generally face even in a &ldquo;non-rich&rdquo; application (simple server-side design). I could easily issue 100 Fiddler requests per second against a page on your site and maybe bring it down. Including an AntiXssToken might help with that. Maybe we don&rsquo;t care about that. However, it seems the problem is exacerbated, or at least more apparent, when we&rsquo;re talking about AJAX requests because we&rsquo;re exposing our data in an easy-to-consume format (JSON/XML/etc). If not properly designed and secured, Joe Developer can write a client that consumes your API. For public APIs, this is great! For APIs you just want to use for your application&hellip; not so great.</p>




<p>One of the things I&rsquo;m not sure about is how site agnostic these defensive measures are and why it&rsquo;s so hard to find information on how to implement them. Can ASP.NET Web API bake these into the framework? Why or why not? Is this not so common as to warrant more real-world articles/tutorials on how to do it? Am I not searching correctly? Do most people not care?</p>




<blockquote><p>All I want is a not-so-public API my browser-based app can consume</p></blockquote>




<h2>What about SignalR?</h2>




<p>This is just me thinking out loud. Could a library like SignalR help with this? By using a single connection, no longer will I have to create easily consumable URLs like <code>/api/x</code>. Instead, I could create hubs with my API methods I want, and call them in my client code. Authorizing the requests would work as they usually have in the past.</p>




<p>On the surface it sounds like a better idea, but am I missing something? Does it help at all? I could see it providing other benefits, like being able to easily implement multi-user interaction if I wanted in the future.</p>




<p>Would the problem just shift? Now as Joe Developer could I simply reference the generated SignalR scripts and write my own client app? Is it harder or easier to abuse SignalR vs. HTTP URLs?</p>




<p>I don&rsquo;t know yet but I&rsquo;d like to research the topic more; learn more about REST security using tokens and session-based methods.</p>




<h2>Is this even an issue?</h2>




<p>Let&rsquo;s say I implemented and took measures to reduce the likelihood of abuse in my exposed API. Is this even an issue anymore? From what I gather, general consensus is that you can&rsquo;t eliminate the ability for an undesirable user to abuse your API, you can only try to mitigate it as best you can. I still wish it was &ldquo;that easy&rdquo; to secure it. Am I missing something obvious here?</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2012-03-29T21:25:00+00:00" pubdate data-updated="true">Mar 29<span>th</span>, 2012</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/37/getting-cassettes-compiled-knockout-templates-to-w">Getting Cassette&#8217;s Compiled Knockout Templates to Work in KO 2.0</a></h2>
  
  <p>
    <p>The Knockout <a href="http://knockoutjs.com/documentation/template-binding.html#note_4_dynamically_choosing_which_template_is_used">template binding</a> documentation does a good job explaining how to use KO with jQuery Templates and even Underscore templates, however, it does not explain how (or if) you can use compiled templates outside of the HTML markup.</p>




<p><a href="http://getcassette.net/documentation/html-templates/knockoutjs-jquery-tmpl">Cassette</a> offers functionality to automatically compile and bundle your HTML templates, making it an excellent tool for more advanced Knockout development where you want to separate your templates. Unfortunately, in KO 2.0.0, it&rsquo;s broken!</p>




<p>The fix is to extend KO&rsquo;s built in jQuery Template engine with some logic to check and see if the named template is already precompiled. KO assumes that the name in a template binding refers to a DOM element with the given ID. Unfortunately, in our case, it refers to the precompiled template name.</p>




<p>Here is a plugin I wrote that fixes this issue. I&rsquo;ve tested it in a limited capacity and I do wonder if <code>text</code> needs to be stubbed out more, but so far this hasn&rsquo;t caused any issues. This should work for adding compiled template support <em>in general</em> to Knockout (for jquery.tmpl), not just Cassette.</p>




<script src="https://gist.github.com/2151977.js?file=knockout.compiledTemplateSource.js"></script>




  </p>
  <span class="meta">
    written 








  



<time datetime="2012-03-22T00:57:31+00:00" pubdate data-updated="true">Mar 22<span>nd</span>, 2012</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/35/working-with-computed-columns-in-ef-43">Working With Computed Columns in EF 4.3</a></h2>
  
  <p>
    <p>There&rsquo;s not a ton of information out there on how to handle computed columns in EF. It turns out it is pretty straightforward if you know what to do.</p>




<h2>Telling EF about your computed column</h2>




<p>First, if all you want to do is manually create a function and use it in a column, you only need to decorate your model property with <code>[DatabaseGenerated(DatabaseGeneratedOption.Computed)]</code> as seen here:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="k">public</span> <span class="k">class</span> <span class="nc">Person</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">FirstName</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">LastName</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="na">    [DatabaseGenerated(DatabaseGeneratedOption.Computed)]</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">FullName</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>You should know that <strong>if possible, try to keep &ldquo;computed&rdquo; values in your application.</strong> This is my opinion from an ease of use POV, not a design POV. I say it because unless you really <em>need</em> a computed column, you could just as easily create a read-only property that EF ignores.</p>




<p>However, in some cases, a computed column is a viable option such as when you need to sort (on the database-side) against a computed value. That was my own reason for using a computed.</p>




<h2>Manually adding the function and column</h2>




<p>We&rsquo;ve told EF to ignore our property and treat it as a computed column. Now how do we actually <em>create</em> the column? Well, what I did previous to EF Migrations was to just do it all manually through SQL Management Studio. This is entirely OK to do, you just need to make sure you save the script somewhere or remember to do it anytime you create a new database for your application.</p>




<p>You can now go into SSMS and delete the column EF generated (or add it if it&rsquo;s new). Make sure you create your function first:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="k">CREATE</span> <span class="k">FUNCTION</span> <span class="p">[</span><span class="n">dbo</span><span class="p">].[</span><span class="n">GetFullName</span><span class="p">]</span>
</span><span class='line'><span class="p">(</span>
</span><span class='line'>    <span class="c1">&mdash; Add the parameters for the function here</span>
</span><span class='line'>    <span class="o">@</span><span class="n">FirstName</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span>
</span><span class='line'>    <span class="o">@</span><span class="n">LastName</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
</span><span class='line'><span class="p">)</span>
</span><span class='line'><span class="k">RETURNS</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span>
</span><span class='line'><span class="k">AS</span>
</span><span class='line'><span class="k">BEGIN</span>
</span><span class='line'>    <span class="k">DECLARE</span> <span class="o">@</span><span class="n">FullName</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">SELECT</span> <span class="o">@</span><span class="n">FullName</span> <span class="o">=</span> <span class="o">@</span><span class="n">FirstName</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="o">@</span><span class="n">LastName</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">RETURN</span> <span class="o">@</span><span class="n">FullName</span><span class="p">;</span>
</span><span class='line'><span class="k">END</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>That approach worked fine for me, since I use Schema Compare (or used to!) to migrate my database between environments.</p>




<h2>Using EF Migrations</h2>




<p>Now that EF 4.3 has been released, we can all enjoy the benefit of <a href="http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-automatic-migrations-walkthrough.aspx">Database Migrations</a>. What I like about this approach is that it&rsquo;s very deliberate and discoverable. I could clone my repository onto a new PC and run the <code>Update-Database</code> command to do <em>everything</em>, plus now we can migrate backwards if needed. It&rsquo;s excellent!</p>




<p>I am using automatic migrations for <a href="http://keeptrackofmygames.com">KTOMG</a>, so what I had to do first was manually create a new migration in the Package Manager console:</p>




<pre><code>$&gt; Add-Migration CustomFunction
</code></pre>




<p>This will scaffold a new, empty migration:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="k">public</span> <span class="k">partial</span> <span class="k">class</span> <span class="nc">CustomFunction</span> <span class="p">:</span> <span class="n">DbMigration</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">Up</span><span class="p">()</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">Down</span><span class="p">()</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>Now we can be really cool cats. In this migration, all we have to do is execute our <code>CREATE FUNCTION</code> SQL statement in the <code>Up</code> method, along with dropping and re-adding the column:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">Up</span><span class="p">()</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="c1">// Create function</span>
</span><span class='line'>    <span class="n">Sql</span><span class="p">(</span><span class="s">@&quot;</span>
</span><span class='line'><span class="s">CREATE FUNCTION [dbo].[GetFullName] </span>
</span><span class='line'><span class="s">(</span>
</span><span class='line'><span class="s">&mdash; Add the parameters for the function here</span>
</span><span class='line'><span class="s">@FirstName varchar(50),</span>
</span><span class='line'><span class="s">@LastName varchar(50)</span>
</span><span class='line'><span class="s">)</span>
</span><span class='line'><span class="s">RETURNS varchar(255)</span>
</span><span class='line'><span class="s">AS</span>
</span><span class='line'><span class="s">BEGIN</span>
</span><span class='line'><span class="s">DECLARE @FullName varchar(255);</span>
</span><span class='line'>
</span><span class='line'><span class="s">SELECT @FullName = @FirstName + &#39; &#39; + @LastName;</span>
</span><span class='line'>
</span><span class='line'><span class="s">RETURN @FullName;</span>
</span><span class='line'><span class="s">END</span>
</span><span class='line'><span class="s">&quot;</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// Add the computed column</span>
</span><span class='line'>    <span class="n">DropColumn</span><span class="p">(</span><span class="s">&quot;Person&quot;</span><span class="p">,</span> <span class="s">&quot;FullName&quot;</span><span class="p">);</span>
</span><span class='line'>    <span class="n">Sql</span><span class="p">(</span><span class="s">@&quot;</span>
</span><span class='line'><span class="s">ALTER TABLE [dbo].[Person]</span>
</span><span class='line'><span class="s">ADD [FullName] AS ([dbo].<a href="[FirstName],[LastName]">GetFullName</a>);</span>
</span><span class='line'><span class="s">&quot;</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>Take note of the <code>true</code> parameter at the end of the <code>Sql()</code> call. This explicitly tells EF <em>not</em> to include the statement in the migration transaction. If you don&rsquo;t do this, SQL Server will complain that the CREATE FUNCTION statement must be the only one in the batch.</p>




<p>Now let&rsquo;s scaffold our tear down step. We should drop the column first, drop the function, and then finally re-add the basic column back.</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">Down</span><span class="p">()</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="n">DropColumn</span><span class="p">(</span><span class="s">&quot;Person&quot;</span><span class="p">,</span> <span class="s">&quot;FullName&quot;</span><span class="p">);</span>
</span><span class='line'>    <span class="n">Sql</span><span class="p">(</span><span class="s">&quot;DROP FUNCTION [dbo].[GetFullName]&quot;</span><span class="p">);</span>
</span><span class='line'>    <span class="n">AddColumn</span><span class="p">(</span><span class="s">&quot;Person&quot;</span><span class="p">,</span> <span class="s">&quot;FullName&quot;</span><span class="p">,</span> <span class="n">c</span> <span class="p">=&gt;</span> <span class="n">c</span><span class="p">.</span><span class="n">String</span><span class="p">(</span><span class="n">nullable</span><span class="p">:</span> <span class="k">true</span><span class="p">,</span> <span class="n">maxLength</span><span class="p">:</span> <span class="m">255</span><span class="p">));</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>I would take care to make sure the column is re-created using the original schema EF created.</p>




<p>Now we can tell EF to migrate to the latest version:</p>




<pre><code>$&gt; Update-Database -Verbose (or -Script, to preview)
</code></pre>




<p>Voila, you should now have a brand spankin&#8217; new computed column.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2012-03-18T04:38:15+00:00" pubdate data-updated="true">Mar 18<span>th</span>, 2012</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/34/i-wish-i-could-do-all-the-things">I Wish I Could Do All the Things</a></h2>
  
  <p>
    <p>Do you ever have the problem where you have so many &ldquo;cool&rdquo; ideas you want to work on, but don&rsquo;t have enough time? When I started out in web development, I had a ton of time, being a high school student. I ran out of ideas by the time I was in college, but now after some time working &ldquo;in the real world,&rdquo; I&rsquo;ve lately had a torrent of ideas that I wish I could spend time on. For some, I&rsquo;ve started on them, but I find it hard to make time for them.</p>




<h2>The Ideas</h2>




<p>Here&rsquo;s a rundown of all the ideas in my head that I wish I could spend time on:</p>




<ul>
<li>A web-based multiplayer game (I have started working on this)</li>
<li>A web app related to coding (I started it a little)</li>
<li>A web site (just ideas written down)</li>
<li>A project for work (I started a little)</li>
<li>A crazy idea for an app (IDE?) for writing code (yah, right, I&rsquo;ll never be able to do this&hellip; unless it was web-based)</li>
<li>A GitHub-style front-end for TFS because TFS is not social</li>
<li><a href="http://keeptrackofmygames.com">Keep Track of My Games</a> (v1 finished, but wish I could work on v2)</li>
<li><a href="http://getcassette.net">Cassette</a> for Node.js

<ul>
<li>I have no idea if this makes sense for Node, but I&rsquo;ve found existing asset management packages not as easy to use as Cassette</li>
</ul>
</li>
</ul>




<p>You can be sure there&rsquo;s more but these are off the top of my head.</p>




<h2>What&rsquo;s blocking?</h2>




<p>Is it totally true I don&rsquo;t have time to work on these? Not exactly. My problem is that having two really big hobbies (gaming + development) and having to work in one hobby (development) conflict with each other. After coming home from developing all day, I am sometimes motivated to work hard on an idea for a few hours (or all night) but that quickly turns to me being burnt out and I have a hard time recovering from it to continue being motivated to work on an idea. More often, I want to relax and play some games or spend time with friends.</p>




<p>The other issue is that my idea list and what I <em>want</em> for each of these ideas quickly turns into a humongous wish list and I start to doubt I can even begin to finish the list. I&rsquo;ve done enough &ldquo;agile&rdquo; development at work to realize I can prioritize and start small and then iterate, which is what I did with KTOMG but then I have so many other ideas, it still feels like too much.</p>




<p>Money is also an issue. I want to implement this and that, but it&rsquo;s going to cost <em>me</em> money to do it. I have loans to pay off (thanks, education), a car to payoff, and rent to pay, not to mention daily or life expenses. I already spend quite a bit and KTOMG still costs me a fair amount to keep running (especially now that AppHarbor has $10 custom domains and $20 SSL). Partly that is dictated by technology, right? I could write everything in PHP and pay for cheap hosting, but I like being a .NET developer and lately I like being a Node/JS developer. Furthermore, complex ideas sometimes need complex hosting. KTOMG has a scheduled job but because I&rsquo;m cheap, it&rsquo;s not a background worker&hellip; it&rsquo;s a scheduled URL request to a &ldquo;secret&rdquo; URL that initiates a 2 minute job. My database is hosted at a different host, which makes the site slower because it&rsquo;s expensive to host SQL Server on AppHarbor.</p>




<p>If an idea I had were to generate revenue, and several of my ideas I&rsquo;m working on <em>could</em>, expenses would be less of an issue. When I released TorrentTyphoon, hosting was cheap and the site paid for itself (I think during my 4 years of high school I made around $10,000 in freelance and ad revenue). The main issue is that I still need to pay for the idea while I&rsquo;m developing it or testing it, and what happens if I release it and it goes nowhere? I&rsquo;m the one who has to pay for it.</p>




<h2>So what&rsquo;s the solution?</h2>




<p>I&rsquo;ve found that if I <em>force myself to start</em> working on an idea, I will be carried off and will work on it continuously for awhile. The hard part is actually sitting down and opening up the project. For KTOMG, I said to myself that I&rsquo;d spend an hour a day for a week working on the site. What happened was that &ldquo;hour&rdquo; turned into several hours and it was really fun. The reward was making an app that actually accomplished what I wanted. Then the ideas started getting bigger (make it AJAX, support multiple release dates, let me organize, let me tag, etc. etc.) and it&rsquo;s almost as if I became scared to work on it&hellip; for fear of it taking so much time; <em>plus</em> those features were not the core of what I wanted for myself, and if I don&rsquo;t really want to use them, what&rsquo;s the motivation for me to implement them? There are around 80 people that use the site&hellip; and it does <em>exactly what I need it to</em>. It&rsquo;s hard for me to justify spending time adding more features, <em>even though I realize deep down it&rsquo;ll attract more users.</em></p>




<p>What I have had luck with is creating and working on tiny ideas. DotJson was a tiny idea. My latest UnderscoreKO was a tiny idea. This site was a tiny idea. These ideas are 1 week projects or less and they have a finite end, which I seem to do better on. They are spawned because <em>I</em> want to use them and I make them public so others can too.</p>




<p>I&rsquo;ve also learned, as I related above, that &ldquo;chunked&rdquo; development works well for me. Spend an hour a day, or aim to spend 5 hours a week, if I make the goal small, I tend to have more fun which makes me more motivated. If I start to see a working prototype or actual result, it snowballs until I finish something consumable. The other thing that motivates me pretty well is doing something new; developing a game is not something I&rsquo;ve done before, and getting a chance to learn Node.js, Socket.io, and other new stuff is pretty fun.</p>




<p>The other thing that seems to help is working with someone else. Even if it&rsquo;s bouncing ideas, or including them in my repository, it becomes fun to work on an idea. So far I haven&rsquo;t had a chance to work with someone <em>coding-wise</em> on an idea, but I&rsquo;ve had the chance to do feature or mechanic work with other people. Everyone else is just as busy, or more busy, than I am.</p>




<p>Finally, one of the things I could do is to throw my ideas and all my documentation out there and let someone else run with it. The problem with that, is that I&rsquo;d be worried I wouldn&rsquo;t have a say in what happens or worse, would lose control of the idea. The last thing I want is for someone else to take my idea, not tell me, and then profit off of it. Perhaps that&rsquo;s a cynical point of view but it is something I worry about. For things that I know I probably don&rsquo;t have enough knowledge to do or are just &ldquo;Wouldn&rsquo;t it be nice?&rdquo; ideas, I don&rsquo;t mind sharing them (like some ideas I listed above).</p>




<p>Does anyone else have this problem? Have you had it and solved it? Do you have it and wish you could solve it? I&rsquo;m interested in knowing.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2012-03-16T21:29:32+00:00" pubdate data-updated="true">Mar 16<span>th</span>, 2012</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/33/underscoreko-want-some-lumps-of-underscorejs-sugar">UnderscoreKO - Want Some Lumps of Underscore.js Sugar in Your Knockout Java?</a></h2>
  
  <p>
    <p>I&rsquo;ve been using <a href="http://knockoutjs.com/">Knockout</a> at work for a MVC3 project and I have also been using <a href="http://documentcloud.github.com/backbone/">Backbone.js</a> in some personal projects at home. I really love <a href="http://documentcloud.github.com/underscore/">Underscore</a> and the array manipulation it offers for Node and the browser. I also liked how it was integrated into Backbone collections.</p>




<p>Yesterday evening as I drove home from work, I had a crazy idea. An idea so simple, I was really surprised <a href="https://github.com/thelinuxlich/knockout.underscore.plugin">only one other person</a> (that a 1 second Google search turned up) made an attempt to do. Maybe <em>because</em> it&rsquo;s so simple, no one bothered to make their code public.</p>




<p>Can you guess what my idea was? C&#8217;mon, isn&rsquo;t it obvious? <em>Why not marry Underscore&rsquo;s array methods to Knockout&rsquo;s observable arrays?</em> And <strong>BAM</strong>, in one evening, <strong>a tiny library named <a href="https://github.com/kamranayub/UnderscoreKO">UnderscoreKO</a> was born.</strong> It&rsquo;s really very cute. It took me maybe 20 minutes to write the library and then 3 hours to write the tests and package it up. Go figure.</p>




<h2>Get UnderscoreKO</h2>




<p>You can download the <a href="http://nuget.org/packages/UnderscoreKO">UnderscoreKO package off of Nuget</a>, since I know that&rsquo;s how a lot of you roll.</p>




<p>The source is <a href="https://github.com/kamranayub/UnderscoreKO">also available on GitHub</a>.</p>




<h2>Let&rsquo;s see some code</h2>




<p>First, let&rsquo;s see what life was like before UKO:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">vm</span><span class="p">.</span><span class="nx">computedArray</span> <span class="o">=</span> <span class="nx">ko</span><span class="p">.</span><span class="nx">computed</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="c1">// marry the two arrays</span>
</span><span class='line'>    <span class="k">return</span> <span class="nx">_</span><span class="p">.</span><span class="nx">union</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">someArray</span><span class="p">(),</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]);</span>
</span><span class='line'><span class="p">},</span> <span class="nx">vm</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>So what problem have I &ldquo;solved&rdquo;? A small one, but I hope small enough that you&rsquo;ll miss it when you can&rsquo;t do it (those are the best, right?):</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">vm</span><span class="p">.</span><span class="nx">computedArray</span> <span class="o">=</span> <span class="nx">ko</span><span class="p">.</span><span class="nx">computed</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="c1">// marry the two arrays</span>
</span><span class='line'>    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">someArray</span><span class="p">.</span><span class="nx">union</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]);</span>
</span><span class='line'><span class="p">},</span> <span class="nx">vm</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>Do you see it? Here, let me zoom in:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">someArray</span><span class="p">.</span><span class="nx">union</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]);</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>That&rsquo;s right! All of Underscore&rsquo;s array and collection methods are now available off of observable arrays! You didn&rsquo;t even know you wanted this, right?</p>




<h2>Mutators</h2>




<p><a href="https://github.com/thelinuxlich/knockout.underscore.plugin">thelinuxlich</a> had a neat feature in her plugin which was the idea of &ldquo;destructive&rdquo; methods that were basically convenience methods to manipulate the observable array directly.</p>




<p>In other words, this:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">vm</span><span class="p">.</span><span class="nx">myObservableArray</span><span class="p">(</span><span class="nx">vm</span><span class="p">.</span><span class="nx">myObservableArray</span><span class="p">.</span><span class="nx">union</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]));</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>Becomes this:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">vm</span><span class="p">.</span><span class="nx">myObservableArray</span><span class="p">.</span><span class="nx">union_</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]);</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>See? Isn&rsquo;t that a little nicer? I added &ldquo;mutator&rdquo; methods (<em>methodName_</em>) for anything I felt you&rsquo;d want to use to manipulate the array. And of course, they still use Knockout underneath so change notifications still occur.</p>




<h2>Features</h2>




<p>Um&hellip; what you&rsquo;d expect? <strike>Actually, there are a couple issues I&rsquo;d like to address tonight in another update (such as adding <code>chain</code> which I forgot about and taking care of passing in <code>observableArrays</code> to some functions like <code>union</code> so you don&rsquo;t have to do this: <code>vm.myObservableArray.union_(vm.array1(), vm.array2(), ...)</code>).</strike> I&rsquo;ve released v1.1 which fixes a mutator bug, adds <code>chain()</code> support, and invokes KO arrays when passed to certain functions like <em>union</em>.</p>




<h2>Live Demo</h2>




<p>Want to try before you buy? Go ahead!</p>




<iframe style="width: 100%; height: 300px" src="http://jsfiddle.net/kamranayub/exnqe/embedded/" allowfullscreen="allowfullscreen" frameborder="0"></iframe>




  </p>
  <span class="meta">
    written 








  



<time datetime="2012-03-13T19:33:19+00:00" pubdate data-updated="true">Mar 13<span>th</span>, 2012</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/32/using-nuspec-inheritance-to-reduce-nuget-maintenan">Using Nuspec Inheritance to Reduce Nuget Maintenance Headaches</a></h2>
  
  <p>
    <p>I&rsquo;ve been <a href="https://github.com/andrewdavey/cassette/pull/191">helping Cassette support .NET 3.5</a> and it&rsquo;s the biggest open source contribution I&rsquo;ve ever made. Granted, I started it so that we could use Cassette at work but I did it of my own accord. I learned a lot in the process (which I&rsquo;ll write another post on) but I thought I&rsquo;d talk about a cool trick I came up with to help ease Cassette&rsquo;s Nuget packaging burden.</p>




<h2>The Problem</h2>




<p>Cassette has 7 Nuget packages:</p>




<ul>
<li>Cassette + symbols</li>
<li>Cassette.Views + symbols</li>
<li>Cassette.Web + symbols</li>
<li>Cassette.MSBuild</li>
</ul>




<p>This means Andrew has to maintain 7 separate Nuspec files. Imagine now if we were forced to create a new .NET 3.5-specific Nuget package or MVC2-specific package or whatever; we&rsquo;d have even more Nuspecs to deal with.</p>




<p>What&rsquo;s even worse is that all the Nuspec files share common metadata. Typically the only metadata that differs is: <code>id</code>, <code>description</code>, <code>dependencies</code>, and <code>references</code>.</p>




<h2>XDT Transformations to the Rescue</h2>




<p>In MSBuild 4, Microsoft introduced the concept of <a href="http://msdn.microsoft.com/en-us/library/dd465326.aspx">XML Document Transformation</a>. This made it really helpful to create Debug/Release-specific <code>web.config</code> files for your site.</p>




<p>However, what you may not know is that XDT can be used on <em>any</em> document. It can <a href="http://geekswithblogs.net/EltonStoneman/archive/2010/08/20/using-msbuild-4.0-web.config-transformation-to-generate-any-config-file.aspx">also be used manually</a> in your MSBuild file:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;UsingTask</span> <span class="na">TaskName=</span><span class="s">&quot;TransformXml&quot;</span> <span class="na">AssemblyFile=</span><span class="s">&quot;$(MSBuildExtensionPath)\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.Tasks.dll&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;Target</span> <span class="na">Name=</span><span class="s">&quot;GenerateConfigs&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;MakeDir</span> <span class="na">Directories=</span><span class="s">&quot;$(BuildOutput)&quot;</span> <span class="na">Condition=</span><span class="s">&quot;!Exists(&#39;$(BuildOutput)&#39;)&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;TransformXml</span> <span class="na">Source=</span><span class="s">&quot;Web.config&quot;</span>
</span><span class='line'>                  <span class="na">Transform=</span><span class="s">&quot;Web.$(Configuration).config&quot;</span>
</span><span class='line'>                  <span class="na">Destination=</span><span class="s">&quot;$(BuildOutput)\Web.config&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'><span class="nt">&lt;/Target&gt;</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>Neat. I thought about this a bit and figured, &ldquo;Hey, why not use this to reduce Nuspec maintenance headache!&rdquo;</p>




<p>So I did a toy exercise by creating a <code>Cassette.Shared.nuspec</code> file:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
</span><span class='line'><span class="c">&lt;!&mdash; Cassette Shared Nuspec File; all packges share this &mdash;&gt;</span>
</span><span class='line'><span class="nt">&lt;package</span> <span class="na">xmlns=</span><span class="s">&quot;<a href="http://schemas.microsoft.com/packaging/2010/07/nuspec.xsd&amp;quot;">http://schemas.microsoft.com/packaging/2010/07/nuspec.xsd&amp;quot;</a></span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;metadata&gt;</span>
</span><span class='line'>    <span class="nt">&lt;version&gt;</span>$version$<span class="nt">&lt;/version&gt;</span>
</span><span class='line'>    <span class="nt">&lt;authors&gt;</span>Andrew Davey<span class="nt">&lt;/authors&gt;</span>
</span><span class='line'>    <span class="nt">&lt;owners&gt;</span>Andrew Davey<span class="nt">&lt;/owners&gt;</span>
</span><span class='line'>    <span class="nt">&lt;copyright&gt;</span>© 2011 Andrew Davey<span class="nt">&lt;/copyright&gt;</span>
</span><span class='line'>    <span class="nt">&lt;licenseUrl&gt;</span><a href="http://getcassette.net/licensing">http://getcassette.net/licensing</a><span class="nt">&lt;/licenseUrl&gt;</span>
</span><span class='line'>    <span class="nt">&lt;projectUrl&gt;</span><a href="http://getcassette.net/">http://getcassette.net/</a><span class="nt">&lt;/projectUrl&gt;</span>
</span><span class='line'>    <span class="nt">&lt;tags&gt;</span>web javascript coffeescript css html templates asp.net<span class="nt">&lt;/tags&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/metadata&gt;</span>
</span><span class='line'><span class="nt">&lt;/package&gt;</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>And a &ldquo;Cassette.Web.nutrans&rdquo; transformation file that just added the extra data required:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
</span><span class='line'><span class="nt">&lt;package</span> <span class="na">xmlns=</span><span class="s">&quot;<a href="http://schemas.microsoft.com/packaging/2010/07/nuspec.xsd&amp;quot;">http://schemas.microsoft.com/packaging/2010/07/nuspec.xsd&amp;quot;</a></span> <span class="na">xmlns:xdt=</span><span class="s">&quot;<a href="http://schemas.microsoft.com/XML-Document-Transform&amp;quot;">http://schemas.microsoft.com/XML-Document-Transform&amp;quot;</a></span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;metadata&gt;</span>
</span><span class='line'>        <span class="nt">&lt;id</span> <span class="na">xdt:Transform=</span><span class="s">&quot;Insert&quot;</span><span class="nt">&gt;</span>Cassette.Web<span class="nt">&lt;/id&gt;</span>
</span><span class='line'>        <span class="nt">&lt;description</span> <span class="na">xdt:Transform=</span><span class="s">&quot;Insert&quot;</span><span class="nt">&gt;</span>ASP.NET support for Cassette. Cassette automatically builds JavaScript, CSS and HTML template modules based on the dependencies between files. CoffeeScript and LESS are also supported.<span class="nt">&lt;/description&gt;</span>
</span><span class='line'>        <span class="nt">&lt;dependencies</span> <span class="na">xdt:Transform=</span><span class="s">&quot;Insert&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>            <span class="nt">&lt;dependency</span> <span class="na">id=</span><span class="s">&quot;Cassette&quot;</span> <span class="na">version=</span><span class="s">&quot;$version$&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>            <span class="nt">&lt;dependency</span> <span class="na">id=</span><span class="s">&quot;Cassette.Views&quot;</span> <span class="na">version=</span><span class="s">&quot;$version$&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/dependencies&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/metadata&gt;</span>
</span><span class='line'>
</span><span class='line'>    <span class="nt">&lt;files</span> <span class="na">xdt:Transform=</span><span class="s">&quot;Insert&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;file</span> <span class="na">src=</span><span class="s">&quot;....\build\bin\lib40\Cassette.Web.dll&quot;</span> <span class="na">target=</span><span class="s">&quot;lib\net40&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>      <span class="nt">&lt;file</span> <span class="na">src=</span><span class="s">&quot;....\build\bin\lib35\Cassette.Web.dll&quot;</span> <span class="na">target=</span><span class="s">&quot;lib\net35&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>      <span class="nt">&lt;file</span> <span class="na">src=</span><span class="s">&quot;CassetteConfiguration.cs.pp&quot;</span> <span class="na">target=</span><span class="s">&quot;content&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>      <span class="nt">&lt;file</span> <span class="na">src=</span><span class="s">&quot;web.config.transform&quot;</span> <span class="na">target=</span><span class="s">&quot;content&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/files&gt;</span>
</span><span class='line'><span class="nt">&lt;/package&gt;</span>
</span></code></pre></td></tr></table></div></figure></p>

<p><strong>Mind = blown.</strong> It worked! As I stroked my five-o-clock shadow, I wondered. <em>Wow, if this works, how far can we take it?</em></p>




<h2>Nuspec Inheritance: Say what?!</h2>




<p>Let&rsquo;s consider the symbols packaging for Cassette. Being able to transform all these Nuspecs is great and will reduce headaches, but what happens when a Nuspec is a subset of yet another Nuspec? The symbols package typically just adds some PDB files and a <code>**\*.cs</code> line.</p>




<p>Furthermore, I&rsquo;d <strong>really</strong> like to avoid calling the <code>TransformXml</code> task on each symbols Nuspec individually.</p>




<p>No, what I really want is a way to make my Nuspecs inherit from each other to create a chain of transformation.</p>




<p><strong>So that&rsquo;s what I did.</strong> Nuget package developers of the world, I present to you an inline MSBuild task that will follow a chain of inheritance and transform your Nuspecs:</p>




<script src="https://gist.github.com/1918022.js?file=Transforms.xml"></script>




<p>It looks complicated but it really isn&rsquo;t. I had to workaround <a href="http://stackoverflow.com/questions/9455354/msbuild-inline-task-reference-non-standard-microsoft-assemblies">an issue with MSBuild inline tasks</a> by loading up the Microsoft.Web.Publishing.Tasks assembly via Reflection. The rest of the code discovers the inheritance chain and performs the transformations. I developed this in a standalone console application first, then copy/pasted it into the inline task definition, changing whatever I needed.</p>




<p>I could have made this into a standalone DLL but what fun is that? Then I&rsquo;d have to manage a solution and project and blah blah blah. No, I wanted this to be simple and easy to just add to any MSBuild project.</p>




<h2>Example Usage</h2>




<p>Let&rsquo;s take the symbols example now and see what we can do.</p>




<p><strong>Cassette.Web.nutrans</strong></p>




<p>We have to add an extra attribute to the <code>&lt;package&gt;</code> element:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;package</span> <span class="na">inherits=</span><span class="s">&quot;../Cassette.Shared.nuspec&quot;</span> <span class="err">&hellip;</span><span class="nt">&gt;</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>The <code>inherits</code> attribute is relative to the directory the nutrans file is in.</p>




<p><strong>Cassette.Web.symbols.nutrans</strong></p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
</span><span class='line'><span class="nt">&lt;package</span> <span class="na">inherits=</span><span class="s">&quot;Cassette.Web.nutrans&quot;</span> <span class="na">xmlns=</span><span class="s">&quot;<a href="http://schemas.microsoft.com/packaging/2010/07/nuspec.xsd&amp;quot;">http://schemas.microsoft.com/packaging/2010/07/nuspec.xsd&amp;quot;</a></span> <span class="na">xmlns:xdt=</span><span class="s">&quot;<a href="http://schemas.microsoft.com/XML-Document-Transform&amp;quot;">http://schemas.microsoft.com/XML-Document-Transform&amp;quot;</a></span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;files&gt;</span>
</span><span class='line'>    <span class="nt">&lt;file</span> <span class="na">xdt:Transform=</span><span class="s">&quot;Insert&quot;</span> <span class="na">src=</span><span class="s">&quot;....\build\bin\lib40\Cassette.Web.pdb&quot;</span> <span class="na">target=</span><span class="s">&quot;lib\net40&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;file</span> <span class="na">xdt:Transform=</span><span class="s">&quot;Insert&quot;</span> <span class="na">src=</span><span class="s">&quot;....\build\bin\lib35\Cassette.Web.pdb&quot;</span> <span class="na">target=</span><span class="s">&quot;lib\net35&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;file</span> <span class="na">xdt:Transform=</span><span class="s">&quot;Insert&quot;</span> <span class="na">src=</span><span class="s">&quot;***.cs&quot;</span> <span class="na">target=</span><span class="s">&quot;src&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/files&gt;</span>
</span><span class='line'><span class="nt">&lt;/package&gt;</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>Now, using the <code>inherits</code> attribute, we can transform the Cassette.Web transformation file letting us create a chain of transformations.</p>




<p>To use this task, we can easily pass it the list of transforms to use and let it work its magic.</p>




<p><strong>build.xml</strong></p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;Target</span> <span class="na">Name=</span><span class="s">&quot;NugetPack&quot;</span> <span class="na">DependsOnTargets=</span><span class="s">&quot;Build&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>        <span class="nt">&lt;ItemGroup&gt;</span>
</span><span class='line'>            <span class="nt">&lt;Transforms</span> <span class="na">Include=</span><span class="s">&quot;src***.nutrans&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/ItemGroup&gt;</span>
</span><span class='line'>
</span><span class='line'>        <span class="c">&lt;!&mdash; Transform Nuspecs &mdash;&gt;</span>
</span><span class='line'>        <span class="nt">&lt;TransformXmlHierarchy</span>
</span><span class='line'>            <span class="na">Source=</span><span class="s">&quot;%(Transforms.Identity)&quot;</span>
</span><span class='line'>            <span class="na">Destination=</span><span class="s">&quot;src\%(Transforms.RecursiveDir)%(Transforms.Filename).nuspec&quot;</span>
</span><span class='line'>            <span class="na">TaskDirectory=</span><span class="s">&quot;$(MSBuildExtensionsPath)\Microsoft\VisualStudio\v10.0\Web&amp;quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'><span class="nt">&lt;/Target&gt;</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>And there you have it! For every transform file MSBuild finds, it will execute our task and generate our Nuspec files so they all contain the same shared metadata. I hope this makes someone&rsquo;s Nuget packaging life easier.</p>




<p>You can find the source and examples <a href="https://gist.github.com/1918022">in my gist</a>.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2012-02-27T02:16:16+00:00" pubdate data-updated="true">Feb 27<span>th</span>, 2012</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/31/this-this-is-ux">This&#8230; This Is UX</a></h2>
  
  <p>
    <p><img src="/blog/images/36.png" alt="UX in Action" /></p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2012-02-22T20:18:10+00:00" pubdate data-updated="true">Feb 22<span>nd</span>, 2012</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/30/playing-with-node-writing-a-reddit-cli">Playing With Node: Writing a Reddit CLI</a></h2>
  
  <p>
    <p>This is not a complete post about how to write a fully featured CLI application for Reddit, like <a href="http://cortex.glacicle.org/">Cortex</a>. However, I think it demonstrates the ease and simplicity in making such an application.</p>




<h3>The idea</h3>




<p>I love <a href="http://reddit.com">Reddit</a>. Except for one thing: I don&rsquo;t have much time to browse or keep up with it due to life getting in the way. What I wanted was a simple app I could run that would simply show me the top stories at that moment so I could glance at them and visit them.</p>




<p>I spent about 20 mins (mostly looking for CLI npm packages) and came up with this:</p>




<p><img src="/blog/images/35.png" alt="Reddit CLI" /></p>




<p>Pretty simple. It goes to the front page, grabs the JSON results, and formats it all into a nice list (shortening titles if they get too uppity), displaying the information I mostly care about: subreddit, score, # of comments, and the poster.</p>




<p>Now, I haven&rsquo;t yet implemented a way to actually visit the URL of any of these, mainly because I&rsquo;m short on time. But maybe you can!</p>




<h3>The code</h3>




<p>The code is pretty straightforward. I&rsquo;m using the <a href="http://search.npmjs.org/#/colors">colors</a>, <a href="http://search.npmjs.org/#/request">request</a>, and <a href="http://search.npmjs.org/#/cli">cli</a> npm packages.</p>




<p>I wanted to do something really quick. The <code>cli</code> package is way more than I need, in fact, I wrote this originally without using <code>cli</code> but for future improvement I added it in. The steps I wanted to perform from the get-go were:</p>




<ol>
<li>Get the JSON for the homepage</li>
<li>Parse it and build a colorized &ldquo;row&rdquo; (two rows, in fact)</li>
<li>Trim titles so they didn&rsquo;t mess up the flow (my console window is 140 columns)</li>
</ol>




<p>Here it is, all 43 lines of it:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">cli</span>     <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;cli&#39;</span><span class="p">),</span>
</span><span class='line'>    <span class="nx">http</span>    <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;http&#39;</span><span class="p">),</span>
</span><span class='line'>    <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;request&#39;</span><span class="p">),</span>
</span><span class='line'>    <span class="nx">colors</span>  <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;colors&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="nx">cli</span><span class="p">.</span><span class="nx">main</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">args</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;<strong><strong><strong><strong><strong><em>&quot;</span><span class="p">.</span><span class="nx">rainbow</span><span class="p">);</span>
</span><span class='line'>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Node Reddit&quot;</span><span class="p">.</span><span class="nx">cyan</span><span class="p">);</span>
</span><span class='line'>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;</em></strong></strong></strong></strong></strong>\n\n&quot;</span><span class="p">.</span><span class="nx">rainbow</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">request</span><span class="p">(</span><span class="s1">&#39;<a href="http://reddit.com/.json&amp;#39;">http://reddit.com/.json&amp;#39;</a></span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">err</span> <span class="o">&amp;&amp;</span> <span class="nx">res</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">===</span> <span class="mi">200</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">reddit</span>  <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">body</span><span class="p">),</span>
</span><span class='line'>          <span class="nx">stories</span> <span class="o">=</span> <span class="nx">reddit</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">s</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                      <span class="k">return</span> <span class="nx">s</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
</span><span class='line'>                    <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>      <span class="c1">// Descending score</span>
</span><span class='line'>      <span class="nx">stories</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">b</span><span class="p">.</span><span class="nx">score</span> <span class="o">&ndash;</span> <span class="nx">a</span><span class="p">.</span><span class="nx">score</span><span class="p">;</span> <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>      <span class="nx">stories</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">story</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">row</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">title</span> <span class="o">=</span> <span class="nx">story</span><span class="p">.</span><span class="nx">title</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">100</span>
</span><span class='line'>                <span class="o">?</span> <span class="nx">story</span><span class="p">.</span><span class="nx">title</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&hellip;&quot;</span>
</span><span class='line'>                <span class="o">:</span> <span class="nx">story</span><span class="p">.</span><span class="nx">title</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>        <span class="c1">// Build row</span>
</span><span class='line'>        <span class="c1">// [score] [title] [comments] [subreddit]</span>
</span><span class='line'>        <span class="c1">// This sucks</span>
</span><span class='line'>        <span class="nx">row</span> <span class="o">+=</span> <span class="nx">story</span><span class="p">.</span><span class="nx">score</span><span class="p">.</span><span class="nx">toString</span><span class="p">().</span><span class="nx">green</span> <span class="o">+</span> <span class="s2">&quot;\t&quot;</span><span class="p">;</span>
</span><span class='line'>        <span class="nx">row</span> <span class="o">+=</span> <span class="nx">title</span><span class="p">.</span><span class="nx">bold</span>
</span><span class='line'>        <span class="nx">row</span> <span class="o">+=</span> <span class="s2">&quot; (&quot;</span> <span class="o">+</span> <span class="nx">story</span><span class="p">.</span><span class="nx">domain</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span><span class="p">;</span>
</span><span class='line'>        <span class="nx">row</span> <span class="o">+=</span> <span class="p">(</span><span class="s2">&quot; /r/&quot;</span> <span class="o">+</span> <span class="nx">story</span><span class="p">.</span><span class="nx">subreddit</span><span class="p">).</span><span class="nx">cyan</span><span class="p">;</span>
</span><span class='line'>        <span class="nx">row</span> <span class="o">+=</span> <span class="s2">&quot;\n\t&quot;</span><span class="p">;</span>
</span><span class='line'>        <span class="nx">row</span> <span class="o">+=</span> <span class="nx">story</span><span class="p">.</span><span class="nx">author</span><span class="p">.</span><span class="nx">grey</span><span class="p">;</span>
</span><span class='line'>        <span class="nx">row</span> <span class="o">+=</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">story</span><span class="p">.</span><span class="nx">num_comments</span> <span class="o">+</span> <span class="s2">&quot; comments&quot;</span><span class="p">).</span><span class="nx">italic</span><span class="p">.</span><span class="nx">yellow</span><span class="p">;</span>
</span><span class='line'>        <span class="nx">row</span> <span class="o">+=</span> <span class="s2">&quot;\n&quot;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">row</span><span class="p">);</span>
</span><span class='line'>      <span class="p">});</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>As you can see, definitely pretty light. That&rsquo;s all there is to it. Now imagine adding in commands (via <code>cli.parse</code>) or even <a href="http://search.npmjs.org/#/growl">growl</a> support (I forked it and added Growl for Windows support, hopefully I can get it working decently and commit it). Then letting it monitor your specific subreddits, perhaps once every 15 minutes or so. Then adding in support for viewing links (interactive CLI app).</p>




<p>That&rsquo;s all more than I have time for, but maybe some of you that want to learn more about the Power of Node have more time. If so, I welcome additions.</p>




<p>It&rsquo;s <a href="https://github.com/kamranayub/node-reddit">available on GitHub</a>. Feel free to dissect it and improve it, fork it and b0rk it. Have fun!</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2012-02-02T21:21:04+00:00" pubdate data-updated="true">Feb 2<span>nd</span>, 2012</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/29/programming-is-difficult-business-it-should-never">Programming Is Difficult Business. It Should Never Be Undertaken in Ignorance.</a></h2>
  
  <p>
    <blockquote><p>&ldquo;Programming is difficult business. It should never be undertaken in ignorance.&rdquo; &ndash; <em>Javascript: The Good Parts</em>, Douglas Crockford</p></blockquote>




<p>What a great quote to program by.</p>




<p>I&rsquo;ve been undertaking a pet project (a <em>game</em>, no less) that&rsquo;s forced me to brush up on my Javascriptings. I would highly recommend this book if you also want to get your hands dirty with Javascript.</p>




<p>Oh, my game? Yah, I can&rsquo;t talk about it yet. I&rsquo;ve never made a game before (but I&rsquo;ve always wanted to) and I think I&rsquo;ve finally come up with something I could possibly do (i.e. not 3D, not requiring 25 art designers, and not in a language I don&rsquo;t know). We&rsquo;ll see how it goes and I&rsquo;ll let you know.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2012-01-23T21:44:30+00:00" pubdate data-updated="true">Jan 23<span>rd</span>, 2012</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/28/i-just-transferred-all-my-domains-away-from-my-god">I Just Transferred All My Domains Away From My GoDaddy Reseller Because of SOPA</a></h2>
  
  <p>
    <p>Since I started hosting my own domains and doing web work, I&rsquo;ve been using a website aptly named <a href="http://cheap-domainregistration.com">Cheap-DomainRegistration.com</a>. I also read today that <a href="http://www.reddit.com/r/politics/comments/nntxp/godaddys_response_to_the_boycott_go_daddy_has/">GoDaddy supports SOPA</a>. This is a Bad Thing<sup>TM</sup>. The proposed <a href="http://americancensorship.org/">SOPA legislation is bad</a>, just like drinking anti-freeze is bad for dogs.</p>




<blockquote><p>&ldquo;Hah!&rdquo; I said to myself, grinning in self-assuredness, &ldquo;I am not using GoDaddy. This does not pertain to me.&rdquo;</p></blockquote>




<p>There was a linear relationship between the width of my grin and the amount of uneasiness about issuing my previous utterance. <em>Hmmm. To be frank, I am not sure exactly who owns my current domain host.</em> Now the wheels in my head began turning (<em>Since I looked at that loony, old man</em>). I visited the site&hellip; tried searching for who the company was registered under. I couldn&rsquo;t find anything. It felt&hellip; wrong.</p>




<p>It turns out with a <a href="http://www.godaddy.com/reseller/domain-reseller.aspx?ci=21918">little</a> <a href="http://www.who.is/website-information/godaddy.com/">Internet</a> <a href="http://www.who.is/website-information/cheap-domainregistration.com/">detectivery</a>, I discovered that my now-late host was, in fact, a <strong>GoDaddy reseller.</strong></p>




<ol>
<li>The reseller template CDR used was the <em>first</em> reseller template available from GD, namely, &ldquo;Black, Yellow, and Red&rdquo;. You can see that by clicking &ldquo;Quick Tour&rdquo; on the GD Reseller page.</li>
<li>The addresses are the same for both WHOIS records. Coincidence?</li>
<li>The Legal Agreement for CDR also cites the same address.</li>
<li>CDR uses secureserver.net for DNS, which is owned by GoDaddy.</li>
</ol>




<p>Despair kicked in. I glanced at the brand new JA Henckels chef knife my friend got me for Christmas&mdash;the sharp blade, laser edged to perfection&hellip; it would be <em>so</em> easy to&mdash;&ldquo;No,&rdquo; I said. <em>Keep hold of yourself, man!</em></p>




<p>Turns out, there&rsquo;s a great host called <a href="http://namecheap.com">Namecheap.com</a> that is <a href="http://community.namecheap.com/blog/2011/12/22/we-say-no-to-sopa/">against SOPA</a> (as you should be). Needless to say, I&rsquo;ve initiated a bulk transfer of all my domains over to Namecheap. <a href="http://latersgd.com/">I&rsquo;ve done my part</a>.</p>




<p>So now the question is, are <strong>you</strong> inadvertently using a GoDaddy reseller? I highly recommend you double-check because you might just be surprised at what you find.</p>




<p><em>The more you know&hellip;</em></p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2011-12-24T01:12:45+00:00" pubdate data-updated="true">Dec 24<span>th</span>, 2011</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/27/using-cassette-for-semi-complicated-scenarios-upda">Using Cassette for Semi-complicated Scenarios [Updated 1/9/12]</a></h2>
  
  <p>
    <p>I love <a href="http://getcassette.net">Cassette</a>. You should too, because as of today, the project has gone MIT licensed which means <strong>you</strong>, my dear reader, can use it right now.</p>




<p>It&rsquo;s alright, I&rsquo;ll wait while you download it via Nuget. Done? Great.</p>




<h3>Updates</h3>




<ul>
<li><strong>1/9/12</strong>: Added print media example</li>
<li><strong>1/9/12</strong>: <a href="https://github.com/andrewdavey/cassette/issues/121">Issue #121</a> that I opened was fixed in the latest Cassette update, 1.0.1. I&rsquo;ve updated my samples accordingly.</li>
</ul>




<h3>More than a simple case</h3>




<p>Cassette is <a href="http://hanselminutes.com/260/net-api-design-that-optimizes-for-programmer-joy-with-jonathan-carter">optimized for programmer happiness</a>. It&rsquo;s easy to use and there&rsquo;s a lot of small features that make it stand out from the crowd (SquishIt, Combres, etc.). If you want to get started using Cassette out of the box, you only need to do a couple things and those things are outlined well <a href="http://getcassette.net/documentation/getting-started">in the documentation</a>.</p>




<p>What I love about Cassette is the flexibility you have when you need to go beyond the simplest use case. For example, let&rsquo;s consider the file structure I am working with on a project right now:</p>


<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Web Project
</span><span class='line'> |<em> Public
</span><span class='line'>   |</em> images
</span><span class='line'>   |<em> print
</span><span class='line'>     |</em> print.css
</span><span class='line'>   |<em> scripts
</span><span class='line'>     |</em> i8n
</span><span class='line'>       |<em> en-US
</span><span class='line'>       |</em> zh-CN
</span><span class='line'>     |<em> special
</span><span class='line'>       |</em> modernizer-2.0.6.js
</span><span class='line'>     |<em> vendor
</span><span class='line'>       |</em> jquery-1.7.1.js
</span><span class='line'>       |<em> other framework files&hellip;
</span><span class='line'>     |</em> pages
</span><span class='line'>       |<em> page1.js
</span><span class='line'>       |</em> page2.js
</span><span class='line'>     |<em> app.js
</span><span class='line'>   |</em> themes
</span><span class='line'>     |<em> jquery.ui.core.css
</span><span class='line'>     |</em> other jQuery UI files
</span><span class='line'>   |<em> base.css
</span><span class='line'>   |</em> layout.css
</span><span class='line'>   |_ otherfiles&hellip;</span></code></pre></td></tr></table></div></figure></p>

<p>For the most part, this is how the project was organized and I needed to adapt Cassette to work here. I&rsquo;ll walk through a few things I needed to do first.</p>




<h3>File organization</h3>




<p>Before implementing Cassette, <a href="http://modernizr.com">Modernizr</a> was also in the <em>vendor</em> folder. In addition, the localized JS files in <em>i8n</em> were not in sub-folders according to their culture, they were just in <em>i8n</em>.</p>




<p>In the <em>vendor</em> folder, we have both minified and non-minified JS files (mostly from Nuget). We don&rsquo;t want Cassette to minify an already minified file. I&rsquo;ll show you how I avoided that later on.</p>




<p>I point this out because Cassette works better when things are organized so that they are &ldquo;bundlable.&rdquo; For that reason, I moved the files around so the structure looks like above. Since Modernizr has to be included in the page&rsquo;s <code>&lt;head&gt;</code> (it needs to load before the page loads to set up Respond media queries and HTML5 elements) and all other scripts can be included before the <code>&lt;/body&gt;</code> tag, I separated it into the <em>special</em> folder.</p>




<p>As for the <em>pages</em> scripts, these need to be only included on a per-page basis. If areas of your site need multiple assets, I would definitely move them into sub-folders (I would go a step farther perhaps and even include them by convention, the same way MVC plays with Views and Controllers but that&rsquo;s for another blog post!).</p>




<h3>Configuring the bundles</h3>




<p>I&rsquo;ll walk you through my Cassette configuration file. If you pull down Cassette via Nuget, you will have a new <code>CassetteConfiguration</code> file and class. This is what Cassette picks up and uses to bundle your files. You can move it wherever you want, Cassette magically picks it up. It is important to realize that if you want full control over how Cassette bundles your assets, you&rsquo;ll need to do some configuration. Luckily, it&rsquo;s not bad!</p>




<h4>Excluding directories, minified, and VSDoc files</h4>




<p>Out-of-the-box, Cassette does not provide an easy mechanism to exclude directories when adding bundles per sub-directory. The reason I think this is important is because we want to set up a general &ldquo;catch-all&rdquo; method to deal with bundling, namely: treat each directory as a bundle. That way we can add folders/files and have them bundled automatically for us. This creates less work for the team.</p>




<p>I also wanted to ignore any pre-minified or -vsdoc files (Cassette by default ignores vsdoc files).</p>




<p>To solve this issue, I just derived a class from <code>FileSearch</code> and added my own requirements:</p>




<script src="https://gist.github.com/1583784.js"></script>




<p>I could have also implemented my own <code>IFileSearch</code>, perhaps one that used a fluent interface to exclude directories or file suffixes, but for my limited needs, this would do well and I really only needed to build upon the out-of-the-box <code>FileSearch</code> class. Maybe I will implement a fluent search interface as a fun project.</p>




<p>The other thing I needed to add into the <em>Regex</em> was the ability to exclude any files ending in &ldquo;.min&rdquo; or &ldquo;-min&rdquo; (just in case). Cassette recommends you simply delete minified files. That&rsquo;s a good tip, except they&rsquo;ll just be back when you do a Nuget update, so why not just ignore them by default as well (<em>ahem</em>)?</p>




<p><em>Side note: It seems more efficient to me to allow Cassette to reference minified files but to bypass minification of them. Perhaps this will be implemented in the future?</em></p>




<h4>Configuring stylesheets</h4>




<p>For our project, we need to include Google Web Fonts in the page, in addition to the CSS files in the <em>public</em> directory. We keep the jQuery UI themes separate in case we update via Nuget so we can simply overwrite them.</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="k">private</span> <span class="k">void</span> <span class="nf">ConfigureStylesheets</span><span class="p">(</span><span class="n">BundleCollection</span> <span class="n">bundles</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="c1">// Sub-folder bundled CSS</span>
</span><span class='line'>    <span class="n">bundles</span><span class="p">.</span><span class="n">AddPerSubDirectory</span><span class="p">&lt;</span><span class="n">StylesheetBundle</span><span class="p">&gt;(</span><span class="s">&quot;Public&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="k">new</span> <span class="nf">ExcludeDirectorySearch</span><span class="p">(</span><span class="s">&quot;*.css&quot;</span><span class="p">,</span> <span class="k">new</span><span class="p">[]</span> <span class="p">{</span> <span class="s">&quot;scripts&quot;</span> <span class="p">}));</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// Print media bundle</span>
</span><span class='line'>    <span class="n">bundles</span><span class="p">.</span><span class="n">Get</span><span class="p">&lt;</span><span class="n">StylesheetBundle</span><span class="p">&gt;(</span><span class="s">&quot;~/public/print&quot;</span><span class="p">).</span><span class="n">Media</span> <span class="p">=</span> <span class="s">&quot;print&quot;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// Google Web fonts</span>
</span><span class='line'>    <span class="n">bundles</span><span class="p">.</span><span class="n">AddUrlWithAlias</span><span class="p">&lt;</span><span class="n">StylesheetBundle</span><span class="p">&gt;(</span>
</span><span class='line'>        <span class="n">Scheme</span> <span class="p">+</span> <span class="s">&quot;://fonts.googleapis.com/css?family=Droid+Sans|Montserrat&quot;</span><span class="p">,</span> <span class="s">&quot;Fonts&quot;</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>The first line tells Cassette to add a bundle per sub-directory, so the following bundles will be made:</p>




<ul>
<li>public (our CSS)</li>
<li>public\themes (jQuery UI)</li>
<li>public\print (print media)</li>
</ul>




<p>It also uses the class above and excludes the &ldquo;scripts&rdquo; directory from search, for good measure.</p>




<p>One of the caveats to the directory exclude is that it technically does <em>not</em> exclude directories; Cassette still creates empty bundles. Thus, if you tried to add a <code>~/public/print</code> bundle, you&rsquo;d get an exception saying that it already exists. So, we <em>cannot</em> exclude the <code>print</code> directory. Instead, you can reference it directly after it&rsquo;s been added and manually set the <code>Media</code> to print. Problem solved! Ideally, Cassette should not be creating empty bundles.</p>




<p>The second line includes the direct Google stylesheet reference aliased as <em>Fonts</em> (in references, <code>~/Fonts</code>). In this project, our site is behind a load balancer so SSL is terminated at the balancer. This means you can&rsquo;t just use the built-in ASP.NET <code>Request.IsSecureConnection</code> because by the time the request even hits the web server, SSL is not there. <strike>Therefore, I utilize one of the utilities we have to check if SSL is enabled via server headers that the balancer sets.</strike> The scheme is not identifiable yet in our <code>Application_Start</code>, so we cannot use this method, but I will leave it here for posterity. We switched to always using SSL since our site is under SSL to the user. <strong>Note:</strong> You can simply include fonts normally using the Google Font Loader or by a direct <code>&lt;link&gt;</code> reference, however, why not use Cassette if you&rsquo;re already going that route?</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="c1">// Also in CassetteConfiguration.cs</span>
</span><span class='line'><span class="k">private</span> <span class="kt">string</span> <span class="n">Scheme</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="k">get</span> <span class="p">{</span> <span class="k">return</span> <span class="n">Utilities</span><span class="p">.</span><span class="n">SharedUtils</span><span class="p">.</span><span class="n">IsSecureConnection</span><span class="p">()</span> <span class="p">?</span> <span class="s">&quot;https&quot;</span> <span class="p">:</span> <span class="s">&quot;http&quot;</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>In our <em>Layout.cshtml</em> file, we now need to reference these two bundles and render them to the page.</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>@{
</span><span class='line'>    Bundles.Reference(&quot;public&quot;); // Our CSS
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'><span class="cp">&lt;!DOCTYPE html&gt;</span>
</span><span class='line'><span class="nt">&lt;html&gt;</span>
</span><span class='line'><span class="nt">&lt;head&gt;</span>
</span><span class='line'>    @Bundles.RenderStylesheets()
</span><span class='line'><span class="nt">&lt;/head&gt;</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>So how does Cassette understand in what order to put these references? First, Cassette goes by the order in which you call <code>@Bundles.Reference</code>. To make things easier though, I edited our main <em>layout.css</em> file to add Cassette-compatible references.</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="c">/<em> For Cassette </em>/</span>
</span><span class='line'><span class="c">/<em> @reference ~/Fonts base.css skeleton.css themes </em>/</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>When Cassette parses <em>layout.css</em>, it will detect these references. Since all files are included in our <em>public</em> bundle, everything goes great and the <code>&lt;link&gt;</code>&rsquo;s are added in order:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">&quot;<a href="http://fonts.googleapis.com/css?family=Droid+Sans|Montserrat&amp;quot;">http://fonts.googleapis.com/css?family=Droid+Sans|Montserrat&amp;quot;</a></span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'><span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">&quot;/<em>cassette/asset/Public/themes/jquery.ui.button.css?165be2c1b488debc298a8dbaa77347b326a0d2a2&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'><span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">&quot;/</em>cassette/asset/Public/themes/jquery.ui.core.css?e5bc0be5bec6729cd338579a99e89c39c844c181&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'><span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">&quot;/<em>cassette/asset/Public/themes/jquery.ui.datepicker.css?6243e68daf6d6b3c03ce47d66abef2feba488d94&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'><span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">&quot;/</em>cassette/asset/Public/themes/jquery.ui.dialog.css?45faa27d7c66d72df00c39c40506da46bed885e3&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'><span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">&quot;/<em>cassette/asset/Public/themes/jquery.ui.resizable.css?a1bf026ec6d01daa0f7853215774c9e3aeb8afa9&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'><span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">&quot;/</em>cassette/asset/Public/themes/jquery.ui.theme.css?83294a0e12785f8dac8d3f0de4bf65f481b55f13&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'><span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">&quot;/<em>cassette/asset/Public/base.css?6401a75dfde8196c81d8bb39c3e5fb25dab89ad1&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'><span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">&quot;/</em>cassette/asset/Public/skeleton.css?d7414571707853cafb3028441861d31291d60789&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'><span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">&quot;/_cassette/asset/Public/layout.css?0ac01597826664dcc3a6c031a61c11ffa17fdd3d&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span><span class="nt">/&gt;</span>
</span></code></pre></td></tr></table></div></figure></p>

<h4>Configuring Javascript</h4>




<p>The Javascript assets were a bit harder to configure; we needed to do a couple things:</p>




<ul>
<li>Auto-bundle everything except a few special cases</li>
<li>Have a &ldquo;special&rdquo; folder for <code>&lt;head&gt;</code> references</li>
<li>Avoid editing vendor file references so a Nuget update won&rsquo;t blow the changes away</li>
</ul>




<p>Here is my Javascript configuration:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="k">private</span> <span class="k">void</span> <span class="nf">ConfigureJavascript</span><span class="p">(</span><span class="n">BundleCollection</span> <span class="n">bundles</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="c1">// Localized JS &ndash; i8n/{culture}</span>
</span><span class='line'>    <span class="n">bundles</span><span class="p">.</span><span class="n">AddPerSubDirectory</span><span class="p">&lt;</span><span class="n">ScriptBundle</span><span class="p">&gt;(</span><span class="s">&quot;Public/scripts/i8n&quot;</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// Per-page JS (eventually may want separate folders as well)</span>
</span><span class='line'>    <span class="n">bundles</span><span class="p">.</span><span class="n">AddPerIndividualFile</span><span class="p">&lt;</span><span class="n">ScriptBundle</span><span class="p">&gt;(</span><span class="s">&quot;Public/scripts/pages&quot;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// Bundle all scripts except special cases above</span>
</span><span class='line'>    <span class="n">bundles</span><span class="p">.</span><span class="n">AddPerSubDirectory</span><span class="p">&lt;</span><span class="n">ScriptBundle</span><span class="p">&gt;(</span><span class="s">&quot;Public/scripts&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="k">new</span> <span class="nf">ExcludeDirectorySearch</span><span class="p">(</span><span class="s">&quot;*.js&quot;</span><span class="p">,</span> <span class="k">new</span><span class="p">[]</span> <span class="p">{</span> <span class="s">&quot;i8n&quot;</span><span class="p">,</span> <span class="s">&quot;pages&quot;</span> <span class="p">}));</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>Our configuration code above does exactly what we need. We can double check by browsing to <em>/_cassette</em> and seeing what Cassette decided to turn into bundles:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="p">~/</span><span class="n">Public</span><span class="p">/</span><span class="n">scripts</span>
</span><span class='line'>    <span class="n">app</span><span class="p">.</span><span class="n">js</span>
</span><span class='line'>
</span><span class='line'><span class="p">~/</span><span class="n">Public</span><span class="p">/</span><span class="n">scripts</span><span class="p">/</span><span class="n">pages</span>
</span><span class='line'>
</span><span class='line'><span class="p">~/</span><span class="n">Public</span><span class="p">/</span><span class="n">scripts</span><span class="p">/</span><span class="n">special</span>
</span><span class='line'>    <span class="n">modernizr</span><span class="p">&ndash;</span><span class="m">2.0</span><span class="p">.</span><span class="m">6.</span><span class="n">js</span>
</span><span class='line'>
</span><span class='line'><span class="p">~/</span><span class="n">Public</span><span class="p">/</span><span class="n">scripts</span><span class="p">/</span><span class="n">vendor</span>
</span><span class='line'>    <span class="n">jquery</span><span class="p">&ndash;</span><span class="m">1.7</span><span class="p">.</span><span class="m">1.</span><span class="n">js</span>
</span><span class='line'>    <span class="n">jquery</span><span class="p">&ndash;</span><span class="n">ui</span><span class="p">&ndash;</span><span class="m">1.8</span><span class="p">.</span><span class="m">16.</span><span class="n">js</span>
</span><span class='line'>    <span class="n">jQuery</span><span class="p">.</span><span class="n">tmpl</span><span class="p">.</span><span class="n">js</span>
</span><span class='line'>    <span class="n">jquery</span><span class="p">.</span><span class="n">validate</span><span class="p">.</span><span class="n">js</span>
</span><span class='line'>    <span class="n">jquery</span><span class="p">.</span><span class="n">validate</span><span class="p">.</span><span class="n">unobtrusive</span><span class="p">.</span><span class="n">js</span>
</span><span class='line'>
</span><span class='line'><span class="p">~/</span><span class="n">Public</span><span class="p">/</span><span class="n">scripts</span><span class="p">/</span><span class="n">i8n</span><span class="p">/</span><span class="n">zh</span><span class="p">&ndash;</span><span class="n">CN</span>
</span><span class='line'>    <span class="n">jquery</span><span class="p">.</span><span class="n">ui</span><span class="p">.</span><span class="n">datepicker</span><span class="p">&ndash;</span><span class="n">zh</span><span class="p">&ndash;</span><span class="n">CN</span><span class="p">.</span><span class="n">js</span>
</span><span class='line'>    <span class="n">jquery</span><span class="p">.</span><span class="n">validate</span><span class="p">&ndash;</span><span class="n">zh</span><span class="p">&ndash;</span><span class="n">CN</span><span class="p">.</span><span class="n">js</span>
</span><span class='line'>
</span><span class='line'><span class="p">~/</span><span class="n">Public</span><span class="p">/</span><span class="n">scripts</span><span class="p">/</span><span class="n">i8n</span><span class="p">/</span><span class="n">es</span><span class="p">&ndash;</span><span class="n">MX</span>
</span><span class='line'>    <span class="n">jquery</span><span class="p">.</span><span class="n">ui</span><span class="p">.</span><span class="n">datepicker</span><span class="p">&ndash;</span><span class="n">es</span><span class="p">&ndash;</span><span class="n">MX</span><span class="p">.</span><span class="n">js</span>
</span><span class='line'>    <span class="n">jquery</span><span class="p">.</span><span class="n">validate</span><span class="p">&ndash;</span><span class="n">es</span><span class="p">&ndash;</span><span class="n">MX</span><span class="p">.</span><span class="n">js</span>
</span><span class='line'>
</span><span class='line'><span class="p">~/</span><span class="n">Public</span><span class="p">/</span><span class="n">scripts</span><span class="p">/</span><span class="n">pages</span><span class="p">/</span><span class="n">page1</span><span class="p">.</span><span class="n">js</span>
</span><span class='line'>    <span class="p">~/</span><span class="n">Public</span><span class="p">/</span><span class="n">scripts</span><span class="p">/</span><span class="n">pages</span><span class="p">/</span><span class="n">page1</span><span class="p">.</span><span class="n">js</span>
</span><span class='line'>
</span><span class='line'><span class="p">~/</span><span class="n">Public</span><span class="p">/</span><span class="n">scripts</span><span class="p">/</span><span class="n">pages</span><span class="p">/</span><span class="n">page2</span><span class="p">.</span><span class="n">js</span>
</span><span class='line'>    <span class="p">~/</span><span class="n">Public</span><span class="p">/</span><span class="n">scripts</span><span class="p">/</span><span class="n">pages</span><span class="p">/</span><span class="n">page2</span><span class="p">.</span><span class="n">js</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>You can see the exclusions worked, since the <em>pages</em> folder is blank (i.e. not bundled up) and each page script is made later on a per-file basis.</p>




<p>The reason I like this is because now I can just add folders to <em>scripts</em> without worrying about adding a manual Cassette bundle; it will just do it automatically and ignore the two folders I need to make a special case for.</p>




<p><strong>Including the script assets</strong></p>




<p>Remember I said Modernizr should be included in <code>&lt;head&gt;</code> but all the rest of the scripts should be before <code>&lt;/body&gt;</code>? We can do that easily with Cassette.</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="err">@</span><span class="p"><em></span> <span class="n">_Layout</span><span class="p">.</span><span class="n">cshtml</span> <span class="p"></em></span><span class="err">@</span>
</span><span class='line'><span class="err">@</span><span class="p">{</span>
</span><span class='line'>    <span class="c1">// CSS</span>
</span><span class='line'>    <span class="n">Bundles</span><span class="p">.</span><span class="n">Reference</span><span class="p">(</span><span class="s">&quot;public&quot;</span><span class="p">);</span>
</span><span class='line'><br/>
</span><span class='line'>    <span class="c1">// Scripts (vendor first!)</span>
</span><span class='line'>    <span class="n">Bundles</span><span class="p">.</span><span class="n">Reference</span><span class="p">(</span><span class="s">&quot;public/scripts/special&quot;</span><span class="p">,</span> <span class="s">&quot;head&quot;</span><span class="p">);</span>
</span><span class='line'>    <span class="n">Bundles</span><span class="p">.</span><span class="n">Reference</span><span class="p">(</span><span class="s">&quot;public/scripts&quot;</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="p">&lt;!</span><span class="n">DOCTYPE</span> <span class="n">html</span><span class="p">&gt;</span>
</span><span class='line'><span class="p">&lt;</span><span class="n">html</span><span class="p">&gt;</span>
</span><span class='line'><span class="p">&lt;</span><span class="n">head</span><span class="p">&gt;</span>
</span><span class='line'>    <span class="n">@Bundles</span><span class="p">.</span><span class="n">RenderStylesheets</span><span class="p">()</span>
</span><span class='line'><br/>
</span><span class='line'>    <span class="err">@</span><span class="p"><em></span> <span class="n">Modernizr</span> <span class="n">needs</span> <span class="n">to</span> <span class="n">be</span> <span class="n">first</span> <span class="p"></em></span><span class="err">@</span>
</span><span class='line'>    <span class="n">@Bundles</span><span class="p">.</span><span class="n">RenderScripts</span><span class="p">(</span><span class="s">&quot;head&quot;</span><span class="p">)</span>
</span><span class='line'><span class="p">&lt;/</span><span class="n">head</span><span class="p">&gt;</span>
</span><span class='line'><span class="p">&lt;</span><span class="n">body</span><span class="p">&gt;</span>
</span><span class='line'><br/>
</span><span class='line'>    <span class="err">@</span><span class="p"><em></span> <span class="n">All</span> <span class="n">other</span> <span class="n">scripts</span> <span class="p"></em></span><span class="err">@</span>
</span><span class='line'>    <span class="n">@Bundles</span><span class="p">.</span><span class="n">RenderScripts</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>    <span class="err">@</span><span class="p"><em></span> <span class="n">Localized</span> <span class="n">scripts</span> <span class="p"></em></span><span class="err">@</span>
</span><span class='line'>    <span class="n">@RazorHelpers</span><span class="p">.</span><span class="n">LocalizedScripts</span><span class="p">()</span>
</span><span class='line'><span class="p">&lt;/</span><span class="n">body</span><span class="p">&gt;</span>
</span><span class='line'><span class="p">&lt;/</span><span class="n">html</span><span class="p">&gt;</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>Notice the reference for Modernizr. I am using the overloaded <code>Reference</code> that accepts a <code>pageLocation</code> argument. This is the same as how you can include Razor sections in MVC3. The location is just a string you use when you call <code>@Bundles.RenderScripts({pageLocation})</code>. <strong>Tip:</strong> You can also specify <code>pageLocation</code> when you create a bundle in your <code>CassetteConfiguration</code> class. I did not, since I only needed one script in the <code>head</code> tag, but if you have multiple folders or bundles that need to be in separate locations, you don&rsquo;t have to specify a page location in your view files.</p>




<p>As with our stylesheets, we need a way to tell Cassette how to order the vendor scripts since we typically have plugins that depend on each other (such as jQuery). You <em>could</em> edit each vendor file and manually add file references to them, but that&rsquo;s no fun is it? In order to reduce headaches and maintenance, create a <a href="http://getcassette.net/documentation/configuration/bundle-descriptor-file">Bundle Descriptor File</a> instead. That way, you will only need to keep that file up-to-date as you add more vendor plugins.</p>




<p>In the <em>vendors</em> folder, I simply made a <em>bundle.txt</em> file:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="n">jquery</span><span class="p">&ndash;</span><span class="m">1.7</span><span class="p">.</span><span class="m">1.</span><span class="n">js</span>
</span><span class='line'><span class="n">jquery</span><span class="p">&ndash;</span><span class="n">ui</span><span class="p">&ndash;</span><span class="m">1.8</span><span class="p">.</span><span class="m">16.</span><span class="n">js</span>
</span><span class='line'><span class="n">jQuery</span><span class="p">.</span><span class="n">tmpl</span><span class="p">.</span><span class="n">js</span>
</span><span class='line'><span class="n">jquery</span><span class="p">.</span><span class="n">validate</span><span class="p">.</span><span class="n">js</span>
</span><span class='line'><span class="n">jquery</span><span class="p">.</span><span class="n">validate</span><span class="p">.</span><span class="n">unobtrusive</span><span class="p">.</span><span class="n">js</span>
</span><span class='line'><span class="p">*</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>The wildcard at the end tells Cassette, &ldquo;Yo, do whatever you want for the rest of the scripts you find.&rdquo; How useful! Now there&rsquo;s even <em>less</em> maintenance (didn&rsquo;t I tell you this baby was optimized for happiness?).</p>




<p>For localization, I just created a Razor helper to include the right culture files for me (this shows you that you can use the <code>Bundles</code> object anywhere in your Razor views and Cassette will include the references):</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="c1">//</span>
</span><span class='line'><span class="c1">// ~/App_Code/RazorHelpers.cshtml</span>
</span><span class='line'><span class="c1">//</span>
</span><span class='line'><span class="n">@helper</span> <span class="nf">LocalizedScripts</span><span class="p">()</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>    <span class="kt">string</span> <span class="n">cultureName</span> <span class="p">=</span> <span class="n">System</span><span class="p">.</span><span class="n">Threading</span><span class="p">.</span><span class="n">Thread</span><span class="p">.</span><span class="n">CurrentThread</span><span class="p">.</span><span class="n">CurrentCulture</span><span class="p">.</span><span class="n">Name</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="n">cultureName</span> <span class="p">!=</span> <span class="n">Constants</span><span class="p">.</span><span class="n">DefaultCulture</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="n">Bundles</span><span class="p">.</span><span class="n">Reference</span><span class="p">(</span><span class="n">String</span><span class="p">.</span><span class="n">Format</span><span class="p">(</span><span class="s">&quot;/public/scripts/i8n/{0}&quot;</span><span class="p">,</span> <span class="n">cultureName</span><span class="p">));</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>And on individual views, I can now included page-specific JS:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="err">@</span><span class="p"><em></span> <span class="n">Views</span><span class="err">&lt;/span><span class="n">Controller1</span><span class="err">&lt;/span><span class="n">View1</span><span class="p">.</span><span class="n">cshtml</span> <span class="p"></em></span><span class="err">@</span>
</span><span class='line'><span class="err">@</span><span class="p">{</span>
</span><span class='line'>    <span class="n">Bundles</span><span class="p">.</span><span class="n">Reference</span><span class="p">(</span><span class="s">&quot;~/public/scripts/pages/page1.js&quot;</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>Cassette is smart and will include the JS automatically in the <em>Layout.cshtml</em> file <em>and</em> in the proper order (in my case, just at the end. If you had references inside, Cassette would know).</p>




<h4>To debug or not to debug, that is the question!</h4>




<p>In our environment, we don&rsquo;t necessarily want to turn off Cassette as soon as the web.config&rsquo;s <code>debug</code> flag turns to <em>false</em>. Instead, we have different environments where it might make sense to leave Cassette on. When the site goes out to QA, then it makes sense to turn on Cassette&rsquo;s Release mode, but while developing locally and in staging, we may need to debug a bit more.</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="k">public</span> <span class="k">void</span> <span class="nf">Configure</span><span class="p">(</span><span class="n">BundleCollection</span> <span class="n">bundles</span><span class="p">,</span> <span class="n">CassetteSettings</span> <span class="n">settings</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="c1">// Debug locally and in staging</span>
</span><span class='line'>  <span class="n">settings</span><span class="p">.</span><span class="n">IsDebuggingEnabled</span> <span class="p">=</span>
</span><span class='line'>      <span class="n">Server</span><span class="p">.</span><span class="n">CurrentEnvironment</span> <span class="p">==</span> <span class="n">Server</span><span class="p">.</span><span class="n">ServerEnvironment</span><span class="p">.</span><span class="n">Developer</span> <span class="p">||</span>
</span><span class='line'>      <span class="n">Server</span><span class="p">.</span><span class="n">CurrentEnvironment</span> <span class="p">==</span> <span class="n">Server</span><span class="p">.</span><span class="n">ServerEnvironment</span><span class="p">.</span><span class="n">Development</span><span class="p">;</span>
</span><span class='line'><br/>
</span><span class='line'>  <span class="n">ConfigureStylesheets</span><span class="p">(</span><span class="n">bundles</span><span class="p">);</span>
</span><span class='line'>  <span class="n">ConfigureJavascript</span><span class="p">(</span><span class="n">bundles</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>And there&rsquo;s my full <code>CassetteConfiguration</code> class!</p>




<h3>So what are you waiting for?</h3>




<p>Cassette is awesome and I hope you learned a couple tips for doing things in a semi-complex environment. Let me know if you&rsquo;ve found any more good tips &amp; tricks, or if you notice I missed an optimization or hidden feature.</p>




<p>I would really like to do some performance testing with Cassette. It <em>does</em> add to your overhead on the site, but in my Firebug timings, I noticed much less time being spent on CSS files and more time being spent on JS files. If you are worried about performance on a massive scale, it will <strong>always</strong> be faster to minify and concatenate your files at compile or build time because then IIS is serving the files directly. Components like Cassette are meant to ease your burden by handling that for you, at the expense of some milliseconds. Remember that due to caching and aggressive expiration headers, the browser should <em>not</em> be requesting assets anyway after the first request.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2011-12-23T03:24:19+00:00" pubdate data-updated="true">Dec 23<span>rd</span>, 2011</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/26/tips-when-using-backbonejs-in-a-net-world">Tips When Using Backbone.js in a .NET World</a></h2>
  
  <p>
    <p>I am learning <a href="http://documentcloud.github.com/backbone/">Backbone.js</a> so I can re-write the main GUI for <a href="http://keeptrackofmygames.com">KTOMG</a>. I am still learning and I&rsquo;ve run into a couple gotchas that I hope I can clear up for anyone else that dares to tread in these woods. Still, I&rsquo;ve been able to rewrite the listing of a user&rsquo;s library in one night using Backbone and all my existing back-end code (the farthest up I edited was my controller). Very impressive for a Backbone n00b!</p>




<h2>Backbone IS your application</h2>




<p>After watching the <a href="http://peepcode.com/products/backbone-iii">PeepCode screencasts</a> (I, II, and III), I have realized something about Backbone.</p>




<blockquote><p>Backbone will pretty much replace your MVC views and controller logic.</p></blockquote>




<p>This didn&rsquo;t hit me until the last episode and at first, this felt threatening. I am working in ASP.NET MVC and it feels wrong to not utilize it. After thinking about it some more, however, there were a few important points to consider:</p>




<ol>
<li>Backbone doesn&rsquo;t <em>necessarily</em> have to be your whole app. In fact, right now I am only using Backbone for the main &ldquo;library&rdquo; interface and I am keeping the rest of the site in plain-old MVC 3.</li>
<li>You still use your controllers and could even use your Razor views as HTML templates.</li>
</ol>




<p>Considering those points, I felt a lot better about using Backbone. Not only will it be a great experience, it&rsquo;ll also make the most important part of my application very responsive and robust, without needing to worry a ton about the plumbing.</p>




<p>Who knows? Maybe KTOMG will be running on Node.js by the end of the month.</p>




<h2>Tips When Using Backbone with ASP.NET MVC</h2>




<p>There were a few gotchas I ran into when using Backbone in my typical .NET environment.</p>




<h3>Use AttributeRouting, like, now</h3>




<p><a href="https://github.com/mccalltd/AttributeRouting">AttributeRouting</a> is one of my new favorite packages. It axes the mostly-confusing, mostly-convoluted Global.asax way of handling routes in favor of a more-discoverable (I feel) way of doing routes by decorating actual controller methods:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="k">using</span> <span class="nn">AttributeRouting</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="na">[RoutePrefix(&quot;games&quot;)]</span>
</span><span class='line'><span class="k">public</span> <span class="k">class</span> <span class="nc">GamesController</span> <span class="p">:</span> <span class="n">Controller</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">//</span>
</span><span class='line'>  <span class="c1">// GET: /games/</span>
</span><span class='line'>
</span><span class='line'>  <span class="p">[</span><span class="n">GET</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="k">public</span> <span class="n">ActionResult</span> <span class="nf">Index</span><span class="p">()</span> <span class="p">{}</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">//</span>
</span><span class='line'>  <span class="c1">// POST: /games/</span>
</span><span class='line'>
</span><span class='line'>  <span class="p">[</span><span class="n">POST</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="k">public</span> <span class="n">ActionResult</span> <span class="nf">New</span><span class="p">(</span><span class="n">Model</span> <span class="n">model</span><span class="p">)</span> <span class="p">{}</span>
</span><span class='line'>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>Hopefully you will see why this is useful. Backbone is opinionated in that it assumes you&rsquo;re using a RESTful interface for your API. In normal vanilla MVC, this could turn your Global.asax into a routing nightmare. However, with AttributeRouting, it&rsquo;s easy! Here&rsquo;s an example of a <a href="http://stackoverflow.com/a/6263133/109458">Backbone-compatible REST controller</a>:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="k">using</span> <span class="nn">AttributeRouting</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="na">[RoutePrefix(&quot;api/games&quot;)]</span>
</span><span class='line'><span class="k">public</span> <span class="k">class</span> <span class="nc">GamesApiController</span> <span class="p">:</span> <span class="n">Controller</span> <span class="p">{</span>
</span><span class='line'><br/>
</span><span class='line'>  <span class="c1">//</span>
</span><span class='line'>  <span class="c1">// GET: /api/games/</span>
</span><span class='line'><span class="na"> </span>
</span><span class='line'><span class="na"> [GET(&quot;&quot;)]</span>
</span><span class='line'>  <span class="k">public</span> <span class="n">JsonResult</span> <span class="nf">Index</span><span class="p">()</span> <span class="p">{}</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">//</span>
</span><span class='line'>  <span class="c1">// POST: /api/games/</span>
</span><span class='line'><span class="na"> </span>
</span><span class='line'><span class="na"> [POST(&quot;&quot;)]</span>
</span><span class='line'>  <span class="k">public</span> <span class="n">JsonResult</span> <span class="nf">Create</span><span class="p">()</span> <span class="p">{}</span>
</span><span class='line'><br/>
</span><span class='line'>  <span class="c1">//</span>
</span><span class='line'>  <span class="c1">// GET: /api/games/{id}</span>
</span><span class='line'><span class="na"> </span>
</span><span class='line'><span class="na"> [GET(&quot;{id}&quot;)]</span>
</span><span class='line'>  <span class="k">public</span> <span class="n">JsonResult</span> <span class="nf">Show</span><span class="p">(</span><span class="kt">int</span> <span class="n">id</span><span class="p">)</span> <span class="p">{}</span>
</span><span class='line'><br/>
</span><span class='line'>  <span class="c1">//</span>
</span><span class='line'>  <span class="c1">// PUT: /api/games/{id}</span>
</span><span class='line'><span class="na"> </span>
</span><span class='line'><span class="na"> [PUT(&quot;{id}&quot;)]</span>
</span><span class='line'>  <span class="k">public</span> <span class="n">JsonResult</span> <span class="nf">Update</span><span class="p">(</span><span class="kt">int</span> <span class="n">id</span><span class="p">)</span> <span class="p">{}</span>
</span><span class='line'><br/>
</span><span class='line'>  <span class="c1">//</span>
</span><span class='line'>  <span class="c1">// DELETE: /api/games/{id}</span>
</span><span class='line'><span class="na"> </span>
</span><span class='line'><span class="na"> [DELETE(&quot;{id}&quot;)]</span>
</span><span class='line'>  <span class="k">public</span> <span class="n">JsonResult</span> <span class="nf">Delete</span><span class="p">(</span><span class="kt">int</span> <span class="n">id</span><span class="p">)</span> <span class="p">{}</span>
</span><span class='line'><br/>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>Good fodder for a T4 template. If you have a larger site, consider using an <code>Api</code> MVC Area for cleaner separation.</p>




<h3>Be careful when serializing your objects</h3>




<p>I ran into two gotchas with serializing my objects.</p>




<p>First, if you have an <code>Id</code> property/field, Backbone will not be happy. <strike>It needs to be lowercase id</strike>. You should utilize the <a href="https://github.com/documentcloud/backbone/blob/master/backbone.js#L153https://github.com/documentcloud/backbone/blob/master/backbone.js#L153"><code>idAttribute</code></a> option on your Backbone model to override the property name. It took me forever to figure out why nothing was happening when I deleted a model.</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kr">class</span> <span class="nx">MyModel</span> <span class="kr">extends</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Model</span>
</span><span class='line'>  <span class="nx">idAttribute</span><span class="o">:</span> <span class="s2">&quot;Id&quot;</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>Second, if you are going to serialize EF entities when proxying or lazy-loading is enabled, you need to use a serialization framework like <a href="http://json.codeplex.com/">JSON.NET</a> <strong>or</strong> you need to make flat DTO objects (or view models). I opted for the latter approach first because it was quick, but I am in the process of implementing JSON.NET to do serialization of my entities for me.</p>




<p>For EF serialization, you need to use a custom <code>ContractResolver</code>. I borrowed <a href="http://stackoverflow.com/questions/6991596/serializing-ef4-1-entities-using-json-net">this one</a>. Furthermore, I also needed to set the <code>ReferenceLoopHandling</code> to <code>Ignore</code> on a new <code>JsonSerializerSettings</code> object so it would avoid circular references.</p>




<p>Finally, this is optional but considering the first gotcha, I highly recommend you inherit the EF contract resolver above from <code>CamelCasePropertyNamesContractResolver</code> so your JSON is serialized with camelCase properties.</p>




<h3>Consider leveraging Razor/ASPX partial views for your templates</h3>




<p>I haven&rsquo;t actually tried this, but I don&rsquo;t see why it wouldn&rsquo;t work. In a Backbone project you&rsquo;ll typically have plenty of templates. Right now I have 3 but I expect it to grow quite a bit in the future. I was planning on moving all these templates to <code>.cshtml</code> files and then using <code>@Html.Partial("_TemplateName")</code> to include them in my main layout. I may even create a small extension method to wrap that in a <code>&lt;script&gt;</code> tag. I will update this post if I do.</p>




<p>If you happen to be working on an OSS project, you should be using <a href="http://getcassette.net">Cassette</a> because it can package up your HTML/Knockout templates and <a href="http://getcassette.net/documentation/html-templates">include them all in your page for you</a> <strong>automagically</strong>. If I wasn&rsquo;t using AppHarbor and I was using a dedicated server, I would buy Cassette in a second. I wish they had per-site licenses.</p>




<h3>Use those organization skills</h3>




<p>ASP.NET MVC comes with a friendly and intuitive file layout out-of-the-box:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">Project</span>
</span><span class='line'> <span class="o">|</span><span class="nx"><em></span> <span class="nx">Controllers</span>
</span><span class='line'> <span class="o">|</span><span class="nx"></em></span> <span class="nx">Models</span>
</span><span class='line'> <span class="o">|</span><span class="nx"><em></span> <span class="nx">Scripts</span>
</span><span class='line'> <span class="o">|</span><span class="nx"></em></span> <span class="nx">Styles</span>
</span><span class='line'> <span class="o">|</span><span class="nx">_</span> <span class="nx">Views</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>I&rsquo;ve shortened mine, plus I&rsquo;ve made my scripts directory a bit more Backbone friendly:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">Project</span>
</span><span class='line'> <span class="o">|</span><span class="nx"><em></span> <span class="nx">Controllers</span>
</span><span class='line'> <span class="o">|</span><span class="nx"></em></span> <span class="nx">Models</span>
</span><span class='line'> <span class="o">|</span><span class="nx"><em></span> <span class="nx">Public</span>
</span><span class='line'>   <span class="o">|</span><span class="nx"></em></span> <span class="nx">Images</span>
</span><span class='line'>   <span class="o">|</span><span class="nx"><em></span> <span class="nx">Scripts</span>
</span><span class='line'>     <span class="o">|</span><span class="nx"></em></span> <span class="nx">App</span>
</span><span class='line'>       <span class="o">|</span><span class="nx"><em></span> <span class="nx">Collections</span><span class="p">.</span><span class="nx">coffee</span>
</span><span class='line'>       <span class="o">|</span><span class="nx"></em></span> <span class="nx">Backbone</span> <span class="nx">CoffeeScript</span> <span class="nx">files</span>
</span><span class='line'>     <span class="o">|</span><span class="nx"><em></span> <span class="nx">Framework</span> <span class="p">(</span><span class="nx">or</span> <span class="nx">Vendor</span><span class="p">)</span>
</span><span class='line'>   <span class="o">|</span><span class="nx"></em></span> <span class="nx">scss</span> <span class="nx">files</span><span class="p">&hellip;</span>
</span><span class='line'> <span class="o">|</span><span class="nx">_</span> <span class="nx">Views</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>It&rsquo;s up to you how you like to organize, and perhaps you&rsquo;d even like to separate it further down into modules.</p>




<h3>Learn CoffeeScript and SASS</h3>




<p>This technically does not have anything to do with .NET or Backbone. However, your life will be <em>easier</em> if you learn CoffeeScript as that makes using Backbone that much more pleasant:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kr">class</span> <span class="nx">GameView</span> <span class="kr">extends</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">View</span>
</span><span class='line'>  <span class="nx">className</span><span class="o">:</span> <span class="s1">&#39;game&#39;</span>
</span><span class='line'>  <span class="nx">template</span><span class="o">:</span> <span class="nx">_</span><span class="p">.</span><span class="nx">template</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#game-template&quot;</span><span class="p">).</span><span class="nx">html</span><span class="p">())</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">initialize</span><span class="o">:</span> <span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="o">&ndash;&gt;</span>
</span><span class='line'>    <span class="err">@</span><span class="nx">model</span><span class="p">.</span><span class="nx">bind</span> <span class="s1">&#39;change&#39;</span><span class="p">,</span> <span class="err">@</span><span class="nx">render</span><span class="p">,</span> <span class="err">@</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">render</span><span class="o">:</span> <span class="o">&ndash;&gt;</span>
</span><span class='line'>    <span class="nx">$</span><span class="p">(</span><span class="err">@</span><span class="nx">el</span><span class="p">).</span><span class="nx">html</span> <span class="err">@</span><span class="nx">template</span><span class="p">()</span>
</span><span class='line'>    <span class="err">@</span> <span class="err">#</span> <span class="nx">Never</span> <span class="nx">forget</span> <span class="k">this</span> <span class="nx">line</span> <span class="k">in</span> <span class="nx">render</span><span class="p">()</span> <span class="nx">or</span> <span class="nx">you</span><span class="err">&#39;</span><span class="nx">ll</span> <span class="nx">regret</span> <span class="nx">it</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>(<em>Disclaimer:</em> This is not real and won&rsquo;t run; it&rsquo;s meant as an illustration of Backbone in CoffeeScript)</p>




<p>It&rsquo;s much nicer to write in Backbone without all those pesky parenthesis and manual <code>bindAll</code> or <code>extend</code> shenanigans. Again, I&rsquo;d recommend <a href="http://peepcode.com/products/coffeescript">PeepCode&rsquo;s CoffeeScript screencast</a>, that&rsquo;s about all it takes to learn it properly.</p>




<p><img src="http://www.mindscapehq.com/upload/web-workbench/preview.png" alt="Mindscape Example" /></p>




<p>If you do decide to take the plunge (it&rsquo;s worth it!), get yourself <a href="http://www.mindscapehq.com/products/web-workbench">Mindscape Web Workbench</a> and you&rsquo;ll be a much happier camper when working with Coffee, SASS, and LESS in Visual Studio.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2011-12-16T02:37:51+00:00" pubdate data-updated="true">Dec 16<span>th</span>, 2011</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/25/vs-extension-for-js-template-support">Vs Extension for JS Template Support</a></h2>
  
  <p>
    <p>I am thinking of embarking on a journey that involves <a href="http://documentcloud.github.com/backbone/">Backbone.js</a> in my MVC 3 project. This would involve heavy use of templating. After thinking about it a bit and doing some Googling, I realized that <strong>there is no JS template extension for Visual Studio.</strong></p>




<p>I realize that you could just name your template files &ldquo;.html&rdquo; and be done with it. However, I feel like that isn&rsquo;t &ldquo;cool&rdquo; enough.</p>




<p>Based on some <a href="http://stackoverflow.com/questions/3253205/how-do-i-visual-studio-syntax-highlighting-extension">preliminary research</a>, it seems to me it would not be impossible to add support for common JS template syntax highlighting&hellip; and perhaps even Intellisense.</p>




<p>In fact, VS 11 <a href="http://blogs.msdn.com/b/webdevtools/archive/2011/09/15/new-javascript-editing-features-for-web-development-in-visual-studio-11-developer-preview.aspx">will support jQuery Template syntax highlighting</a>, but not only is jquery-tmpl <a href="http://weblogs.asp.net/stevewellens/archive/2011/12/01/goodby-jquery-templates-hello-jsrender.aspx">obsolete</a>, it is also not the <a href="http://jsperf.com/dom-vs-innerhtml-based-templating/112">only kind of templating system</a>.</p>




<p>Why am I making this post? I am not sure. Part of me wants to attempt to make such an extension, probably starting out with a simple template syntax like <a href="http://mustache.github.com/">Mustache</a> (or <a href="http://www.handlebarsjs.com/">Handlebars</a>). I would be happy with an extension that was pretty much an HTML highlighter that also highlighted tokens (e.g. &ldquo;, &rdquo;, etc.) just like VS does for Razor. Bonus points awarded if it [somehow] does Intellisense. In my dream world, it would act very much like MVC Razor does right now, where you declare the &ldquo;model&rdquo; for the template and that is its context for Intellisense. To me, that seems reasonable for a no-logic template system like Mustache but may prove unwieldy once you allow for normal JS expressions like in jquery-tmpl. That kind of syntax may also not make sense in the first place considering you could pass in whatever you wanted into a template&rsquo;s context.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2011-12-14T20:27:33+00:00" pubdate data-updated="true">Dec 14<span>th</span>, 2011</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/24/skyrim-mod-request-compilation">Skyrim Mod Request Compilation</a></h2>
  
  <p>
    <p>These are for ideas for myself to explore or for others to get ideas from (or help make!). I&rsquo;m not a modder, really, I&rsquo;ve never done a TES mod before. Skyrim, however, has motivated me to at least explore the option of making mods. I can&rsquo;t design a model worth crap, so many of my ideas will be focused on stuff I could possibly do myself. I&rsquo;ll note ones that I think other people might want to tackle (<strong>§ denotes someone else should please make it</strong>).</p>




<p>I will be keeping this updated for myself, mostly, but I could also add mods people suggest underneath if I think I could possibly do them (I can handle scripting/tweak/UI mods I think, just not art-based ones). I&rsquo;d love constructive feedback (either <em>why</em> my idea sucks or <em>how</em> it could be improved).</p>




<h3>Updates</h3>




<ul>
<li><strong>[11/15/11]</strong> Added chest categories, linked inventory sorting</li>
<li><strong>[11/14/11]</strong> Initial list</li>
</ul>




<h2>Possibly Possible Mods</h2>




<p>Mods that should be possible given what I know about past TES mods.</p>




<p><strong>Non-Levelled Epic Loot</strong></p>




<p>In the words of my friend, &ldquo;It saddens me to realize that the Cuirass of the Savior&rsquo;s Hide that I just found will be worthless after the next 10 levels I grow.&rdquo; Epic loot should be epic and possibly protected by insane bosses to keep some semblance of balance. This is one big thing that disappoints me about Skyrim.</p>




<p><strong>Poisoned Food</strong></p>




<p>Mostly a for-fun mod. Poison apples were awesome in Oblivion and I&rsquo;m surprised you can&rsquo;t apply poison to food.</p>




<p><strong>Follower Bonuses</strong></p>




<p>Like Fallout. Followers all have different skill/perk bonuses that you get when you have them in your party. If perk unlocking isn&rsquo;t possible, maybe simply stat-based (i.e. Lydia gives you +10% to One-Handed and +5% to Blocking). This would make followers a bit more strategic.</p>




<p><strong>Follower Home Base</strong> §</p>




<p>Like Fallout, if this isn&rsquo;t already in the game, followers you recruit should return to your home (if it&rsquo;s big enough). Easier to find them if you dismiss them plus makes you feel loved and a true Dovahkiin. &ldquo;Sorry, honey, we&rsquo;ll be having guests over&hellip; for awhile.&rdquo;</p>




<p><strong>Follower Map Indicator</strong></p>




<p>Like Fallout (right?), show followers on your map so it&rsquo;s easier to find them when they&rsquo;re lost. Or to be immersive, a spell ala Clairvoyance?</p>




<p><strong>Horse Whistle</strong></p>




<p>Already suggested. An item that summons your horse ala Red Dead (except probably instant due to modding capability).</p>




<p><strong>Salvage Weapons and Apparel</strong> §</p>




<p>I don&rsquo;t know what the official term is, but the ability to break down weapons/apparel into their component parts (&ldquo;Salvage&rdquo;?). To keep balance, I&rsquo;d add a percent chance based on your smithing skill. Should be realistic based on actual weapon (sword yields more steel than a dagger).</p>




<p><strong>Enchanted Pickaxes</strong></p>




<p>Pickaxes can be enchanted or can be found randomly, that have enhanced chance to find treasure (rubies, gems, etc).</p>




<p><strong>Family</strong> §</p>




<p>When married, you can hit the bed and have children ala Fable. Kids grow into teens into adults (adult vs. teen doesn&rsquo;t seem to be differentiated in Skyrim), they have random jobs, and maybe can turn into followers (complicated?). There&rsquo;s probably much more to this I am not thinking of right now, as far as potential gameplay additions.</p>




<p><strong>Notice/Bounty Boards</strong> §</p>




<p>Talking to inn keepers to get bounties is cool but I loved Dragon Age&rsquo;s notice boards at the Chantry. I think the ability to randomize quests using Radiant AI would make this a sweet, sweet mod for adventurers like me. Quests could be: fetch items, kill bandits, clear out caves, help farmers, collect crafting items, deliver goods, etc.</p>




<p><strong>Multi-Ring</strong></p>




<p><a href="http://www.reddit.com/r/skyrimmods/comments/meivy/request_allow_more_than_one_ring_to_be_equipped/">Already suggested</a>. I&rsquo;m sure this wasn&rsquo;t included due to balance. I&rsquo;d like to wear at least two rings, and maybe disable stacking (i.e. wearing two +20% health regen rings).</p>




<p><strong>Multi-enchant</strong></p>




<p>I could be wrong but I don&rsquo;t think you can have more than 1 enchantment on an item. Again, perhaps for balance. I&rsquo;d love to see the ability to do this, maybe depending on enchantment skill/perk.</p>




<p><strong>More Jobs</strong> §</p>




<p>This would probably need to be done by someone who can do animations/modeling. I&rsquo;d love to see more jobs you can do, maybe that have to do with fishing, clothing, hunting, etc. You know, what people would do for a living in Skyrim!</p>




<p><strong>Harder Dragons</strong></p>




<p>Is it just me or are the low-level dragons way too easy? It only takes 5-8 hits of my two-handed warhammer to kill one&hellip; that seems too little. Dragons should be, &ldquo;Shit I have to use up all these potions and take cover and blah blah CRAP CRAP&rdquo; encounters&hellip; like a Draugr Overlord.</p>




<p><strong>Huge castle/house</strong> §</p>




<p>No doubt someone will do this. I&rsquo;d like to see mannequins, display cases, and stuff so I can show off every cool item I find. It&rsquo;s also great for people like me who wish to collect every piece of armor and weapon to have one of each in a &ldquo;museum&rdquo; type setting.</p>




<p><strong>Build-a-town</strong> §</p>




<p>A large undertaking. Basically the equivalent of your home settlement in Assassin&rsquo;s Creed where you can buy shops, etc. Invest/upgrade them, hire people, etc. for cash flow. Bandits can attack and destroy stores. Shopkeepers can steal money from you. Dragons can attack. Guards can be hired (maybe quests for each kind, like do something for the Jarl to gain his trust and send over guards). Your home can be expanded. This would be one epic mod but boy, oh boy, would it be awesome.</p>




<p><strong>Better Bookcases</strong></p>




<p>Anyone else disappointed in the built-in bookcases for your home? How come only 9 books can be on a shelf when clearly there is more room for at least 4-5 more? I don&rsquo;t want to come off as a slob to my wife or followers.</p>




<p><strong>Better Housing Equipment</strong> §</p>




<p>While you can add a lab to some houses, I&rsquo;d like to also invest in an armory (smithing) and extra storage (chests) for my house. This I&rsquo;m sure will be the way the huge housing mods go, though, but I&rsquo;d rather earn that stuff than have it just appear in my house because of a mod. Make me pay 5000 gold for an armory, that&rsquo;s pretty motivating. To make it even sweeter, like Fallout, add some bonuses you get for using your own equipment.</p>




<p><strong>Crafting Recipes</strong></p>




<p>Is it just me or is it a little weird that all I need is a perk to create entire sets of items? This is fun but I was thinking it might be more challenging to require every item to have a recipe you need to find out in the world/merchants instead. Just like Fallout blueprints. Or, generate a recipe on an item you already own.</p>




<h2>Possibly Impossible Mods</h2>




<p>Mods that may or may not be possible, but seems like they won&rsquo;t be.</p>




<p><strong>Vanity Mod</strong></p>




<p><a href="http://www.reddit.com/r/skyrimmods/comments/m2quz/request_vanity_mod_for_inventory_screen/">Already suggested by me</a>, one of the top-voted requests that I&rsquo;ve seen on /r/skyrimmods. Ability to see your character, somehow, when equipping items. Workaround is to use 3rd person and position the camera but this can only be done with your weapon sheathed.</p>




<p><strong>Better Custom Map Markers</strong></p>




<p>I like that you can add a map marker as a waypoint, but I better like the idea of Morrowind&rsquo;s custom markers that I can add notes to. Ability to add any number of custom markers to world/local map and add a note/caption.</p>




<p><strong>Follower Back Stories</strong> §</p>




<p>This was one of the more fun things in Dragon Age. Followers actually had back stories and you could do quests for them to retrieve a family heirloom, save them from assassins, etc. In a game like Skyrim or DA where everyone is voiced&hellip; this seems like a lot of work, especially because it would seem weird to have followers have a different voice.</p>




<p><strong>Follower Salesman</strong></p>




<p>This was an idea from my friend. Borrow the mechanic from Torchlight where you can send your follower back to the closest major city and sell all the goods he&rsquo;s carrying (excepting &ldquo;equipped&rdquo; items probably). I <em>think</em> this is possible but I assume it&rsquo;d take a lot of scripting work. Add a cooldown same as Torchlight where your companion will be gone for awhile before returning. The companion can be carrying the gold he/she got from the transaction or just have it added automatically. If possible, this should be a perk, perhaps in the Speech tree.</p>




<p><strong>Better Container States</strong></p>




<p>I love how Fallout and beyond show what containers are &ldquo;Empty.&rdquo; However, I&rsquo;m a little peeved they also don&rsquo;t show you what&rsquo;s been searched. To be immersive, perhaps all one has to do is make a mod that keeps containers in the &ldquo;open&rdquo; state after you look at them, but at the least, it should show a &ldquo;Searched&rdquo; status when you hover over just like Empty.</p>




<p><strong>Item Sets</strong></p>




<p>Favorites are cool but I&rsquo;d love to see item set capability, maybe as &ldquo;favoritable&rdquo; themselves or a separate menu. Basically, I typically play 3 ways in combat: brawler, mage murderer, and ranger. I&rsquo;d love to make it even easier by adding apparel to equip in addition to weapons for those situations. For example, for my mage murderer situation: equip my custom weapon, Mage Bane that does a ton of magicka damage on hit, equip an armor piece(s) that give me magicka resistance, etc. For brawler, equip my warhammer, armor that regens stamina faster or fortifies it, etc. You get the idea. Maybe this is as simple as allowing one number to be associated to multiple items. This seems like a code change, though.</p>




<p><strong>Quest Vicinities</strong></p>




<p>Because disabling map markers and your compass could easily make things a huge pain in the ass, even though it&rsquo;s &ldquo;immersive&rdquo;, I think a good balance would be the ability to disable quest markers and &ldquo;unvisited&rdquo; locations and instead present a Red Dead Redemption like &ldquo;vicinity&rdquo; on the map (circular areas) where the quest marker/location lies somewhere within. Locations you&rsquo;ve visited still show up on compass/map, but &ldquo;unvisited&rdquo; locations do not. Since UI modding is possible, I am not sure to what extent we can mod the map like this and whether or not enabling a bunch of active quests will make this too noisy.</p>




<p><strong>Item Sorting</strong></p>




<p><a href="http://www.reddit.com/r/skyrimmods/comments/ma5v2/request_improved_inventory_sorting/">Already suggested</a>. Ability to sort your inventory/containers by weight/price at the least. Always takes me too long to figure out what to give to my pack mule for carrying or dropping.</p>




<p><strong>Chest Categories</strong></p>




<p><a href="http://www.reddit.com/r/skyrimmods/comments/mb2sm/request_chest_sorting/">Already suggested</a>. Ability for chests to have categories ala characters.</p>




<p><strong>Quick Compare</strong></p>




<p>Already suggested. Ability to see if a weapon/apparel is better than your current by viewing in the gameworld (hover) or in a chest (in the details or bottoms status bar).</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2011-11-14T22:41:56+00:00" pubdate data-updated="true">Nov 14<span>th</span>, 2011</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/23/mvc-pro-tip-dont-use-the-id-url-parameter-in-your">MVC Pro Tip: Don&#8217;t Use the &#8220;Id&#8221; URL Parameter in Your Routes</a></h2>
  
  <p>
    <p>By default, MVC will use a route layout like this:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="n">routes</span><span class="p">.</span><span class="n">MapRoute</span><span class="p">(</span>
</span><span class='line'>  <span class="s">&quot;Default&quot;</span><span class="p">,</span> <span class="c1">// Route name</span>
</span><span class='line'>  <span class="s">&quot;{controller}/{action}/{id}&quot;</span><span class="p">,</span> <span class="c1">// URL with parameters</span>
</span><span class='line'>  <span class="k">new</span> <span class="p">{</span> <span class="n">controller</span> <span class="p">=</span> <span class="s">&quot;Home&quot;</span><span class="p">,</span> <span class="n">action</span> <span class="p">=</span> <span class="s">&quot;Index&quot;</span><span class="p">,</span> <span class="n">id</span> <span class="p">=</span> <span class="n">UrlParameter</span><span class="p">.</span><span class="n">Optional</span> <span class="p">}</span> <span class="c1">// Parameter defaults</span>
</span><span class='line'><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>Besides the fact that you shouldn&rsquo;t use the default route (use named routes!), there&rsquo;s another issue.</p>




<p>Do you have any domain models like this?</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="k">class</span> <span class="nc">Foo</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">int</span> <span class="n">Id</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>Now, let&rsquo;s say you wanted to add a new Edit method for this model:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="k">public</span> <span class="n">FooController</span> <span class="p">{</span>
</span><span class='line'><span class="na">    [HttpPost]</span>
</span><span class='line'>    <span class="k">public</span> <span class="n">ActionResult</span> <span class="nf">Edit</span><span class="p">(</span><span class="kt">int</span> <span class="n">id</span><span class="p">,</span> <span class="n">Foo</span> <span class="n">foo</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>There will be a problem here if you expect to be able to change this ID (rare but it happens). MVC will model bind the route&rsquo;s <code>id</code> parameter to your model&rsquo;s ID, possibly breaking your code. This is because MVC does not differentiate your two <code>id</code> and <code>Id</code> parameters, it sees them as one in the same (this has to do with the underlying <code>Request</code> collection).</p>




<h3>Fix it!</h3>




<p>It&rsquo;s simple to fix. Instead of using <code>id</code> as a URL parameter throughout your application, use something else! I typically use <code>identifier</code>:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="n">routes</span><span class="p">.</span><span class="n">MapRoute</span><span class="p">(</span>
</span><span class='line'>  <span class="s">&quot;Default&quot;</span><span class="p">,</span> <span class="c1">// Route name</span>
</span><span class='line'>  <span class="s">&quot;{controller}/{action}/{identifier}&quot;</span><span class="p">,</span> <span class="c1">// URL with parameters</span>
</span><span class='line'>  <span class="k">new</span> <span class="p">{</span> <span class="n">controller</span> <span class="p">=</span> <span class="s">&quot;Home&quot;</span><span class="p">,</span> <span class="n">action</span> <span class="p">=</span> <span class="s">&quot;Index&quot;</span><span class="p">,</span> <span class="n">identifier</span> <span class="p">=</span> <span class="n">UrlParameter</span><span class="p">.</span><span class="n">Optional</span> <span class="p">}</span> <span class="c1">// Parameter defaults</span>
</span><span class='line'><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// Controller</span>
</span><span class='line'><span class="k">public</span> <span class="n">FooController</span> <span class="p">{</span>
</span><span class='line'><span class="na">    [HttpPost]</span>
</span><span class='line'>    <span class="k">public</span> <span class="n">ActionResult</span> <span class="nf">Edit</span><span class="p">(</span><span class="kt">int</span> <span class="n">identifier</span><span class="p">,</span> <span class="n">Foo</span> <span class="n">foo</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>Voila. No more model binding issues!</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2011-11-02T19:25:08+00:00" pubdate data-updated="true">Nov 2<span>nd</span>, 2011</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/22/whats-the-most-efficient-way-to-read-config-settin">What&#8217;s the Most Efficient Way to Read Config Settings in .NET?</a></h2>
  
  <p>
    <p>In a project I&rsquo;m contributing to, I saw some code like this (simplified but boiling down to):</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="k">public</span> <span class="k">static</span> <span class="kt">string</span> <span class="n">ConfigValue</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">get</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">System</span><span class="p">.</span><span class="n">Configuration</span><span class="p">.</span><span class="n">ConfigurationManager</span><span class="p">.</span><span class="n">AppSettings</span><span class="p">[</span><span class="s">&quot;ConfigValue&quot;</span><span class="p">];</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>Is there anything wrong with this? It&rsquo;s a static read-only property. That seems pretty reasonable!</p>




<h3>Storage matters</h3>




<p>The issue that I saw was that there&rsquo;s no real reason to do this. You could do this just as easily:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="k">public</span> <span class="k">static</span> <span class="k">readonly</span> <span class="kt">string</span> <span class="n">ConfigValue</span> <span class="p">=</span>
</span><span class='line'>     <span class="n">System</span><span class="p">.</span><span class="n">Configuration</span><span class="p">.</span><span class="n">ConfigurationManager</span><span class="p">.</span><span class="n">AppSettings</span><span class="p">[</span><span class="s">&quot;ConfigValue&quot;</span><span class="p">];</span>
</span></code></pre></td></tr></table></div></figure></p>

<p><em>So, who cares? It looks the same to me!</em> As far as I can tell, you should care, even a little bit. Check this out:</p>




<p><img src="/blog/images/34.png" alt="Perf Timer" /></p>




<p>Notice anything? The <code>static readonly</code> field is far and away faster than any other approach (400 <em>nanoseconds</em>). The other three approaches are pretty similar, ranging from 95ms to 104ms. I&rsquo;ll do the math for you:</p>




<blockquote><p><strong>A <code>static readonly</code> field is upwards of 200x faster</strong> than the equivalent property implementation.</p></blockquote>




<p>The reason is simple: <code>get/set</code> are translated into methods by the compiler. A field is simply a field. Any property will incur some penalty for wrapping methods, so a field will always be faster! I use properties all the time but sometimes it might make sense to forgo a property in favor of a field.</p>




<h3>The test case</h3>




<p>Will you ever notice differences this small? I doubt it (the test was 100000 iterations). I did this for a learning experiment and for future reference. <strike>However, reading a config file is I/O at its core. To me, that says you should care about minimizing possible calls to the disk. Under a substantial load test, perhaps this would incur a visible penalty to page load time depending on how many calls you had to your settings wrapper.</strike> (<strong>Update:</strong> One of my colleagues pointed out that app config is probably loaded on start-up, so there shouldn&rsquo;t any disk I/O happening.)</p>




<p><strong>Performance matters</strong> but this is probably so picky that you really don&rsquo;t ever need to worry about it. As my co-worker said to me after reading this:</p>




<blockquote><p>&ldquo;A single call to a suboptimal EF/NHibernate/SQL query is far more damaging than 100,000 calls to these simple properties/fields. If a query took 1 second it would be roughly equivalent to 1,000,000 calls to the most inefficient property implementation. I would say spend your time where you get the biggest bang for your buck.&rdquo;</p></blockquote>




<p>Couldn&rsquo;t have said it better myself! If you&rsquo;re doing perf testing, make changes where it matters. This is only a microscopic change compared to some that would make more of a difference (such as how you handle <code>Regex</code>).</p>




<p>Here&rsquo;s the test case. I am not entirely positive if there&rsquo;s unseen overhead but the other three examples are common things I&rsquo;ve seen or even done in regards to this type of pattern:</p>




<script src="https://gist.github.com/1302236.js?file=PerfTestCaseBackingMethods.cs"></script>




<p>Let me know if I made a mistake in the test case that&rsquo;s skewing results and I&rsquo;ll fix it.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2011-10-21T01:33:09+00:00" pubdate data-updated="true">Oct 21<span>st</span>, 2011</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/21/integrated-disqus-comment-system-into-kamranicus">Integrated Disqus Comment System Into Kamranicus</a></h2>
  
  <p>
    <p>When I wrote Kamranicus, I wanted a simple blog where I could use Markdown and copy/paste images. I achieved that but I also built a simple comment system.</p>




<p>While fun and a good exercise in using OpenID, I should have thought to check if there is any universal comment system available. There is. It&rsquo;s called <a href="http://disqus.com">Disqus</a>. Unfortunately, I discovered it after I made Kamranicus.</p>




<p>As you can see now, Disqus is now the comment backend for Kamranicus&#8217; posts. Now I can allow anyone to comment using whatever provider they want, moderate comments, have comment threads, trackbacks, and loads of other useful features.</p>




<p>It was easy to integrate. Check it out if you are in the same situation as me.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2011-10-07T19:41:16+00:00" pubdate data-updated="true">Oct 7<span>th</span>, 2011</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/20/some-thoughts-on-the-new-mileage-stats-net-sample">Some Thoughts on the New Mileage Stats .NET Sample Application</a></h2>
  
  <p>
    <p>I&rsquo;m [still] reading through the docs on the new Mileage Stats application that was just released by Microsoft. It looks pretty cool! A little more real-world than typical sample applications.</p>




<h3>But I have some questions&hellip;</h3>




<p>No application design is perfect but as I read some of this documentation, I am wondering about a couple things. <strong>I haven&rsquo;t finished reading all of the docs yet,</strong> so these are just some random thoughts:</p>




<h4>BackboneJS</h4>




<p>It seems like for a sample MVC application that needs to support progressive enhancement and work in JS/non-JS environments, <a href="http://backbonejs.com/">BackboneJS</a> would be a suitable alternative to the jQuery UI widget + jQuery BBQ implementation they are using.</p>




<p><strong>Update</strong>:</p>




<p>Hah, further down the same Readme page I was looking at, they mentioned BackboneJS or Knockout as alternative considerations:</p>




<blockquote><p>A design the Project Silk team is interested in investigating in the future involves the use of jQuery UI Widgets that can be data bound within an MVVM implementation such as Knockout.js.</p></blockquote>




<p>I wonder why they didn&rsquo;t want to do that for the sample itself? From the reading, it sounds like it was because they wanted to minimize external dependencies. Perhaps it could also be seen as an official endorsement of whatever library they could have chosen (even though they explicitly state for jqPlot that it shouldn&rsquo;t be taken as an &ldquo;official&rdquo; recommendation).</p>




<h4>AmplifyJS</h4>




<p>Client side data manager is a big emphasis in this application. It says in the Readme that:</p>




<blockquote><p>&ldquo;Data is cached in a JavaScript object, rather than using HTML5 local storage or similar APIs, in order to meet the cross-browser requirements of the application.&rdquo;</p></blockquote>




<p>Hmm, well, won&rsquo;t <a href="http://amplifyjs.com">AmplifyJs</a> cover data management needs then? It supports all browsers and <a href="http://amplifyjs.com/api/store/">unifies the storage mechanism APIs</a>. It <a href="http://amplifyjs.com/api/pubsub/">does some pub/sub stuff</a> for you as well. In old browsers, a non-standard way will be used to store data but on modern browsers, localStorage and sessionStorage will be used.</p>




<p>I wonder if the team took a look&mdash;and if they did, what they thought of it. From the surface, it looks like it would be better than rolling your own storage and pub/sub routines.</p>




<h3>That&rsquo;s all for now</h3>




<p>Like I said, I&rsquo;m still reading/learning it. I&rsquo;ll update this as I read more.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2011-09-20T23:35:42+00:00" pubdate data-updated="true">Sep 20<span>th</span>, 2011</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/19/immersive-ui-in-rpgs-thoughts-concerns-et-al">Immersive UI in RPGs - Thoughts, Concerns, Et Al.</a></h2>
  
  <p>
    <p>If you don&rsquo;t know, I&rsquo;m a pretty avid fan of video games. Actually, &ldquo;avid&rdquo; is probably an understatement. Video games are a passion of mine, not only for pleasure but also in terms of software development. I&rsquo;ve tried my hand at game programming, even some modeling. I don&rsquo;t think I&rsquo;m cut out for it. That said, I think there are still things I can comment on from a user experience perspective. Games are just software. Virtual worlds, sure, but underneath they are still running on 1&rsquo;s and 0&rsquo;s and made with programming languages and frameworks. Therefore, it follows that as pieces of software, they still must rely on common usability and user experience practices, especially if they display UI (as most do).</p>




<h3>RPGs and UI</h3>




<p>I&rsquo;m going to talk about an upcoming RPG, <a href="http://elderscrolls.com">The Elder Scrolls V: Skyrim</a>, since it represents RPGs pretty well in that they are some of the most UI-intensive of all games. I&rsquo;m also going to talk about it because I&rsquo;m insanely excited for it and I want to talk about immersion; Bethesda RPGs are mainly about immersive worlds. Dialog, questing, inventory management, spell management, looting, skill trees, equipment, maps, etc. Lots of UI for displaying information to the user. In an RPG, usually (every time?) you are on an epic quest. As a user (player), I don&rsquo;t want to think too much about managing all this information, I want to go on quests and use bigger swords and badder spells. Still, I&rsquo;m going to have to use the UI no matter what. I have to talk to people. I have to store my big swords. I have to learn spells. I have to navigate the world.</p>




<p>As I look at screenshots and watch gameplay demos of Skyrim, it got me thinking about their UI decisions and RPG UIs in general. If your goal is to create an immersive world, how come you don&rsquo;t also create immersive UIs? Shouldn&rsquo;t you be trying your darndest to get rid of the dialog- and window-based UI of &ldquo;regular&rdquo; software? Or at the very least, to fit your UI into the story or context of the game? It&rsquo;s an interesting idea to think about&mdash;how do you decide what will be immersive and what will be a typical dialog/window-based UI?</p>




<h3>Elder Scrolls vs. Fallout</h3>




<p><img src="/blog/images/18.png" alt="Pipboy 3000" /></p>




<p>When I look at Fallout 3, it strikes me as genius how well they were able to keep the immersion with the &ldquo;menu&rdquo; by using the Pipboy. Not only did it perfectly fit into the storyline but it also made total sense in the context of the game. Here you are, a quaint vault dweller, and the PipBoy is given to you at age 10 like every other resident. As an NPC chides, &ldquo;It&rsquo;ll be your best friend.&rdquo; It fits perfectly and is a natural way to introduce a way to get at all the information you&rsquo;d need in a futuristic, post-apocalyptic RPG. Not only that, but it was also usable. A couple clicks would bring you to the maps, one more, equipment, etc. It is the perfect example of an immersive, usable game UI.</p>




<p>I can&rsquo;t recall a fantasy RPG that was successfully able to use an immersive, believable, and usable menu system like Fallout 3. Fable III tried hard to break the bonds of windows and menus by letting you transport to a &ldquo;safe house&rdquo; of sorts. I guess that&rsquo;s close to what I&rsquo;m talking about and it was serviceable; I was able to play the game to completion without pulling most of my hair out, but it was still cumbersome to be transported to a &ldquo;virtual menu system&rdquo; and go around to find and do things like check the map, equip weapons, etc. It fit the bill of being believable and not pulling you out of the game but I would argue it was not efficient in terms of getting things done quickly. It also got old hearing John Cleese say the same quip every time you needed to check your map.</p>




<p>So, this leaves me wondering: <strong>how can a fantasy RPG like Elder Scrolls achieve a similar immersive menu UI like Fallout 3 that is believeable, efficient, and immersive?</strong> Here are some of my thoughts.</p>




<h3>Managing Skills</h3>




<p>In an RPG, you typically play a lonesome hero or hero leader that has a set of skills and powers they can use. Some are passive (as in Elder Scrolls) and others can be used like items (Titan Quest, Diablo, MMOs, etc.).</p>




<p>In most games, viewing your skills usually involves opening a dialog with a large tree of skills where you can invest points in acquiring or leveling up skills. There are many variations on this core design.</p>




<p><img src="/blog/images/24.png" alt="Star Wars: The Old Republic" /></p>




<p>In Fallout, when you level up you&rsquo;re presented with a dialog where you can pick your &ldquo;perk&rdquo; and invest skill points. Here, the game diverges from an immersive UI and falls back on a regular dialog box UI. As a player, this never bothered me and I think is a good example of where a choice was made to use a familiar UI that, while immersion-breaking, made it easy to use.</p>




<p>In Skyrim, I think they did a good job making this experience immersive and fitting it into the world story. Instead of opening a special menu, your character &ldquo;looks to the heavens&rdquo;. There, you can view constellations that correspond to specific skill trees. When you view a constellation, you can see each star, which is associated with a skill. It&rsquo;s exactly what I&rsquo;m getting at: believable, immersive, and usable.</p>




<p><img src="/blog/images/25.png" alt="Skyrim skill system" /></p>




<p>As far as leveling up in Skyrim, I don&rsquo;t think we&rsquo;ve seen what that looks like. I&rsquo;d imagine something similar will happen where you can &ldquo;look to the sky&rdquo; and there you&rsquo;ll be presented with some choices of what to do.</p>




<h3>Managing Inventory</h3>




<p>In Harry Potter, the inventory question has already been solved. If you&rsquo;ve read the books or seen the movies, you know Hermione carries around a bottomless purse which contains everything she needs, from textbooks to tents. It&rsquo;s believable in a magic world, so why shouldn&rsquo;t a game like Elder Scrolls implement something similar?</p>




<p>I would imagine an animation where your character pulls out a sack from his waist and peers down into it after which you&rsquo;re presented with some sort of UI. Here, you could present a regular table/list-based UI or even 3D visuals of your items.</p>




<h3>Magic &amp; Spells</h3>




<p>What immediately jumps to mind is a spellbook your character carries around. You could base the UI off of an open spellbook interface. Many other games do this to good effect. This example is from King&rsquo;s Bounty (which I haven&rsquo;t played so I can&rsquo;t speak to its usability):</p>




<p><img src="/blog/images/26.png" alt="King's Bounty" /></p>




<h3>Quests</h3>




<p><img src="/blog/images/19.png" alt="Quest Journal" /></p>




<p>In The Elder Scrolls III: Morrowind, your quests and conversations were recorded in a Journal. While it was sometimes difficult to use, it is still a great idea and other games have played off a quest journal type interface.</p>




<p>In Skyrim, I do not think we&rsquo;ve seen how quests are managed. Interestingly, I did notice that once your character reached a certain point in the cave in one of the recent demos, a message displayed saying, &ldquo;Quest Started: xxx&rdquo; telling me that either you overheard a new quest or an active quest can be triggered by going to some special area. You can also cast a spell called &ldquo;Clairvoyant&rdquo; to do a Fable-style glowing trail to your closest objective.</p>




<h3>Map</h3>




<p>In many RPGs with HUDs, a mini-map is displayed in the corner. In Bethesda RPGs, you&rsquo;ve always had to enter a menu to pull up a map (world or local). In Skyrim they&rsquo;ve focused on using as little screen real estate as possible for the HUD which is <em>awesome</em> and in Bethesda&rsquo;s games I haven&rsquo;t ever really felt the need for a minimap (personally) although I liked how in Morrowind you could choose to have one if you wanted.</p>




<p><img src="/blog/images/28.png" alt="Dragon Age: Origins Minimap" /></p>




<p>In Skyrim, when you open the map, the camera quickly zooms out and gives you a bird&rsquo;s eye view of the landscape, in fully rendered 3D. It&rsquo;s quite a sight. The only thing that stops it from meeting all of our criteria is that it isn&rsquo;t believable (How can you see that far? Are you a bird? Did you cast a spell? Are you God?).</p>




<p><img src="/blog/images/27.png" alt="Skyrim's Fully 3D In-Game Map" /></p>




<p>Since this a fantasy land and as an adventurer you&rsquo;d probably carry around a map, we could merge the idea of a &ldquo;crystal ball&rdquo; with a paper/cloth map. Your character would pull out a small snowglobe-sized object and peer into it, revealing the 3D world map just as Skyrim has it implemented now. Any sort of animation involving a map or compass or globe would be a perfect combination to the new world map feature.</p>




<h3>Favorites &amp; Bookmarking</h3>




<p>In action-oriented or item-oriented RPGs, typically you can assign items to hotkeys. In Fallout 3, you could assign guns and items to numbered slots on the keyboard.</p>




<p><img src="/blog/images/29.png" alt="Dragon Age: Origins Shortcut Bar" /></p>




<p>In Skyrim, it appears it is more &ldquo;bookmark&rdquo;-based which I think is an interesting idea pulled from our daily lives: browsing the Internet. When you think about it, it makes total sense to implement a bookmark system in an RPG that can contain thousands of items.</p>




<p>The only issue is that this doesn&rsquo;t really fit into the story at all; it&rsquo;s there purely for organizational purposes. This is exactly the kind of place where a discussion of immersion vs. usability comes into play. You could provide the context of a &ldquo;belt&rdquo; and that in your belt you can take out an item in your inventory and place it there for easy access (hotkeys/shortcuts). Assuming your belt was a magical belt, it could &ldquo;favorite&rdquo; any number of items.</p>




<p><img src="/blog/images/30.png" alt="Skyrim left-hand favorites" /></p>




<p>In Skyrim, there is a single favorites menu and you equip the item in your left/right hand depending on which trigger you pull, as far as I&rsquo;ve seen. At least one preview noted that the favorites system was &ldquo;<a href="http://www.vg247.com/2011/09/27/crouching-spider-hidden-dragon-hands-on-with-skyrim/http://www.vg247.com/2011/09/27/crouching-spider-hidden-dragon-hands-on-with-skyrim/">slightly clunky</a>&rdquo;.</p>




<p>You could also just argue that your character is &ldquo;summoning&rdquo; an item from his inventory; perhaps the cue for this needs only to be a simple sound effect or animation that plays when you hit a hotkey or choose an item. If I had the ability to use magic, it would make sense that I&rsquo;d probably &ldquo;tag&rdquo; items in my bag to be available for summoning at will (or take the Harry Potter approach and say a simple spell, &ldquo;Accio Sword of Monster Slaying&rdquo;).</p>




<p>I am not sure what the best approach here is; but what is important to remember is that this feature is crucial to keeping players immersed and outside of menus, so whether it is immersive or not, it should be easy to use.</p>




<h3>Looting</h3>




<p>Every open-world RPG I&rsquo;ve played has resorted to a dialog system for one of its core systems: looting.</p>




<p>If you think about how a loot system works in terms of development, it makes sense. An object can hold either a set or random assortment of items, maybe placed on entering a dungeon or when the game starts. The easiest and most straight-forward way is to present a list of the items to the player in a popup dialog box.</p>




<p>As a player, I&rsquo;ve always been mostly satisfied with looting UI except when a game takes away the single most important shortcut of all: <strong>Take All</strong>.</p>




<p>Sometimes, even as a player, you don&rsquo;t know you want a feature until another game implements it, which is why I&rsquo;m fairly excited to see <em>Kingdoms of Amalur</em> implements a &ldquo;junk&rdquo; system where you can mark items as junk and sell them in one button press to merchants.</p>




<p><img src="/blog/images/20.png" alt="KOA Looting System" /></p>




<p>I always thought it would be neat to have an animation where you literally look inside the object you&rsquo;re looting (except maybe bodies). You open a chest, you look in, then a UI that looks like the inside of a chest shows up and you see 3D models of whatever is in it. Then you can &ldquo;take all&rdquo; or click/select the items you want. This would work great for chests, barrels, boxes, closets, etc. Not only would this not break the immersion but it would force much more realistic contents for containers. For bodies, something similar to LA Noire where you literally examine the body would be cool but also not very useful for looting quick (thus the immediate &lsquo;Take All&rsquo; button). For a body, I&rsquo;d even be happy with a view of the body with a list of the items found on the side. Then when you hover over each item, the camera could focus on where on the body it&rsquo;s located. It doesn&rsquo;t have to, if it doesn&rsquo;t make sense (people holding unusually large/small items?).</p>




<p>Here&rsquo;s a crappy wireframe of what I&rsquo;m talking about:</p>




<p><img src="http://i.imgur.com/sdNhn.png" alt="Wireframe" /></p>




<p>It always struck me as odd how Elder Scrolls, where every item has a 3D world model, couldn&rsquo;t do this. If you already have a model for every item, why <em>not</em> be creative in how you do looting? Some top-down RPGs like Diablo will let loot fall out of corpses and containers onto the ground; these games had it right and used immersive loot systems. Why couldn&rsquo;t open-world sandbox RPGs do the same, especially when items are already strewn about the world free for immediate pick up. The only RPG with a robust loot system I can think of that used in-game objects for containers was <em>Borderlands</em> where loot would magically pop out of lockers, rock piles or corpses but then again, Borderlands didn&rsquo;t have the same item scope as Elder Scrolls. Still, it&rsquo;s a place to start, isn&rsquo;t it?</p>




<p>At any rate, I think there&rsquo;s more that can be done in RPGs to achieve a more immersive loot UI. I&rsquo;m positive there&rsquo;s a lot of fun things game designers can do nowadays.</p>




<h3>Buying/Selling</h3>




<p><img src="/blog/images/32.png" alt="Well, this is intuitive..." /></p>




<p>Buying and selling items in RPGs has always been a dialog-based system, as far as I&rsquo;m aware. I understand why it&rsquo;s always been a de-facto standard that merchants carry every item they own (programming, code maintenance, item lists, etc.). The weird thing (for Bethesda games in particular) is why can&rsquo;t I buy things I see in a store? In Morrowind, a shop owner would have items strewn around the store that you could <em>steal</em> but never buy. It never made sense. I also don&rsquo;t think items disappeared when you bought them (they might have been tied to chests or the NPC themselves). Thus, there seemed to be a disconnect between what the merchant had on them and the items visible in the store. In Fallout, it made a little more sense that traveling traders carried their stock on their pack Brahmin (mules). I could see using a UI for that.</p>




<p>An interactive in-world store-front would be an awesome idea and it&rsquo;s not new. In Zelda games, you could go to a trader and see 3D models of items you could buy. In this context, that approach probably isn&rsquo;t good for RPGs that deal with dozens of items per merchant but the idea is what is important (seeing and picking items in a store).</p>




<p><img src="/blog/images/31.png" alt="Who says you can't put 50 pearls on a table?" /></p>




<p>For an open-world sandbox like Skyrim, you could simply just have the items in a store on shelves like a normal real-life store. It&rsquo;s not like it hasn&rsquo;t been possible in the past&hellip; Morrowind (above) and Oblivion both had items in the store, but like I said, you could never pick one and buy it, only steal it. Make sense? Not really. You could just extend that same design but make all items available in the store marked as &ldquo;tradable&rdquo; so you could exchange an item on the spot or buy a new item. Perhaps implement some customer service AI and have the storekeeper follow you or check on you, allowing faster access to talking to him and selling items. This would throw a wrench into stealthy stealing, though, so maybe don&rsquo;t do this (Oblivion shop owners who followed me around made me angry when I tried to break into their store/bedrooms, even though at first it was &ldquo;kind of cool&rdquo;).</p>




<p>This immersive storefront experience would not replace the existing efficiency (or proposed efficiency) of current designs of talking to merchants and entering a trade UI. For people that need to just get in and get out, every store could post a piece of paper tacked onto the door or counter that lists everything they sell. This would be the typical buy/sell UI. For selling, you&rsquo;d talk to the merchant, tell him you want to sell, and enter this familiar UI, but at least it would be explained in the world.</p>




<p>The most recent game I played that used a believable immersive trading UI is <em>Deus Ex: Human Revolution</em>:</p>




<p><img src="/blog/images/33.png" alt="alternate title" /></p>




<p>Merchants would be standing next to a computer. You talk to the merchant and he directs you to the monitor where you use a faux-OS UI to buy and sell. It was immersive, believable (except you had no idea where the items were stored), and usable (there were some quirks like not being able to use the WASD keys to navigate). In a fantasy game, that computer is probably a (magical?) piece of paper. Maybe there&rsquo;s something even more magical/fantastical that would make better sense.</p>




<p>At the least, Bethesda, do what you&rsquo;re doing right now, just <em>let me buy items in the world too instead of only allowing me to steal them</em>. You&rsquo;re going to let me buy the item when I talk to a merchant, why make me go through that UI navigation process if I am literally staring at the item I want? Yes, there are people that buy things rather than steal them every time. Yes, there are people would swear they&rsquo;ve never bought an honest item in their adventure. Cater to both audiences equally efficiently.</p>




<p><strong>Note:</strong> Since Skyrim is yet to be released, I have not seen or heard how merchants work in the game. Perhaps they&rsquo;ve already done this! I&rsquo;m referencing Oblivion and Morrowind where the technology was there, just not implemented.</p>




<h3>Talking to people</h3>




<p>Dialog is always hard because you need to offer the player a list of responses or topics. I think what they are doing in Skyrim is pretty streamlined and concise, not forcing you to listen but showing topics on the side, out of the way. I can&rsquo;t think of a fully-immersive way of presenting textual choices, it seems like it&rsquo;ll break the immersion every time but at least Skyrim is less intrusive than Oblivion/Morrowind/Fallout.</p>




<p>As a player, conversation systems have never bothered me much and actually, Dragon Age: Origins and Mass Effect (i.e. Bioware RPGs) have always felt like the best systems I&rsquo;ve used as they are cinematic, enjoyable, and felt like they belonged there.</p>




<p>In terms of usability, the best feature I&rsquo;ve seen is in Bioware conversations: they will show (in text) the last thing someone said to you. This is so important I can&rsquo;t even properly express it. It reminds me of what David Sirlin talks about in <a href="http://www.gamasutra.com/view/feature/1935/saving_the_day_save_systems_in_.php">his piece of about save systems in games</a>:</p>




<blockquote><p>&ldquo;Games are not for game designers and their ivory-tower ideals&mdash;games are for players. Players have lives outside of our games and we should respect those lives and design our games accordingly, rather than expect our players to design their lives around us.&rdquo; &ndash; David Sirlin</p></blockquote>




<p>I liked this quote because I keep it in mind even when I suggest outlandish ideas like a virtual storefront. In the end, players just want to easily get things done.</p>




<h3>Other UX considerations</h3>




<h4>Timing and animations</h4>




<p>I should clarify: when I talk about animations (for inventory or maps or whatever) I am talking about animations 1-3 seconds long. Anything longer and you&rsquo;re going to run into &ldquo;OMG JUST LET ME DO THIS QUICK&rdquo; territory and then your beautiful menu system is going to seem clunky and slow (<strong>cough</strong>FableIII<strong>cough</strong>). The Fallout 3 Pipboy animation was perfect: it was fast, you could follow it, you knew what just happened, and it made sense. We live in a world where web pages need to come up in less than 100ms and we can&rsquo;t wait those extra 5 seconds for our download to finish. Keep it short, simple, and believable. You could also use animations to mask processing time; if it takes 100-300ms to load up a player&rsquo;s inventory, an animation would hide that CPU time. I&rsquo;ve never programmed a game in my life but on the web, for AJAX requests showing the loading animation even for quick calls is crucial for immediate feedback.</p>




<p>Timing should be one of&mdash;if not the&mdash;highest priorities when designing a usable menu system. Ultimately, people want to get things done in your game. That&rsquo;s why you saw me say again and again for storefronts, let power users use the inventory list to buy/sell quickly. It doesn&rsquo;t <em>have</em> to be totally immersion-breaking. For those of us who sometimes enjoy strolling through a vendor&rsquo;s inventory visually, we can do that. Efficiency is the name of the game (that&rsquo;s why God invented the <em>Take All</em> command).</p>




<p>I don&rsquo;t think timing and immersive UI are mutually exclusive. Pipboy is my case in point. Borderlands looting is another case. Game designers are by their nature creative people. Use that creativity to prove that you can make an immersive UI without sacrificing efficiency.</p>




<h4>Providing critical information at a glance</h4>




<p>One thing I noticed about the menu system in Skyrim that I&rsquo;m not super-enthused about is the lack of critical information without &ldquo;hovering&rdquo; or selecting an item (as seen here):</p>




<p><img src="/blog/images/21.png" alt="Skyrim Inventory" /></p>




<p>One thing I liked about Oblivion was that they showed some critical information in a table format&hellip; so I could sort by damage or weight or see at a glance what the armor rating was for items I held. In Morrowind, you had to do a similar hovering to see stats.</p>




<p><img src="/blog/images/22.png" alt="Oblivion Inventory" /></p>




<p>I could see the UI discussion both ways. When I want to equip an item, I don&rsquo;t care about all that other information. However, when I want to sell an item or see if the new item I picked up is any good, I <strong>do</strong> care about that information. The lack of information in the new UI is both a good thing (clean) and bad thing (lack of information at a glance). I don&rsquo;t know what to think of it yet as I haven&rsquo;t used it but it could turn out OK given some tools to effectively manage my inventory. I&rsquo;d also like to believe that the console UI is simpler than the usually-more-heavy PC UI.</p>




<h4>Providing quick comparisons</h4>




<p>The other thing I didn&rsquo;t see (I think) was a quick compare type UI/popup. Bethesda RPGs have never done this. It boggles my mind. If I find an item in the world, I would immediately like to see if it&rsquo;s better than my current equipped weapons (preferably by simply hovering over it or inside of a loot UI, selecting it). If I am browsing my inventory, I&rsquo;d like to see an immediate comparison to my equipped weapons. One of the best games that did this was Borderlands and is how I&rsquo;d love to see it in an Elder Scrolls game; as soon as you found an item it was easily apparent what was better/worse about it:</p>




<p><img src="/blog/images/23.png" alt="Borderlands Looting" /></p>




<h4>Remote trading</h4>




<p>I don&rsquo;t know if this is a good idea. But&hellip; stay with me. In Torchlight, while you are out adventuring, you can send your pet (who doubles as a pack mule) back to town to sell whatever he&rsquo;s carrying. No bartering, no nonsense, he comes back in a certain time depending on how much you sold. It&rsquo;s genius, I think. How many times have you been stuck in a dungeon, with a fricking sweet axe in front of you, put it in your inventory and&hellip; now you can&rsquo;t move (or in newer Bethesda games, move at 1in/hr). The very dedicated among us might endure the 5 mile long walk moving at the speed of a snail but why should we? In Torchlight you had a pet with a backpack. It totally makes sense to say to Rufus, &ldquo;Hey boy, take my crap back so I can carry more. There&rsquo;s a good dog.&rdquo; In a lone-wolf type game like Elder Scrolls it might make more sense to magically send items to a merchant or&hellip; <em>just open a portal</em>. Hey, you could teleport in Morrowind, it&rsquo;s not a new idea. In Diablo/Torchlight you can open a town portal. That solves the issue, albeit you still have to walk to the merchant, enter the UI, trade, etc. Extend that a bit and you have the ability to remotely buy (or simply sell) items on the spot. Game balance, difficulty, etc. should all be considered in a feature like this but <em>Oh God Wouldn&rsquo;t This Be Useful</em>?</p>




<p>I could see some arguments saying that this would make inventory management too easy. Maybe&hellip; but isn&rsquo;t that what you want? You <em>can&rsquo;t</em> tell me you haven&rsquo;t cursed the weight system in Elder Scrolls. I hate to break it to you but now that we&rsquo;ve got fast travel, what&rsquo;s a little town portal added to the mix? In Morrowind, one of the first things I do is enchant two amulets: one with Divine Intervention and one with Almsivi Intervention. I pay <em>cash monies</em> to do it straight away because it makes my life so much easier. I can teleport pretty close to town no matter where I am.</p>




<p>Anyway, I doubt you&rsquo;d use this system to just sell your awesome items all the time&hellip; you probably want to hang them up in your modded Dracula castle display cases (like me). You probably don&rsquo;t need all those shiny treasures you&rsquo;re carrying, taking up precious space, that you&rsquo;re just going to sell for cash. You want to carry good stuff that you need for a quest or side project (crafting?). I think this would just make it easier to get rid of stuff you don&rsquo;t need fast and easy.</p>




<p>With new systems like fast travel, this is less of an issue until you&rsquo;re deep inside a dungeon and forgot to empty your rucksack before your curiosity got the better of you and you just <em>had</em> to enter that underwater cave&hellip;</p>




<h3>Closing thoughts</h3>




<p><strong>I&rsquo;m not saying Skyrim&rsquo;s UI is bad or is wrong</strong>. But as someone who continuously works on building better user experiences at work and at home, I always look at my projects and go, &ldquo;Man, I could really do this and this and this to make it even easier.&rdquo; That&rsquo;s all I want to do with this&mdash;point out, as an outsider and future player&mdash;what concerns and thoughts I had regarding what I&rsquo;ve seen so far.</p>




<p>I&rsquo;m just wondering why designers/developers don&rsquo;t try harder to make their UIs more immersive and &ldquo;make sense&rdquo; within the context of their game. I <em>know</em> it&rsquo;s possible, I&rsquo;ve seen it with my own two eyes. I keep referencing Fallout 3, but it&rsquo;s because I was amazed at how well it all just made sense. Pipboy? Sure why not! Sure, dialog/buying/selling went through typical dialog windows but at least they all matched. Even there you could do similar things to what I was saying, maybe with an interactive storefront. Borderlands is a great example of immersive looting, as well as many top-down RPGs.</p>




<p>I also want to be clear and say that while I think having an immersive UI is best, <strong>it&rsquo;s also important to let people just get things done.</strong> What I mean is, have the sweet &amp; snazzy immersive visual storefront with items laying around to buy, but cater to the power users and keep the quick buy/trade UI. See Windows 8 Metro UI v. classic Windows 7 UI.</p>




<p>I also think you can go too far and just make things clunky and unintuitive. It&rsquo;s a line that&rsquo;s hard to see, I think, and since it&rsquo;s a game and a piece of software, it doesn&rsquo;t all have to be &ldquo;realistic&rdquo; and immersive. If it works and is easy to use, that&rsquo;s probably good enough. Going the extra mile to include visual detail is definitely a win in my book, though. What matters in the end is that the player is happy to use your menu system and doesn&rsquo;t curse it until the day they die.</p>




<p>I&rsquo;m interested in hearing other people&rsquo;s suggestions; after all, we&rsquo;re the ones that play the games to death. I&rsquo;m just really surprised Bethesda went with a sort of &ldquo;contemporary&rdquo; (Apple-like) UI rather than an immersive one like F3 or even a stylized one found in Blizzard games. It&rsquo;s also important to remember that what we&rsquo;ve seen so far of Skyrim has been on 360 not on PC and Bethesda could have done UX optimizations for the mouse rather than the controller-oriented design we&rsquo;ve seen so far.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2011-09-15T05:56:52+00:00" pubdate data-updated="true">Sep 15<span>th</span>, 2011</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/16/i-love-github-so-much-im-a-paying-member-now">I Love GitHub So Much, I&#8217;m a Paying Member Now</a></h2>
  
  <p>
    <p>As you might know, I released <a href="/Blog/Posts/15/announcing-keep-track-of-my-games">a new site, Keep Track of My Games</a> a couple days ago.</p>




<p>I started out with a remote Git repository on AppHarbor, then switched to <a href="http://bitbucket.org">BitBucket</a> because it supported free private repositories.</p>




<p>BitBucket is really nice but after trying to use the Issues list I really missed GitHub&rsquo;s clean issues &amp; milestones management. Really, really missed it.</p>




<p><img src="/blog/images/17.png" alt="BitBucket issues" /></p>




<p>BitBucket&rsquo;s issues list is table-based and displays issue titles in a column. That column gets really small when you have a lot of issues, making it hard to read. I started out typing user stories as the titles but when I went to GH, I made them shorter, task-oriented titles and put the stories inside of them. I think this helps clean up the UI a bit:</p>




<p><img src="/blog/images/15.png" alt="Issues List" /></p>




<p>Much easier to read and browse and filter issues, in my opinion. I have a system where items I work on are assigned to me, the rest are considered &ldquo;future&rdquo; items. I also have a couple milestones set up to track progress. I create labels for major components of the site and then can assign multiple ones to issues.</p>




<p>I will be updating my <a href="http://keeptrackofmygames.com/roadmap">Roadmap</a> to use GH&rsquo;s REST service and query the issues to display. The nice thing about labels is that I will be able to filter out issues that shouldn&rsquo;t be very public (i.e. security tasks?).</p>




<p><img src="/blog/images/16.png" alt="Milestones" /></p>




<p>Beautiful.</p>




<p>So I bit the bullet and said what the hell? and signed up for a micro plan. I feel pretty good about it. I love GitHub, it&rsquo;s no secret (case in point, this site). It makes me feel good to support them and show them some well-deserved love. I hope my small contribution helps them keep a clean site and awesome user experience.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2011-07-26T19:41:02+00:00" pubdate data-updated="true">Jul 26<span>th</span>, 2011</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/15/announcing-keep-track-of-my-games">Announcing Keep Track of My Games</a></h2>
  
  <p>
    <p>I am working on a new side project, <a href="http://keeptrackofmygames.com/about">Keep Track of My Games</a>.</p>




<p><img src="/blog/images/10.png" alt="Yes." /></p>




<h3>The Rundown</h3>




<p>The goal is simple: <strong>Manage your collection of games and track games that haven&rsquo;t been released.</strong></p>




<p>You can read the tour on my <a href="http://blog.keeptrackofmygames.com/post/8003937025/what-is-keep-track-of-my-games">introduction blog post</a>.</p>




<p>I&rsquo;ve setup several social outlets:</p>




<ul>
<li><a href="http://twitter.com/keeptrackgames">@keeptrackgames</a></li>
<li><a href="http://blog.keeptrackofmygames.com/">Blog</a></li>
<li><a href="http://getsatisfaction.com/keeptrack">GetSatisfaction</a></li>
</ul>




<p>I&rsquo;m also providing a public look into my development cycle via the <a href="http://keeptrackofmygames.com/roadmap">Roadmap</a> page.</p>




<h3>The Technology</h3>




<p>I am using MVC 3 with EF 4.1 and SQL Server 2008 deployed via Mercurial, BitBucket, and AppHarbor. I am using the JSON API from <a href="http://api.giantbomb.com">GiantBomb</a> to fetch search results than caching them locally to the database. I&rsquo;m not super enthused with the performance but hopefully I can make it better in the coming weeks.</p>




<p>I use <a href="http://twilio.com">Twilio</a> for SMS and for now, regular old SMTP for emails but I may upgrade depending on load. I use a &ldquo;scheduled&rdquo; job that runs through the database and figures out if games are coming out soon or are released or if their release dates have changed.</p>




<h3>The Architecture</h3>




<p>I have a pretty straightforward and simple architecture: everything goes through application services that do not have any web dependency.</p>




<p><img src="/blog/images/11.png" alt="Layer Diagram" /></p>




<p>My controllers are pretty stupid; they ask the services for information and process the results:</p>




<p><img src="/blog/images/12.png" alt="Adding item to library" /></p>




<p>The key is my <code>ActionConfirmation</code> class which I borrowed from my co-worker. I thought it was awesome for Service => Controller communication. The reason being I can pass error messages / validation results cleanly.</p>




<p>For example, in this action, if an error occurred when saving tracking settings, I need to go and get the current tracking settings to add some view-specific logic (like, whether or not to show the email/phone checkboxes):</p>




<p><img src="/blog/images/13.png" alt="Saving tracking settings" /></p>




<p>The <code>currentTracking</code> is of type <code>ActionConfirmation&lt;TrackingViewModel&gt;</code>. So, if a service call was successful, I can retrieve the result via <code>currentTracking.Value</code>. I also use a non-generic <code>ActionConfirmation</code> class that doesn&rsquo;t require any return value.</p>




<p>Here&rsquo;s an example of the service code returning <code>ActionConfirmation</code>s:</p>




<p><img src="/blog/images/14.png" alt="ActionConfirmation results" /></p>




<p>I am not 100% OK with this because for complex business validation, the results are coming back one at a time. I will be refactoring later to avoid this.</p>




<h3>The &ldquo;Open&rdquo; Source Agenda</h3>




<p>I have been playing around with making this source code public. Only a few things prevent me from doing so:</p>




<ol>
<li>I need a way to hide secret tokens for APIs and my passwords for some services.</li>
<li>If people know the code, they&rsquo;ll see all the security holes and it&rsquo;s possible someone could exploit them and steal my user&rsquo;s data (not cool).</li>
</ol>




<p>Really item #2 is the big decider. I am using OpenID and DotNetOpenAuth but that doesn&rsquo;t mean the site is totally secure. The worst information that could be obtained is someone&rsquo;s email and phone number, both of which I plan to encrypt for extra safety (once I figure out how that works with EF).</p>




<p>I am thinking instead of totally making it open source, to allow select contributors I trust into the codebase for reviews and patches.</p>




<p>If you would be interested in doing that, I have a tester system setup so <a href="http://twitter.com/kamranayub">let me know</a> and we&rsquo;ll talk.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2011-07-24T22:44:08+00:00" pubdate data-updated="true">Jul 24<span>th</span>, 2011</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/14/resolving-http-500-errors-when-deploying-to-apphar">Resolving HTTP 500 Errors When Deploying to AppHarbor</a></h2>
  
  <p>
    <p>This is a quick post. I was getting HTTP 500 errors when deploying my new site to AppHarbor. Long story short, if you&rsquo;ve brought down the DotNetAuth Nuget package, it adds this to your <code>web.config</code>:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;section</span> <span class="na">name=</span><span class="s">&quot;uri&quot;</span> <span class="na">type=</span><span class="s">&quot;System.Configuration.UriSection, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&quot;</span> <span class="nt">/&gt;</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>AppHarbor already has this defined and it is throwing a duplicate web.config section exception. Remove this line and you should be A-OK!</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2011-07-22T03:31:40+00:00" pubdate data-updated="true">Jul 22<span>nd</span>, 2011</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/13/my-git-workflow-for-net-based-projects">My Git Workflow for .NET-based Projects</a></h2>
  
  <p>
    <p>When I was new to Git, it was very confusing for me to get up and running with how to deal with the command-line interface (if you&rsquo;re fancy and use a GUI, leave now). Once you do get the hang of it, it&rsquo;s super nice and fluid. I used to do terminal CVS at my last job so I&rsquo;m not out of touch with using version control from a console.</p>




<h1>Set up your .gitignore</h1>




<p>Here&rsquo;s mine:</p>


<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#OS junk files
</span><span class='line'>[Tt]humbs.db
</span><span class='line'><em>.DS_Store
</span><span class='line'>
</span><span class='line'>#Visual Studio files
</span><span class='line'></em>.[Oo]bj
</span><span class='line'><em>.exe
</span><span class='line'></em>.pdb
</span><span class='line'><em>.user
</span><span class='line'></em>.aps
</span><span class='line'><em>.pch
</span><span class='line'></em>.vspscc
</span><span class='line'><em>.vssscc
</span><span class='line'></em><em>i.c
</span><span class='line'>*</em>p.c
</span><span class='line'><em>.ncb
</span><span class='line'></em>.suo
</span><span class='line'><em>.tlb
</span><span class='line'></em>.tlh
</span><span class='line'><em>.bak
</span><span class='line'></em>.[Cc]ache
</span><span class='line'><em>.ilk
</span><span class='line'></em>.log
</span><span class='line'><em>.lib
</span><span class='line'></em>.sbr
</span><span class='line'><em>.sdf
</span><span class='line'></em>.docstates
</span><span class='line'>ipch/
</span><span class='line'>obj/
</span><span class='line'>[Bb]in
</span><span class='line'>[Dd]ebug<em>/
</span><span class='line'>[Rr]elease</em>/
</span><span class='line'>[Pp]ublish<em>/
</span><span class='line'>Ankh.NoLoad
</span><span class='line'>
</span><span class='line'>#Tooling
</span><span class='line'>_ReSharper</em>/
</span><span class='line'><em>.resharper
</span><span class='line'>[Tt]est[Rr]esult</em>
</span><span class='line'>
</span><span class='line'>#Project files
</span><span class='line'>[Bb]uild/
</span><span class='line'>
</span><span class='line'>#Subversion files
</span><span class='line'>.svn
</span><span class='line'>
</span><span class='line'># Office Temp Files
</span><span class='line'>~$<em>
</span><span class='line'>
</span><span class='line'># Custom
</span><span class='line'></em>.private
</span><span class='line'>readme.html</span></code></pre></td></tr></table></div></figure></p>

<p>At the end, you can add whatever you want. For some projects, I store API keys in a <code>.private</code> file. You might want to as well.</p>




<h1>Init your repo</h1>




<p>The first command you&rsquo;ll need to execute is <code>git init</code>. This will make whatever folder you&rsquo;re in a new Git repository (repo).</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>Kamran@Kamranicus /c/Projects/Contrib/.JSON
</span><span class='line'><span class="nv">$ </span>git init
</span></code></pre></td></tr></table></div></figure></p>

<p>You should then add all your files and commit them for an initial &ldquo;base&rdquo; version.</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>git add .
</span><span class='line'>git commit -am <span class="s2">&quot;Initial project commit&quot;</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>Because of your <code>.gitignore</code> file, Git will ignore all the unnecessary files .NET solutions tend to generate.</p>




<h1>Set up a remote</h1>




<p>If you&rsquo;re doing stuff on AppHarbor or GitHub, you&rsquo;ll need to add a &ldquo;remote.&rdquo; This is just a remote Git repository you can associate with your local repository. You can have lots of remotes. I tend to have one or two.</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>git remote add <a href="https://kamranayub@github.com/&amp;lt;some">https://kamranayub@github.com/&amp;lt;some</a> url&gt;
</span></code></pre></td></tr></table></div></figure></p>

<p>This information is usually provided by your remote site (GitHub has it when you create a new repo on the site).</p>




<h1>Status, Add, Commit, Push</h1>




<p>I do a lot of my projects on <a href="http://appharbor.com">AppHarbor</a> now. It&rsquo;s just a real nice workflow and I&rsquo;ll explain why.</p>




<p>I make changes to my .NET solution and when I&rsquo;m ready to commit (usually after a feature or bug fix) my console  command history looks like this:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>git status
</span><span class='line'>git add .
</span><span class='line'>git commit -am <span class="s2">&quot;My commit message&quot;</span>
</span><span class='line'>git push appharbor master
</span></code></pre></td></tr></table></div></figure></p>

<h2>git status</h2>




<p>This command will display what things you currently have pending and what changes are untracked. Use this to determine if you should not track a certain change (using <code>git checkout -- &lt;file&gt;</code>).</p>




<h2>git add .</h2>




<p>This command will add whatever &ldquo;untracked&rdquo; and modified changes you have currently pending to ready your commit. Deletes, adds, etc. usually are untracked. Git tracks modifications and renames. The <code>.</code> adds all files (relative to your current folder). You can be as specific or as generic as you want.</p>




<h2>git commit -am [message]</h2>




<p>This command commits your changes. The <code>-am</code> switch is for all changes (a) with a message (m). You can type <code>-?</code> to get a list of switches you might want to use. If you don&rsquo;t use the <code>-a</code> switch, your untracked changes may not be committed. If someone wants to explain why this is the case, I&rsquo;d love to know (or I guess I could look it up). Whatever the reason is, use <code>-am</code> unless you know otherwise.</p>




<h2>git push [remote] [branch]</h2>




<p>This command will send a git <code>push</code> command to your remote server. In my case, it&rsquo;s appharbor. GitHub will usually tell you to add their remote as <code>origin</code> but you can name them whatever you want. I tend to have <code>appharbor</code> and <code>appharbor-d</code> for staging.</p>




<p>Once you push, your latest changes will be on the remote server. It is usually a good idea to wait to push until you have a stable release ready for your branch. It could be after one commit or after 10 commits.</p>




<h1>Git pushin&#8217;</h1>




<p>So now you know what a typical workflow is for my .NET development. If you&rsquo;re interested in file structure, check out my <a href="http://github.com/kamranayub/.JSON">.JSON</a> project.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2011-06-28T22:38:24+00:00" pubdate data-updated="true">Jun 28<span>th</span>, 2011</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/12/pass-in-your-variables-to-consolelog-as-parameters">Pass in Your Variables to console.log as Parameters to Make Them Navigable</a></h2>
  
  <p>
    <p>I was helping a co-worker debug a JSON issue when I saw he was trying to use <code>console.log</code>. I asked how he was passing it in and he was doing exactly what you&rsquo;d think should work:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="c1">// result = some JSON object</span>
</span><span class='line'><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Returned data: &quot;</span> <span class="o">+</span> <span class="nx">result</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>He was seeing:</p>




<pre><code>Returned data: [Object object]
</code></pre>




<p>He was wondering how he could stringify the result. You could do that, I said, but I have a useful tip!</p>




<p>Try doing this instead:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Returned data: &quot;</span><span class="p">,</span> <span class="nx">result</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>And voila, the console will not try to <code>.toString()</code> your object and it will be navigable:</p>




<p><img src="/blog/images/9.png" alt="Firebug Console Example" /></p>




<p>Clicking the object link will let you view its properties.</p>




<p>I always thought this was a useful and not very well known feature of <code>console.log</code> so hopefully that might assist you in debugging!</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2011-06-27T19:24:54+00:00" pubdate data-updated="true">Jun 27<span>th</span>, 2011</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/11/using-squishit-without-writing-to-the-file-system">Using SquishIt Without Writing to the File System</a></h2>
  
  <p>
    <p>I&rsquo;m a big fan of <a href="https://github.com/jetheredge/SquishIt/">SquishIt</a>, which is a library that compresses and minifies CSS and JS. It automatically keeps thing uncompressed locally and then on your web server, versions and compresses your files. The versioning is based on a checksum of your files so it automatically handles any changes you make, it&rsquo;s gold.</p>




<p>The thing that I don&rsquo;t like is that by default, it writes to your file system which is usually a no-no on shared hosts or even enterprise applications.</p>




<p>I asked if you could use SquishIt programmatically and you can! I <a href="https://github.com/jetheredge/SquishIt/wiki/Using-SquishIt-programmatically-without-the-file-system">wrote up a wiki article</a> on their project page to show how it&rsquo;s done.</p>




<p>If you haven&rsquo;t used SquishIt, I&rsquo;d highly recommend it!</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2011-06-22T19:16:11+00:00" pubdate data-updated="true">Jun 22<span>nd</span>, 2011</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/10/released-nuget-package-of-json">Released NuGet Package of .JSON</a></h2>
  
  <p>
    <p>Yesterday I released my <a href="http://github.com/kamranayub/.JSON">.JSON</a> library as a NuGet package (about time). It is named <strong>DotJson.Source</strong> to follow current conventions. If you need me to, I can also release it as a compiled DLL.</p>




<p>You can get it via Visual Studio or the <a href="http://nuget.org/List/Packages/DotJson.Source">Nuget.org</a> page.</p>




<h2>To Use It</h2>




<p>Add it as a library reference via Nuget. In your code file, you can add a <code>using DotJson;</code> and then start using the library. That&rsquo;s all you have to do.</p>




<p>See the <a href="http://github.com/kamranayub/.JSON/wiki">documentation wiki</a> for more information.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2011-06-17T00:49:32+00:00" pubdate data-updated="true">Jun 17<span>th</span>, 2011</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/9/fixing-the-post-value-of-the-button-element-in-ie">Fixing the POST Value of the Button Element in IE 7 and Below</a></h2>
  
  <p>
    <p>Please <a href="http://www.peterbe.com/plog/button-tag-in-IE">see this write up</a> for the exact issue. Basically, IE 7 and below do not properly submit the &ldquo;value&rdquo; of the <code>&lt;button&gt;</code> tag, opting instead to submit the <code>innerText</code>. We just hit this issue while testing with our users who used IE7 on a project I&rsquo;m on.</p>




<p>Here is the fix I&rsquo;m using which I prefer to all the other alternatives I saw in the comments of that post. It meets two of my objectives:</p>




<ul>
<li>It&rsquo;s totally transparent</li>
<li>It&rsquo;s only for IE 7 and 6</li>
</ul>




<script src="https://gist.github.com/981360.js?file=iebuttonfix.js"></script>




  </p>
  <span class="meta">
    written 








  



<time datetime="2011-05-19T23:07:48+00:00" pubdate data-updated="true">May 19<span>th</span>, 2011</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/8/entity-framework-polymorphism-and-automapper-cant">Entity Framework, Polymorphism, and AutoMapper: Can&#8217;t We All Be Friends?</a></h2>
  
  <p>
    <p>At work we were running into an interesting issue. We are using EF Code First, AutoMapper, and the dynamic proxies generated by EF. We map our domain entities onto our view models.</p>




<h2>The Problem</h2>




<p>AutoMapper fails to map a derived type to a view model base class for use in a general-use scenario:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="k">public</span> <span class="n">IEnumerable</span><span class="p">&lt;</span><span class="n">AbstractViewModel</span><span class="p">&gt;</span> <span class="n">GetPolymorphicClasses</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="kt">var</span> <span class="n">list</span> <span class="p">=</span> <span class="n">db</span><span class="p">.</span><span class="n">AbstractClasses</span><span class="p">.</span><span class="n">ToList</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// list is a list of dynamically proxied derived types</span>
</span><span class='line'>    <span class="c1">// DerivedTypeA, DerivedTypeB, and so on</span>
</span><span class='line'>    <span class="c1">// aka DynamicProxy_xxxxxxx</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">Mapper</span><span class="p">.</span><span class="n">Map</span><span class="p">&lt;</span><span class="n">IEnumerable</span><span class="p">&lt;</span><span class="n">AbstractClass</span><span class="p">&gt;,</span> <span class="n">IEnumerable</span><span class="p">&lt;</span><span class="n">AbstractViewModel</span><span class="p">&gt;&gt;(</span><span class="n">list</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></p>

<h2>The &ldquo;Solution&rdquo;</h2>




<p>This is not a solution, but it&rsquo;s the best I could do with <em>limited</em> knowledge of AutoMapper and a need to just get it working quickly. Thanks to <a href="http://stackoverflow.com/q/3441916/109458">this post on the same problem</a>, I was able to retrofit the answerer&rsquo;s answer to a solution that worked for me (his generated a stack overflow because it seemed to get stuck converting in an infinite loop).</p>




<p>If <a href="http://stackoverflow.com/users/58508/jimmy-bogard">Jimmy Bogard</a> reads this, please tell me what I&rsquo;m doing wrong and how to <em>actually</em> fix it:</p>




<script src="https://gist.github.com/935461.js?file=gistfile1.cs"></script>




  </p>
  <span class="meta">
    written 








  



<time datetime="2011-04-22T09:41:05+00:00" pubdate data-updated="true">Apr 22<span>nd</span>, 2011</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/7/mix-11-day-2-kinects-celebrities-kings-and-clubbin">MIX 11, Day 2 - Kinects, Celebrities, Kings, and Clubbing</a></h2>
  
  <p>
    <p>Have you ever had a day where everything that happens just comes together to create the greatest day ever? Well, let me tell you about mine.</p>




<h2>Kinects for Everyone</h2>




<p><img src="/blog/images/6.png" alt="MIX Keynote" /></p>




<p>I posted about my thoughts on the keynote on <a href="/Blog/Posts/6/mix-11-day-15">Day 1</a>. It was mediocre. It seems that Microsoft saved the best for last because the day 2 keynote was, in a word, amazing.</p>




<p>First, MS covered everything about the new Mango update for Windows Phone 7. I don&rsquo;t even own a WP7 and I wanted to toss my Droid into the trash by the end. Now that there are really awesome and useful APIs being introduced, I may start developing some WP7 applications.</p>




<p>Second, MS covered Silverlight 5 which actually does introduce some useful features like GPU acceleration, XNA integration, and 3D support. That is pretty cool. I haven&rsquo;t checked but I also hope they offer better clipboard integration.</p>




<p>Third, and of course, the best part of the keynote, was the announcement of Kinect for Windows SDK. We saw demos for helping navigation for blind folks, a robotic lounge chair, a game, and a galaxy simulator. As if that weren&rsquo;t good enough, <strong>every attendee got a Kinect</strong>.</p>




<p>The free Kinect was definitely a surprise and an awesome perk of going to MIX. Unfortunately, I already own one and company policy dictates I can&rsquo;t accept gifts over $100&hellip; so I had to forgo that.</p>




<h2>My inner fanboy is satiated</h2>




<p><a href="http://yfrog.com/h3sl2zrhj"><img src="http://desmond.yfrog.com/Himg615/scaled.php?tn=0&amp;server=615&amp;filename=sl2zrh.jpg&amp;xsize=640&amp;ysize=640" alt="Me, Hanselman, and Haack" /></a></p>




<p><a href="http://twitter.com/shanselman">Scott Hanselman</a> and <a href="http://haacked.com">Phil Haack</a>. I was also within 10 feet of <a href="http://wekeroad.com">Rob Conery</a> so that counts, too. &lsquo;nuff said.</p>




<p>Watching presentations by Hanselman is like watching a comedy show, I can only aspire to make people laugh like that during my presentations.</p>




<h2>Circle of Life</h2>




<p><img src="/blog/images/8.png" alt="Lion King" /></p>




<p>Me and Cassie went to <a href="http://www.mandalaybay.com/entertainment/disneys-the-lion-king.aspx">The Lion King at Mandalay Bay</a> later that night. It was fantastic, everything about it was amazing. The costumes were incredibly clever and creative, the actors were awesome, the stage sets were great, and the music was top notch. We sat in the 5th row or so and it was perfect.</p>




<h2>VIP Life in Vegas</h2>




<p><img src="/blog/images/7.png" alt="The Marquee" /></p>




<p>All MIX attendees were invited to <a href="http://www.marqueelasvegas.com/">The Marquee nightclub</a>, which is a new club in Vegas. I got a guest pass for Cassie and we went and it was a lot more fun than I had expected. Usually, I am not one for dancing or clubbing, but I figured this was a unique experience I shouldn&rsquo;t pass up. I am glad I didn&rsquo;t! It was a ton of fun and the nerd level was off the charts. Half the people just sat or stood in place, silently sipping their drinks while everyone else was having fun. We sat and drank a bit but decided we needed to have some fun, so for the rest of the time we danced and partied in the &ldquo;mosh pit.&rdquo; When you&rsquo;re dancing with a bunch of geeks and nerds, you really don&rsquo;t need to worry about how you dance.</p>




<h2>So, in summary&hellip;</h2>




<p>Best. Day. Ever.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2011-04-15T02:45:12+00:00" pubdate data-updated="true">Apr 15<span>th</span>, 2011</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/6/mix-11-day-15">MIX 11, Day 1.5</a></h2>
  
  <p>
    <p>This is the first time I&rsquo;ve ever been to Vegas. I think that one guy on Twitter had it right, &ldquo;everything in Vegas is fake.&rdquo; That said, it&rsquo;s still pretty neat. We walked to the Bellagio last night and saw Celine Dion&rsquo;s water display. My heart <em>did</em> go on.</p>




<h2>Open Source Fest</h2>




<p>The open source fest went swimmingly. I had been afraid I wouldn&rsquo;t meet anyone or no one would like <a href="http://github.com/kamranayub/.JSON">my library</a> but that wasn&rsquo;t the case.</p>




<p>I met John Sheehan from <a href="http://restsharp.org/">RestSharp</a>, Sam Saffron and other developers from Stackoverflow, Jonathan Marbutt from the <a href="http://opus.codeplex.com/">Opus Silverlight framework</a>, and Jeff Weber from the <a href="http://farseerphysics.codeplex.com/">Farseer Physics Engine</a>. I also met lots of lovely people who were kind enough to throw some chips my way.</p>




<p>From the SO team I also acquired a black StackOverflow tee, which I am geeked out about.</p>




<p>I got a lot of awesome feedback on my little library, including plenty of questions about whether it works in Silverlight. Looks like I may have some investigating to do.</p>




<h2>Thoughts on the Keynote</h2>




<p><img src="http://desmond.yfrog.com/Himg620/scaled.php?tn=0&amp;server=620&amp;filename=zjpwp.jpg&amp;xsize=640&amp;ysize=640" alt="Keynote stage" /></p>




<p>I <a href="http://yfrog.com/h8zjpwpj">posted a picture</a> of what the MIX stage looked like at the keynote. It looked like a stage for a rock concert, it was pretty awesome.</p>




<p>The content of the keynote seemed to generate mixed feelings. Several times the speaker had expected an eruption of applause but the audience wasn&rsquo;t forthcoming. Maybe they had all lost their money the night before?</p>




<p>The first half was all about IE and how it&rsquo;s so great and excellent and other browsers (<strong>Chrome</strong>) can&rsquo;t keep up. Personally, I like all the new improvements IE provided and hope to see other browsers play catch-up in terms of hardware acceleration. But the fact that only IE can perform hardware accelerated tasks sort of diminishes the value of the feature, since users not using IE9 (a <em>significant</em> portion of people) lose out. It&rsquo;s a value judgement you have to make (and in an ideal world, <em>shouldn&rsquo;t</em> have to make&hellip;). I don&rsquo;t know if that&rsquo;s any different than the decisions we&rsquo;ve had to make previously as designers about how to tackle issues that other browsers sans IE support, though.</p>




<p>Notably missing was talk about Silverlight. Microsoft seems to be undecided in what to sell&hellip; on one hand they are focusing hard on HTML5 and rich web experiences but on the other they are selling Windows Phone 7 which builds on Silverlight. The rest of the non-MS world has shown it is entirely behind HTML5, so at least on the web, I feel like Silverlight is a losing battle&hellip; not that SL is bad by any means, just that more tooling may come out surrounding HTML5 than SL.</p>




<p>I thought the keynote was &ldquo;interesting&rdquo; and that&rsquo;s probably where I&rsquo;ll stick. I didn&rsquo;t expect half the time to be spent on IE but then I really didn&rsquo;t know what I should be expecting.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2011-04-13T02:57:55+00:00" pubdate data-updated="true">Apr 13<span>th</span>, 2011</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/5/all-the-code-you-write-is-wrong">&#8220;All the Code You Write Is Wrong.&#8221;</a></h2>
  
  <p>
    <p>Every time I read about a &ldquo;best practice&rdquo; or the opinions of highly regarded (to many) developers, I always am amazed at the different opinions in response. This isn&rsquo;t bad. In fact, I think it&rsquo;s pretty cool we all share differing opinions and what works for one person may not work for someone else. I find it refreshing to see all sorts of opinions that propose different ways of doing the same thing.</p>




<p>Thus, my mantra from now on is:</p>




<blockquote><p>&ldquo;All the code you write is wrong.&rdquo;</p></blockquote>




<p>That works for me considering I never met a developer who always thought what they wrote was perfect.</p>




<p>I strive to write &ldquo;good&rdquo; code but I&rsquo;m always ready to hear it is terrible and could be done a better way. That&rsquo;s why there are smarter people than me alive.</p>




<iframe title="YouTube video player" width="640" height="390" src="http://www.youtube.com/embed/05av9iJvgiQ" frameborder="0" allowfullscreen></iframe>




  </p>
  <span class="meta">
    written 








  



<time datetime="2011-04-08T20:47:57+00:00" pubdate data-updated="true">Apr 8<span>th</span>, 2011</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/4/come-visit-me-at-mix-11">Come Visit Me at MIX 11</a></h2>
  
  <p>
    <p>I am extremely excited (and thankful) to be visiting <a href="http://live.visitmix.com/">MIX 11</a> next week. Hopefully I can garner some &ldquo;cred&rdquo; with the .NET community and I hope I can meet some of my .NET community idols as well.</p>




<h2>Come see me at Open Source Fest</h2>




<p>I&rsquo;ll be standing at a cocktail table at the <a href="http://live.visitmix.com/OpenSourceFest">Open Source Fest</a> (I am #37) presenting my tiny little &ldquo;library&rdquo; (what do you call one file?), <a href="http://github.com/kamranayub/.JSON">.JSON</a>.</p>




<h2>About .JSON</h2>




<p>I know that there exists several open source libraries for dealing with JSON, including <a href="http://james.newtonking.com/projects/json-net.aspx">Json.NET</a> and <a href="https://github.com/jsonfx/jsonfx">JsonFx</a>.</p>




<p>However, I wanted something a bit different. First, I didn&rsquo;t want a library&hellip; all I needed to do was consume JSON-based web services. Second, all I wanted to do was interact with the results as a dynamically typed object.</p>




<p>The output of that endeavor was .JSON, a single-file library containing about <a href="https://github.com/kamranayub/.JSON/blob/master/DotJson.cs">~500 SLOC</a>.</p>




<p>It supports:</p>




<ul>
<li>POST to JSON services</li>
<li>GET from JSON services</li>
<li>Converting strings to dynamic JSON objects</li>
<li>Convert JSON objects to strings</li>
<li>Convert dictionaries to JSON objects</li>
<li>Supports LINQ to Objects if using <code>dynamic[]</code></li>
<li>Includes my <a href="/Home/PrettyJson"><code>PrettyJson</code></a> formatter</li>
</ul>




<p>I only realized recently that JsonFx also supports dynamic typing, but as far as I know no other library offers a utility to access JSON services. I sent a message to JsonFx&rsquo;s owner about integrating my <code>JsonService</code> into JsonFx, as that seems like a good fit.</p>




<p>Part of my motivation to create the library was to learn about dynamics. Part of it was to prove you <em>could</em> do it in a single, reasonably small class. I thought it was pretty neat! I <a href="http://www.hanselman.com/blog/NuGetPackageOfTheWeek4DeserializingJSONWithJsonNET.aspx">was not disappointed to hear</a> that JsonFx did the same thing, since I learned a lot in the process and I still think I added some value for people that didn&rsquo;t need a whole library to work with JSON.</p>




<p>At any rate, I am talking about it at the OSF. Maybe some kind souls will part with a poker chip or two for my &ldquo;tip jar&rdquo;. For me, it&rsquo;s just to meet <a href="http://twitter.com/eisenbergeffect">all</a> <a href="http://twttier.com/bradmi">the</a> <a href="http://twitter.com/gblock">other</a> <a href="http://twitter.com/samsaffron">awesome</a> <a href="http://twitter.com/johnsheehan">developers</a>.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2011-04-07T20:14:55+00:00" pubdate data-updated="true">Apr 7<span>th</span>, 2011</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/3/a-better-mvc-label-helper">A Better MVC Label Helper</a></h2>
  
  <p>
    <p>I have high standards for web-based forms, after having spent the last 7 months ankle deep in them at work.</p>




<p>I have decided on a standard way for defining my forms:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;form&gt;</span>
</span><span class='line'>    <span class="nt">&lt;fieldset&gt;</span>
</span><span class='line'>        <span class="nt">&lt;legend&gt;</span>A form area<span class="nt">&lt;/legend&gt;</span>
</span><span class='line'>
</span><span class='line'>        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;field text&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>            <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;firstName&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>                First Name
</span><span class='line'>                <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;note&quot;</span><span class="nt">&gt;</span>Enter your first name<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>            <span class="nt">&lt;/label&gt;</span>
</span><span class='line'>
</span><span class='line'>            <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;firstName&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/fieldset&gt;</span>
</span><span class='line'><span class="nt">&lt;/form&gt;</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>In a future post, I will more formally present a form solution and my stylesheet that goes with it. For now, let&rsquo;s talk about generating that <code>&lt;label&gt;</code> above from metadata alone.</p>




<h3>First, the end result</h3>




<p>Here is what my Razor view looks like for that form field above:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;field text&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    @Html.FieldLabelFor(m =&gt; m.FirstName)
</span><span class='line'>    @Html.EditorFor(m =&gt; m.FirstName)
</span><span class='line'>    @Html.ValidationMessageFor(m =&gt; m.FirstName)
</span><span class='line'><span class="nt">&lt;/div&gt;</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>Based off of:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="k">public</span> <span class="k">class</span> <span class="nc">Person</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'><span class="na">    [DisplayName(&quot;First Name&quot;)]</span>
</span><span class='line'><span class="na">    [Description(&quot;Please enter a first name&quot;)]</span>
</span><span class='line'><span class="na">    [Required]</span> <span class="c1">// leave off to add &#39;(optional)&#39; to label</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">FirstName</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>That&rsquo;s it.</p>




<h3>Building a better LabelFor</h3>




<p>My helper is called <code>FieldLabelFor</code> but you can call it whatever you want. Here&rsquo;s what it does:</p>




<ul>
<li>Is entirely based off metadata attributes</li>
<li>Label text is based off of <code>[DisplayName]</code> attribute (via ModelMetadata)</li>
<li>Adds an <em>(optional)</em> if a field isn&rsquo;t required</li>
<li>Adds a <code>&lt;span class="note"&gt;</code> to the label if a <code>[Description()]</code> attribute is found</li>
<li>Supports both attributes decorating the model and via <code>[MetadataType]</code> attribute</li>
</ul>




<p>It outputs the <code>&lt;label&gt;</code> markup found above.</p>




<p>I&rsquo;ve made it a Gist, so you can hack and slash it to your needs:</p>




<script src="https://gist.github.com/907780.js?file=FieldLabelFor.cs"></script>




<p>Remember to add <code>@using YourProject.Library.Extensions;</code> to the top of your razor file (or add the namespace to your <code>Views\web.config</code>).</p>




<p>I&rsquo;ve styled my forms so that a full field will look something like:</p>




<p><img src="/blog/images/5.png" alt="Field label style" /></p>




<p>As you can probably tell, I subscribe to the notion that all fields are required unless otherwise marked. I think for a user filling out a form, this is what they assume to be the case and more often that not, more fields are required than optional.</p>




<h3>Off you go!</h3>




<p>Start building better forms with MVC. Look for a post at a later date that will delve deeper into my opinions on web forms (hint: they suck!).</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2011-04-07T18:54:05+00:00" pubdate data-updated="true">Apr 7<span>th</span>, 2011</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/2/befriending-appharbor-and-making-it-work-for-you">Befriending AppHarbor and Making It Work for You</a></h2>
  
  <p>
    <p>I chose to partially host my site on <a href="http://appharbor.com">AppHarbor</a> because it affords several luxuries for <strong>free</strong>:</p>




<ul>
<li>Load balancing</li>
<li>Automatic builds and deploys</li>
<li>Fast and easy setup/maintenance</li>
<li>Private Git hosting</li>
</ul>




<p>However, it does fall short in a couple areas:</p>




<ol>
<li>Native support for a staging environment</li>
<li>Free database is only 20MB and it&rsquo;s $10/mo for a 10GB database</li>
<li>Any more instances incur about $36/mo each</li>
</ol>




<p>There are workarounds for the first two issues, which I will cover here. The third is a judgement call on your part, whether you think it&rsquo;s worth the cost. For me, I don&rsquo;t need another instance.</p>




<h2>Setting up a Staging Environment</h2>




<p>You <em>can</em> set up a staging environment in AppHarbor. I needed several things for my staging environment:</p>




<ol>
<li>Is a sub-domain</li>
<li>Is protected so only I can access it</li>
</ol>




<p>Here is what I did:</p>




<ol>
<li>In AppHarbor, create a new application (e.g. <em>Kamranicus-Dev</em>)</li>
<li>Locally, add this new application as a new remote to your Git:

<ul>
<li><code>git remote add appharbor-stage {your new app Git url}</code></li>
</ul>
</li>
<li>In the <strong>Configuration Variables</strong> section of your AppHarbor application, add a new variable:

<ul>
<li><code>RuntimeEnvironment</code> with a value of <code>Staging</code></li>
</ul>
</li>
<li>In your <strong>web.config</strong>, you can now add a new <code>appSetting</code>:

<ul>
<li><code>&lt;add key="RuntimeEnvironment" value="Local" /&gt;</code></li>
</ul>
</li>
</ol>




<p>Now, when you push to your new <code>appharbor-stage</code> remote, AppHarbor will automatically replace that app setting with the value <code>Staging</code>.</p>




<p>At this point, you&rsquo;re all done. You can now add a host name like <strong>stage.kamranicus.com</strong> to point to your staging site.</p>




<p>To push to your staging environment:</p>




<pre><code>git push appharbor-stage master
</code></pre>




<p>If you&rsquo;re wondering about connection strings, you will need to test for the current <code>RuntimeEnvironment</code> and use one of your choosing:</p>




<pre><code>var runtimeEnvironment = ConfigurationManager.AppSettings["RuntimeEnvironment"].ToString();
</code></pre>




<h3>Adding protection</h3>




<p>If you&rsquo;re like me, you don&rsquo;t want everyone looking at your new changes before they&rsquo;re ready and you sure as hell don&rsquo;t want people adding stuff to your development database.</p>




<p>I am using Forms authentication in conjunction with OpenID for Kamranicus. Thus, I needed a to make a special attribute for my <code>BaseController</code> that programmatically decided whether or not to restrict access to the controller based on the runtime environment.</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
</span><span class='line'><span class="k">using</span> <span class="nn">System.Configuration</span><span class="p">;</span>
</span><span class='line'><span class="k">using</span> <span class="nn">System.Web.Mvc</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">namespace</span> <span class="nn">System.Web.Mvc</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">public</span> <span class="k">class</span> <span class="nc">AuthorizeLocalAttribute</span> <span class="p">:</span> <span class="n">AuthorizeAttribute</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">private</span> <span class="k">const</span> <span class="kt">string</span> <span class="n">LOCAL</span> <span class="p">=</span> <span class="s">&quot;Local&quot;</span><span class="p">;</span>
</span><span class='line'>      <span class="k">private</span> <span class="k">const</span> <span class="kt">string</span> <span class="n">STAGING</span> <span class="p">=</span> <span class="s">&quot;Staging&quot;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">protected</span> <span class="k">override</span> <span class="kt">bool</span> <span class="nf">AuthorizeCore</span><span class="p">(</span><span class="n">HttpContextBase</span> <span class="n">httpContext</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="c1">// Ignore all Account controller calls (Anonymous)</span>
</span><span class='line'>          <span class="k">if</span> <span class="p">(</span><span class="n">httpContext</span><span class="p">.</span><span class="n">Request</span><span class="p">.</span><span class="n">RequestContext</span><span class="p">.</span><span class="n">RouteData</span><span class="p">.</span><span class="n">Values</span><span class="p">[</span><span class="s">&quot;controller&quot;</span><span class="p">].</span><span class="n">ToString</span><span class="p">()</span> <span class="p">==</span> <span class="s">&quot;Account&quot;</span><span class="p">)</span>
</span><span class='line'>              <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>          <span class="c1">// Get runtime environment</span>
</span><span class='line'>          <span class="kt">string</span> <span class="n">runtimeEnvironment</span> <span class="p">=</span> <span class="n">ConfigurationManager</span><span class="p">.</span><span class="n">AppSettings</span><span class="p">[</span><span class="s">&quot;RuntimeEnvironment&quot;</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>          <span class="k">if</span> <span class="p">(</span><span class="n">runtimeEnvironment</span> <span class="p">==</span> <span class="n">STAGING</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="k">return</span> <span class="k">base</span><span class="p">.</span><span class="n">AuthorizeCore</span><span class="p">(</span><span class="n">httpContext</span><span class="p">);</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>          <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>              <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>You can then apply this attribute to your <code>BaseController</code>:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="na">[AuthorizeLocal(Users = &quot;MyAdminID&quot;)]</span>
</span><span class='line'><span class="k">public</span> <span class="k">abstract</span> <span class="k">class</span> <span class="nc">BaseController</span> <span class="p">:</span> <span class="n">Controller</span> <span class="p">{</span>
</span><span class='line'>    <span class="c1">// yada yada yada</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></p>

<h2>Does it work?</h2>




<p>This is the method I use and it seems to work great. Note that you can create any number of environments like this and programmatically do different things based on what gets injected in by AppHarbor.</p>




<h2>Taking care of storage</h2>




<p>For my blog I store all my images in the database. This means that I would quickly run over the 20MB in the free database allotted by AppHarbor. I also don&rsquo;t want to pay an extra $10/mo for a database.</p>




<p>Instead, I already have an account with <a href="http://arvixe.com">Arvixe</a> and as far as I could tell, it is not against the TOS of AppHarbor to host your database externally. So that&rsquo;s what I did. I get to use my Arvixe account for not only DB hosting, but also the mail server and other hosting provider options for a measley $10/mo (it also hosts some other sites I own).</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2011-04-06T21:11:44+00:00" pubdate data-updated="true">Apr 6<span>th</span>, 2011</time>
    


  </span>

  
</article>

        </div>
      </div>
      
      
      <div class="row">
        <div class="col-md-offset-3 col-md-6">
          <article>
  <h2><a href="/blog/posts/1/welcome-to-kamranicus-yaps">Welcome to Kamranicus [YAPS]</a></h2>
  
  <p>
    <h1>YAPS (Yet Another Personal Site)</h1>




<p>My other site <a href="http://intrepidstudios.com">Intrepid Studios</a> will be undergoing some major changes soon, due to my dad taking most of the reigns. It will shift from being mostly my pet project site to an actual commercial site. I won&rsquo;t be doing much directly with it anymore and I needed a new home for all <strong>my</strong> stuff.</p>




<p>Thus, I welcome you to <strong>Kamranicus!</strong> I decided to create my own personal site and learn some new technology in the process. I knew a thing or two about MVC but I had yet to sit down and <em>learn</em> it first-hand. It was great timing because at work I am coming onto some existing ASP.NET MVC applications.</p>




<h2>Overview</h2>




<p>One thing you hopefully <strong>won&rsquo;t</strong> notice is that I don&rsquo;t bother to support any browser less than the latest modern versions (IE9, FF4, Chrome, etc). This is on purpose, mainly to decrease maintenance and development time, but also because I&rsquo;ve always wanted to say <strong>&lsquo;eff you</strong> to all those nasty old browsers (I am including IE8 and below in this category).</p>




<h3>Homepage</h3>




<p>The <a href="/">homepage</a> is all JSON-based, except the blog overview. The &ldquo;feeds&rdquo; use my <a href="http://github.com/kamranayub/.JSON">.JSON</a> library and the code consists of about one line per feed I need:</p>


<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="kt">dynamic</span><span class="p">[]</span> <span class="n">repositories</span> <span class="p">=</span> <span class="n">JsonService</span><span class="p">.</span><span class="n">GetFrom</span><span class="p">(</span><span class="s">&quot;<a href="http://github.com/api/v2/json/repos/show/kamranayub&amp;quot;">http://github.com/api/v2/json/repos/show/kamranayub&amp;quot;</a></span><span class="p">).</span><span class="n">repositories</span><span class="p">;</span>
</span><span class='line'><span class="kt">dynamic</span><span class="p">[]</span> <span class="n">forSale</span> <span class="p">=</span> <span class="n">JsonService</span><span class="p">.</span><span class="n">GetFrom</span><span class="p">(</span><span class="s">&quot;<a href="http://marketplace.envato.com/api/v2/new-files-from-user:kayub,codecanyon.json&amp;quot;">http://marketplace.envato.com/api/v2/new-files-from-user:kayub,codecanyon.json&amp;quot;</a></span><span class="p">).</span><span class="n">newfilesfromuser</span><span class="p">;</span>
</span><span class='line'><span class="kt">dynamic</span><span class="p">[]</span> <span class="n">tweets</span> <span class="p">=</span> <span class="n">JsonService</span><span class="p">.</span><span class="n">GetFrom</span><span class="p">(</span><span class="s">&quot;<a href="http://api.twitter.com/1/statuses/user_timeline.json?screen_name=kamranayub&amp;quot;">http://api.twitter.com/1/statuses/user_timeline.json?screen_name=kamranayub&amp;quot;</a></span><span class="p">);</span>
</span><span class='line'><span class="kt">dynamic</span> <span class="n">soAnswers</span> <span class="p">=</span> <span class="n">JsonService</span><span class="p">.</span><span class="n">GetFrom</span><span class="p">(</span><span class="s">&quot;<a href="http://api.stackoverflow.com/1.1/users/109458/answers?pagesize=6&amp;amp;sort=creation&amp;quot;">http://api.stackoverflow.com/1.1/users/109458/answers?pagesize=6&amp;amp;sort=creation&amp;quot;</a></span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>The <a href="/Blog">blog</a> is custom-made and bare-bones. You ask, &ldquo;But why not use a proven full-fledged blog framework?&rdquo; I wanted the first-class integration, I wanted some custom stuff, and because I just needed a good excuse to learn Razor and MVC 3 properly. This was a great exercise and I hope to share it with you soon.</p>




<h2>MVC 3 Razor Blog Features</h2>




<h3>Admin Panel Free</h3>




<p>I didn&rsquo;t want to build a separate admin panel for my blog. I built it so that I can manage it using a pretty reasonable workflow. When a post is displayed, I see this above it:</p>




<p><img src="/blog/images/1.png" alt="Post Toolbar" /></p>




<p>I can delete it on the spot or edit it inline via AJAX. Over a comment, <em>you</em> and I can see this:</p>




<p><img src="/blog/images/2.png" alt="Comment Toolbar" /></p>




<p>For now I am not putting a time limit for editing or deleting comments&hellip; it is also tied to the same OpenID account you posted the comment as, so if you login with a different one, you won&rsquo;t be the owner. I should mention, the way it is coded, <strong>I cannot delete or edit your comments</strong>. If spam becomes an issue (which I will guess it will) then I&rsquo;ll have to at least be able to mark comments as spam.</p>




<h3>REST-based Design</h3>




<p>I made the routes designed as a poor man&rsquo;s REST implementation. So lots of things support AJAX through the same URLs as browsing without JS.</p>




<p>This allows <em>me</em> to do fun inline-editing of my posts and allows <em>you</em> to inline edit your comments.</p>




<p>It also allows me to not duplicate any templates as I can just pass the same exact partially-rendered views to jQuery as I do normally without JS.</p>




<h3>OpenID Support</h3>




<p>Since I didn&rsquo;t want to create my own membership system, I just use some very basic OpenID using <a href="http://www.dotnetopenauth.net/">DotNetOpenAuth</a>.</p>




<p>I don&rsquo;t store anything except your claim ID, nickname (if given), and email (if given).</p>




<h3>Gravatars</h3>




<p>I don&rsquo;t know why but this was important to me. It&rsquo;s so easy to implement but it just <em>looks</em> awesome.</p>




<h3>Kamdown</h3>




<p>Windows Live Writer is great, but I really love Markdown. This was one big reason I didn&rsquo;t want a huge blog library, I <strong>needed</strong> this. I didn&rsquo;t bother with any Metaweblog API hooks because I liked the web-based approach to updating my blog and the simplicity of Markdown.</p>




<p>I use a slightly enhanced version of Markdown (called Kamdown, <em>har har</em>) for my posts and your comments. For my posts, I implemented the SUPA Java applet to add copy/paste support for images:</p>




<p><img src="/blog/images/3.png" alt="SUPA Upload Popup" /></p>




<p>It just adds the image data to the DB and outputs a URL: <code>![SUPA Image Upload Support](/blog/images/2.png)</code></p>




<p>This works both from clicking a button to open the dialog and also by just hitting Ctrl-V in the textbox.</p>




<p>I also was inspired by GitHub&rsquo;s great interface for Markdown-enabled fields, letting you hotswap between plain text or previewed HTML. I love it!</p>




<p><img src="/blog/images/4.png" alt="Markdown editor" /></p>




<p>I am using the <a href="http://alexgorbatchev.com/SyntaxHighlighter/">SyntaxHighlighter</a> JS plugin to do syntax highlighting. I initially tried IronPython with Pygments, but there were some memory issues and I decided not to use it as it wasn&rsquo;t stable. A shame since that is the library GitHub uses and it&rsquo;s very nice. I may go back and try to figure out what the problem was.</p>




<p>You use it the same way you use code blocks in GitHub wikis, triple-ticks (`).</p>




<h3>SubSonic + Ninject</h3>




<p>I really liked <a href="http://subsonicproject.com">SubSonic&rsquo;s</a> <code>SimpleRepository</code> so I used it. I didn&rsquo;t bother with much layering and focused more on getting things done so most of my data access code is 1-2 lines wherever I need it.</p>




<p>I use Ninject as my DI framework because it&rsquo;s simple and straight to the point.</p>




<h3>AppHarbor Deployment</h3>




<p>I am using the free <a href="http://appharbor.com">AppHarbor</a> instance to host and deploy the site (using a separate back-end I get for free).</p>




<p>It&rsquo;s a really neat service but it still needs some minor adjustments, such as more separation between environments (for testing). I may talk about this later. That said, it does its job well and the free instance seems to be fast enough for my needs. I do have <a href="http://arvixe.com">Arvixe</a> to fall back on, but their control panel and setup was being too ornery for me.</p>




<h2>So where&rsquo;s the code?</h2>




<p>I hope to release my code soon, as soon as I clean it up and make it somewhat presentable. I figure it&rsquo;d be nice to let other people build their own custom blogs from a small codebase like I did. It&rsquo;s separated into its own Area, so the code is separate from the core site. The great thing is you get all the integration MVC provides and it&rsquo;s as customizable as you need it to be.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2011-04-06T04:10:57+00:00" pubdate data-updated="true">Apr 6<span>th</span>, 2011</time>
    


  </span>

  
</article>

        </div>
      </div>
      
    </div>
  </div>
</div>

    <footer id="footer" class="her-row">
  <div class="container">
    <div class="row">
      <div class="col-md-1">
  <a href="/"><h4>Home</h4></a>
</div>

<div class="col-md-2">
  <div class="social-icon-list">
    
    <a href="https://twitter.com/kamranayub"><img src="/images/glyphicons_social_31_twitter.png"/></a>
    

    
    <a href="https://github.com/kamranayub"><img src="/images/glyphicons_social_21_github.png"/></a>
    

    

    
  </div>
</div>

<div class="pull-right">
  <h4>Powered by <a href="http://octopress.org/">Octopress</a>. Designed by <a href="http://AdrianArtiles.com">Adrian Artiles</a>.</h4>
</div>


    </div>
  </div>
</footer>

    
  </body>
</html>
